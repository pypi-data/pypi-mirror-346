{
  "$schema": "https://json-schema.org/draft-07/schema",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "The name of the project"
    },
    "desc": {
      "type": "string",
      "description": "The description of the project. Usually a couple of sentences."
    },
    "version": {
      "type": "string",
      "description": "The version of the project (semver)"
    },
    "cover": {
      "type": "string",
      "description": "The relative path to the cover image"
    },
    "linkWeb": {
      "type": "string",
      "description": "The URL of the home page of the project"
    },
    "linkInstagram": {
      "type": "string",
      "description": "The URL of the Instagram page of the project"
    },
    "linkTwitter": {
      "type": "string",
      "description": "The URL of the Twitter page of the project"
    },
    "linkFacebook": {
      "type": "string",
      "description": "The URL of the Facebook page of the project"
    },
    "linkYoutube": {
      "type": "string",
      "description": "The URL of the YouTube page of the project"
    },
    "lang": {
      "type": "string",
      "description": "The language used by the project (can be determined automatically when the project is published)"
    },
    "uuid": {
      "type": "string",
      "description": "The UUID of the project (created by the platform when published for the first time)"
    },
    "draft": {
      "type": "boolean",
      "default": false,
      "description": "Is this project not yet ready to be published to other users?"
    },
    "image": {
      "type": "string",
      "description": "The UUID of the cover image (created by the platform when published for the first time)"
    },
    "buyPrice": {
      "type": "number",
      "description": "The price to pay for the project once"
    },
    "queryPrice": {
      "type": "number",
      "description": "The price to pay for each query"
    },
    "rentPrice": {
      "type": "number",
      "description": "The price to pay for each 'rentDays' period"
    },
    "rentDays": {
      "type": "number",
      "description": "The period of the project in days"
    },
    "endpoints": {
      "type": "array",
      "description": "The endpoints of the project",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the endpoint"
          },
          "internal_id": {
            "type": "string",
            "description": "The stable internal identifier for the endpoint"
          },
          "desc": {
            "type": "string",
            "description": "The description of the endpoint. Usually a couple of sentences."
          },
          "protocol": {
            "type": "string",
            "enum": [
              "basic",
              "pydantic",
              "a2a",
              "rest"
            ],
            "description": "The type of the endpoint (the communication protocol)"
          },
          "showGraph": {
            "type": "boolean",
            "description": "Whether to display the graph of the inner workings of the endpoint in the UI"
          },
          "path": {
            "type": "string",
            "description": "The relative path to the file or directory that implements the endpoint. If a file path, it's a one-file agent; if a directory path, it's a more complex agent."
          },
          "input": {
            "oneOf": [
              {
                "type": "string",
                "description": "The description of the only input of the basic endpoint"
              },
              {
                "type": "array",
                "description": "The detailed description of the inputs of endpoints other than the basic type",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "description": "The name of the input"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "text"
                      ],
                      "description": "The type of the input"
                    },
                    "size": {
                      "type": "number",
                      "description": "The size of the input"
                    },
                    "desc": {
                      "type": "string",
                      "description": "The description of the input"
                    }
                  },
                  "required": [
                    "desc"
                  ]
                }
              }
            ]
          },
          "output": {
            "oneOf": [
              {
                "type": "string",
                "description": "The description of the only output of the basic endpoint"
              },
              {
                "type": "array",
                "description": "The detailed description of the outputs of endpoints other than the basic type",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "description": "The name of the output"
                    },
                    "type": {
                      "type": "string",
                      "enum": [
                        "text"
                      ],
                      "description": "The type of the output"
                    },
                    "size": {
                      "type": "number",
                      "description": "The size of the output"
                    },
                    "desc": {
                      "type": "string",
                      "description": "The description of the output"
                    }
                  },
                  "required": [
                    "desc"
                  ]
                }
              }
            ]
          },
          "url": {
            "type": "string",
            "description": "The URL of the endpoint (after deployment)"
          },
          "uuid": {
            "type": "string",
            "description": "The UUID of the endpoint (created by the platform when published for the first time)"
          },
          "deployment": {
            "type": "object",
            "description": "Deployment configuration for the endpoint",
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "aws-lambda",
                  "ec2"
                ],
                "description": "The type of deployment"
              },
              "stack_name": {
                "type": "string",
                "description": "The name of the CloudFormation stack (for AWS deployments)"
              },
              "deployment_id": {
                "type": "string",
                "description": "Unique identifier for the deployment"
              },
              "stage": {
                "type": "string",
                "description": "Deployment stage (e.g., dev, prod)"
              },
              "region": {
                "type": "string",
                "description": "AWS region for the deployment"
              },
              "last_deployed": {
                "type": "string",
                "description": "Timestamp of the last deployment"
              }
            },
            "required": [
              "type"
            ]
          }
        },
        "required": [
          "name",
          "desc",
          "protocol"
        ]
      }
    }
  },
  "required": [
    "name",
    "desc"
  ]
}