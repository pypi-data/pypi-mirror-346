var ua=Object.defineProperty;var ys=e=>{throw TypeError(e)};var ca=(e,t,s)=>t in e?ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var it=(e,t,s)=>ca(e,typeof t!="symbol"?t+"":t,s),Ye=(e,t,s)=>t.has(e)||ys("Cannot "+s);var o=(e,t,s)=>(Ye(e,t,"read from private field"),s?s.call(e):t.get(e)),S=(e,t,s)=>t.has(e)?ys("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),M=(e,t,s,a)=>(Ye(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),Z=(e,t,s)=>(Ye(e,t,"access private method"),s);var Se=(e,t,s,a)=>({set _(r){M(e,t,r,s)},get _(){return o(e,t,a)}});import{e as Ze,k as ts,c as he,ag as da,ah as ha,ai as fa,aj as bs,af as Ls,g as Qs,ak as es,al as is,am as os,an as ss,x as B,ao as va,ap as ga,aq as pa,n as ma,o as Fe,p as qs,B as ls,F as ya,w as Us,r as ba,E as _a,ar as xa,as as wa,at as Pa,au as _s,y as Le,z as Sa,s as H,a as ae,A as Qe,h as Ns,l as Bt,I as qe,av as $a,aw as Ca,ax as Ta,ay as Aa,N as Ae,az as Oa,H as Ks,aA as ka,f as Ma,a2 as Da,_ as Ia,$ as Ra,a0 as Ea,a1 as xs,M as Fa,j as La,b as Qa,aB as qa,u as Ua,aC as Na,d as Ka}from"../chunks/OyE1vH6U.js";import{c as O,a as d,t as k,d as Ba,b as St,s as mt,e as ce}from"../chunks/CCHOD-L1.js";import{aH as Ha,p as L,ah as Bs,aI as ot,k as z,aJ as Gt,g as i,y as qt,aK as Hs,f as x,a as Q,t as K,aL as ja,l as za,d as $,i as Ut,j as Ga,c as T,e as yt,r as A,n as et,s as F,w as Je,a8 as Ce,A as js,aD as Va}from"../chunks/Db_QKtB5.js";import{c as zs}from"../chunks/CRLA7a-5.js";import{i as me,p as Wa}from"../chunks/B48UUeh1.js";import{d as pt,p as P,i as dt,c as Ue,a as de,r as W,e as I,s as It,b as us}from"../chunks/BkOFT6Jj.js";import{F as ws,S as Ps,u as Ya,R as Ja,r as Xa,c as lt,d as Za,e as Gs,t as tr,f as er,n as V,i as Vs,j as Xe,k as sr,a as Ws,l as Ys,m as Ss,M as ar,o as $s,p as rr,q as nr,v as ir,w as Cs,x as Ts,y as or,h as As,z as Os,A as lr}from"../chunks/Cn9iUqyr.js";import{C as ur}from"../chunks/DrHL3fc3.js";import{n as Js,p as as,s as rs,i as cr}from"../chunks/DMsBv0R5.js";import{p as ns}from"../chunks/B-SrZW14.js";const dr=!0,hr=dr,fr=Ha;function vr(e,t){return e.protocol!==t.protocol?t.href:t.password||t.username?"//"+[t.username,t.password].filter(Boolean).join(":")+"@"+t.host+t.pathname+t.search+t.hash:e.host!==t.host?"//"+t.host+t.pathname+t.search+t.hash:t.pathname+t.search+t.hash}function gr(e,t,s){const a=new URL(s,t).pathname;return e.origin!==t.origin||!e.pathname.startsWith(a)}var pr=k('<link rel="alternate">');function mr(e,t){L(t,!1);const[s,a]=Ue(),r=()=>pt(ns,"$page",s),l=Gt(),n=Gt(),u=Gt(),f=Js(Bs,new URL(r().url))||"/";let v=P(t,"availableLanguageTags",8),p=P(t,"strategy",8),c=P(t,"currentLang",8);const h=(m,y)=>{const b=[];for(const C of v()){const D=y.getLocalisedPath(m,C),R=rs(D,f,void 0),q=new URL(R,new URL(r().url)).href;b.push(q)}return b};ot(()=>r(),()=>{z(l,as(r().url.pathname,f)[0])}),ot(()=>(qt(p()),i(l),qt(c())),()=>{z(n,p().getCanonicalPath(i(l),c()))}),ot(()=>(i(n),qt(p())),()=>{z(u,h(i(n),p()))}),Hs(),me();var g=O(),w=x(g);{var _=m=>{var y=O(),b=x(y);Ze(b,1,()=>i(u),ts,(C,D,R)=>{var q=pr();K(()=>{he(q,"hreflang",v()[R]),he(q,"href",i(D))}),d(C,q)}),d(m,y)};dt(w,m=>{v().length>=1&&m(_)})}d(e,g),Q(),a()}const yr=(e,t)=>`${da}=${e};Path=${t};SameSite=lax;Max-Age=31557600`;function br(e,t){L(t,!1);const[s,a]=Ue(),r=()=>pt(ns,"$page",s),l=Gt(),n=Gt(),u=Js(Bs,new URL(r().url))||"/";let f=P(t,"languageTag",24,()=>{}),v=P(t,"i18n",8),p=Gt(0);function c(w,_){try{const m=new URL(za(ns).url),[y,b]=as(m.pathname,u),C=v().strategy.getCanonicalPath(y,i(l)),D=new URL(m);D.pathname=rs(C,u,b);const R=new URL(w,new URL(D));if(gr(R,m,u)||v().config.exclude(R.pathname))return w;const q=_??i(l),[bt,Ct]=as(R.pathname,u),_t=v().strategy.getLocalisedPath(bt,q),Rt=new URL(R);return Rt.pathname=rs(_t,u,Ct),vr(m,Rt)}catch{return w}}ha({translateHref:c}),ot(()=>(qt(f()),qt(v()),r()),()=>{z(l,f()??v().getLanguageFromUrl(r().url))}),ot(()=>(qt(v()),i(l)),()=>{v().config.runtime.setLanguageTag(i(l))}),ot(()=>i(l),()=>{document.documentElement.lang=i(l)}),ot(()=>(qt(v()),i(l)),()=>{document.documentElement.dir=v().config.textDirection[i(l)]??"ltr"}),ot(()=>(i(l),i(p)),()=>{i(l)&&z(p,i(p)+1)}),ot(()=>(i(l),i(p),bs),()=>{i(l)&&(i(p)>1||fr)&&ja(bs)}),ot(()=>i(l),()=>{z(n,i(l))}),ot(()=>i(l),()=>{document.cookie=yr(i(l),u)}),Hs(),me();var h=O();Ba(w=>{var _=O(),m=x(_);{var y=b=>{mr(b,{get availableLanguageTags(){return v().config.runtime.availableLanguageTags},get strategy(){return v().strategy},get currentLang(){return i(l)}})};dt(m,b=>{v().config.seo.noAlternateLinks!==!0&&!v().config.exclude(r().url.pathname)&&b(y)})}d(w,_)});var g=x(h);fa(g,()=>i(n),w=>{var _=O(),m=x(_);Ls(m,t,"default",{},null),d(w,_)}),d(e,h),Q(),a()}const _r=Qs(),xr=async()=>({globalStorage:_r}),ri=Object.freeze(Object.defineProperty({__proto__:null,load:xr},Symbol.toStringTag,{value:"Module"})),wr=(e,t)=>{const s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.setAttribute("download",e),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(s)};function Pr(e){return window.getComputedStyle(e).getPropertyValue("direction")}function Sr(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?os:is,vertical:ss}[t]}function $r(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?is:os,vertical:es}[t]}function Cr(e="ltr",t="horizontal"){return["ltr","rtl"].includes(e)||(e="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:Sr(e,t),prevKey:$r(e,t)}}function Tr(e){const t=B(null);function s(){if(!ga)return[];const n=document.getElementById(e.rootNodeId.current);return n?e.candidateSelector?Array.from(n.querySelectorAll(e.candidateSelector)):Array.from(n.querySelectorAll(`[${e.candidateAttr}]:not([data-disabled])`)):[]}function a(){var u;const n=s();n.length&&((u=n[0])==null||u.focus())}function r(n,u,f=!1){var C;const v=document.getElementById(e.rootNodeId.current);if(!v||!n)return;const p=s();if(!p.length)return;const c=p.indexOf(n),h=Pr(v),{nextKey:g,prevKey:w}=Cr(h,e.orientation.current),_=e.loop.current,m={[g]:c+1,[w]:c-1,[pa]:0,[va]:p.length-1};if(f){const D=g===ss?is:ss,R=w===es?os:es;m[D]=c+1,m[R]=c-1}let y=m[u.key];if(y===void 0)return;u.preventDefault(),y<0&&_?y=p.length-1:y===p.length&&_&&(y=0);const b=p[y];if(b)return b.focus(),t.current=b.id,(C=e.onCandidateFocus)==null||C.call(e,b),b}function l(n){const u=s(),f=t.current!==null;return n&&!f&&u[0]===n?(t.current=n.id,0):(n==null?void 0:n.id)===t.current?0:-1}return{setCurrentTabStopId(n){t.current=n},getTabIndex:l,handleKeydown:r,focusFirstCandidate:a,currentTabStopId:t}}const Ar="data-tabs-root",Or="data-tabs-list",Xs="data-tabs-trigger",kr="data-tabs-content";var fe,Oe;class Mr{constructor(t){it(this,"opts");it(this,"rovingFocusGroup");S(this,fe,Ut(de([])));it(this,"valueToTriggerId",new _s);it(this,"valueToContentId",new _s);S(this,Oe,$(()=>({id:this.opts.id.current,"data-orientation":ls(this.opts.orientation.current),[Ar]:""})));this.opts=t,Fe(t),this.rovingFocusGroup=Tr({candidateAttr:Xs,rootNodeId:this.opts.id,loop:this.opts.loop,orientation:this.opts.orientation})}get triggerIds(){return i(o(this,fe))}set triggerIds(t){z(o(this,fe),de(t))}registerTrigger(t,s){return this.triggerIds.push(t),this.valueToTriggerId.set(s,t),()=>{this.triggerIds=this.triggerIds.filter(a=>a!==t),this.valueToTriggerId.delete(s)}}registerContent(t,s){return this.valueToContentId.set(s,t),()=>{this.valueToContentId.delete(s)}}setValue(t){this.opts.value.current=t}get props(){return i(o(this,Oe))}}fe=new WeakMap,Oe=new WeakMap;var ke,Me;class Dr{constructor(t,s){it(this,"opts");it(this,"root");S(this,ke,$(()=>this.root.opts.disabled.current));S(this,Me,$(()=>({id:this.opts.id.current,role:"tablist","aria-orientation":ya(this.root.opts.orientation.current),"data-orientation":ls(this.root.opts.orientation.current),[Or]:"","data-disabled":qs(i(o(this,ke)))})));this.opts=t,this.root=s,Fe(t)}get props(){return i(o(this,Me))}}ke=new WeakMap,Me=new WeakMap;var Vt,Ot,Wt,De,Yt,Te,Ie;class Ir{constructor(t,s){S(this,Yt);it(this,"opts");it(this,"root");S(this,Vt,$(()=>this.root.opts.value.current===this.opts.value.current));S(this,Ot,$(()=>this.opts.disabled.current||this.root.opts.disabled.current));S(this,Wt,Ut(0));S(this,De,$(()=>this.root.valueToContentId.get(this.opts.value.current)));S(this,Ie,$(()=>({id:this.opts.id.current,role:"tab","data-state":Zs(i(o(this,Vt))),"data-value":this.opts.value.current,"data-orientation":ls(this.root.opts.orientation.current),"data-disabled":qs(i(o(this,Ot))),"aria-selected":wa(i(o(this,Vt))),"aria-controls":i(o(this,De)),[Xs]:"",disabled:xa(i(o(this,Ot))),tabindex:i(o(this,Wt)),onclick:this.onclick,onfocus:this.onfocus,onkeydown:this.onkeydown})));this.opts=t,this.root=s,Fe(t),Us([()=>this.opts.id.current,()=>this.opts.value.current],([a,r])=>this.root.registerTrigger(a,r)),Ga(()=>{this.root.triggerIds.length,i(o(this,Vt))||!this.root.opts.value.current?z(o(this,Wt),0):z(o(this,Wt),-1)}),this.onfocus=this.onfocus.bind(this),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onfocus(t){this.root.opts.activationMode.current!=="automatic"||i(o(this,Ot))||Z(this,Yt,Te).call(this)}onclick(t){i(o(this,Ot))||Z(this,Yt,Te).call(this)}onkeydown(t){if(!i(o(this,Ot))){if(t.key===ba||t.key===_a){t.preventDefault(),Z(this,Yt,Te).call(this);return}this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,t)}}get props(){return i(o(this,Ie))}}Vt=new WeakMap,Ot=new WeakMap,Wt=new WeakMap,De=new WeakMap,Yt=new WeakSet,Te=function(){this.root.opts.value.current!==this.opts.value.current&&this.root.setValue(this.opts.value.current)},Ie=new WeakMap;var ve,Re,Ee;class Rr{constructor(t,s){it(this,"opts");it(this,"root");S(this,ve,$(()=>this.root.opts.value.current===this.opts.value.current));S(this,Re,$(()=>this.root.valueToTriggerId.get(this.opts.value.current)));S(this,Ee,$(()=>({id:this.opts.id.current,role:"tabpanel",hidden:Pa(!i(o(this,ve))),tabindex:0,"data-value":this.opts.value.current,"data-state":Zs(i(o(this,ve))),"aria-labelledby":i(o(this,Re)),[kr]:""})));this.opts=t,this.root=s,Fe(t),Us([()=>this.opts.id.current,()=>this.opts.value.current],([a,r])=>this.root.registerContent(a,r))}get props(){return i(o(this,Ee))}}ve=new WeakMap,Re=new WeakMap,Ee=new WeakMap;const Ne=new ma("Tabs.Root");function Er(e){return Ne.set(new Mr(e))}function Fr(e){return new Ir(e,Ne.get())}function Lr(e){return new Dr(e,Ne.get())}function Qr(e){return new Rr(e,Ne.get())}function Zs(e){return e?"active":"inactive"}var qr=k("<div><!></div>");function Ur(e,t){L(t,!0);let s=P(t,"id",19,Le),a=P(t,"ref",15,null),r=P(t,"value",15,""),l=P(t,"onValueChange",3,Sa),n=P(t,"orientation",3,"horizontal"),u=P(t,"loop",3,!0),f=P(t,"activationMode",3,"automatic"),v=P(t,"disabled",3,!1),p=W(t,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","orientation","loop","activationMode","disabled","children","child"]);const c=Er({id:B.with(()=>s()),value:B.with(()=>r(),y=>{r(y),l()(y)}),orientation:B.with(()=>n()),loop:B.with(()=>u()),activationMode:B.with(()=>f()),disabled:B.with(()=>v()),ref:B.with(()=>a(),y=>a(y))}),h=$(()=>Qe(p,c.props));var g=O(),w=x(g);{var _=y=>{var b=O(),C=x(b);H(C,()=>t.child,()=>({props:i(h)})),d(y,b)},m=y=>{var b=qr();let C;var D=T(b);H(D,()=>t.children??yt),A(b),K(()=>C=ae(b,C,{...i(h)})),d(y,b)};dt(w,y=>{t.child?y(_):y(m,!1)})}d(e,g),Q()}var Nr=k("<div><!></div>");function Kr(e,t){L(t,!0);let s=P(t,"id",19,Le),a=P(t,"ref",15,null),r=W(t,["$$slots","$$events","$$legacy","children","child","id","ref","value"]);const l=Qr({value:B.with(()=>t.value),id:B.with(()=>s()),ref:B.with(()=>a(),c=>a(c))}),n=$(()=>Qe(r,l.props));var u=O(),f=x(u);{var v=c=>{var h=O(),g=x(h);H(g,()=>t.child,()=>({props:i(n)})),d(c,h)},p=c=>{var h=Nr();let g;var w=T(h);H(w,()=>t.children??yt),A(h),K(()=>g=ae(h,g,{...i(n)})),d(c,h)};dt(f,c=>{t.child?c(v):c(p,!1)})}d(e,u),Q()}var Br=k("<div><!></div>");function Hr(e,t){L(t,!0);let s=P(t,"id",19,Le),a=P(t,"ref",15,null),r=W(t,["$$slots","$$events","$$legacy","child","children","id","ref"]);const l=Lr({id:B.with(()=>s()),ref:B.with(()=>a(),c=>a(c))}),n=$(()=>Qe(r,l.props));var u=O(),f=x(u);{var v=c=>{var h=O(),g=x(h);H(g,()=>t.child,()=>({props:i(n)})),d(c,h)},p=c=>{var h=Br();let g;var w=T(h);H(w,()=>t.children??yt),A(h),K(()=>g=ae(h,g,{...i(n)})),d(c,h)};dt(f,c=>{t.child?c(v):c(p,!1)})}d(e,u),Q()}var jr=k("<button><!></button>");function zr(e,t){L(t,!0);let s=P(t,"disabled",3,!1),a=P(t,"id",19,Le),r=P(t,"type",3,"button"),l=P(t,"ref",15,null),n=W(t,["$$slots","$$events","$$legacy","child","children","disabled","id","type","value","ref"]);const u=Fr({id:B.with(()=>a()),disabled:B.with(()=>s()??!1),value:B.with(()=>t.value),ref:B.with(()=>l(),m=>l(m))}),f=$(()=>Qe(n,u.props,{type:r()})),v=Ns(),[p,c]=v;var h=O(),g=x(h);{var w=m=>{var y=O(),b=x(y);H(b,()=>t.child,()=>({props:i(f)})),d(m,y)},_=m=>{var y=jr();let b;var C=T(y);H(C,()=>t.children??yt),A(y),K(D=>b=ae(y,b,{...D}),[()=>c({...i(f)},[{attribute_name:"formaction"}])]),d(m,y)};dt(g,m=>{t.child?m(w):m(_,!1)})}d(e,h),Q()}function Gr(e,t){L(t,!0);let s=P(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=x(r);const n=$(()=>Bt("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",t.class));I(l,()=>Kr,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),Q()}function Vr(e,t){L(t,!0);let s=P(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=x(r);const n=$(()=>Bt("bg-muted text-muted-foreground inline-flex h-10 items-center justify-center rounded-md p-1",t.class));I(l,()=>Hr,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),Q()}function ks(e,t){L(t,!0);let s=P(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=x(r);const n=$(()=>Bt("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm",t.class));I(l,()=>zr,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),Q()}const Wr=Ur,Yr=async({dataset_id:e,filename:t="",includeFilter:s,excludeFilter:a})=>{var l;const r={data:void 0,error:void 0};try{const n=await zs.POST("/api/datasets/{dataset_id}/export",{params:{path:{dataset_id:e}},body:{include:s,exclude:a},headers:{"Access-Control-Expose-Headers":"Content-Disposition"},parseAs:"blob"});if(n.error)throw new Error(JSON.stringify(n.error,null,2));if(!n.data)throw new Error("No data");r.data=n.data,t=t||((l=n.response.headers.get("content-disposition"))==null?void 0:l.split("filename=")[1])||`export_${new Date().toISOString()}.txt`,wr(t,r.data)}catch(n){r.error="Error exporting dataset: "+String(n)}return r};function Jr(e,t){L(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"chart-bar"},()=>s,{iconNode:[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16"}],["path",{d:"M7 16h8"}],["path",{d:"M7 11h12"}],["path",{d:"M7 6h3"}]],children:(r,l)=>{var n=O(),u=x(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),Q()}function Xr(e,t){L(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"circle-check"},()=>s,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:(r,l)=>{var n=O(),u=x(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),Q()}function Zr(e,t){L(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"download"},()=>s,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(r,l)=>{var n=O(),u=x(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),Q()}function tn(e,t){L(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"loader-circle"},()=>s,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(r,l)=>{var n=O(),u=x(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),Q()}var en=k("<div><!></div>");function sn(e,t){L(t,!0);let s=P(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=en();let l;var n=T(r);H(n,()=>t.children??yt),A(r),us(r,u=>s(u),()=>s()),K(u=>l=ae(r,l,{class:u,...a}),[()=>Bt("flex flex-col space-y-2 text-center sm:text-left",t.class)]),d(e,r),Q()}var an=k("<div><!></div>");function rn(e,t){L(t,!0);let s=P(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=an();let l;var n=T(r);H(n,()=>t.children??yt),A(r),us(r,u=>s(u),()=>s()),K(u=>l=ae(r,l,{class:u,...a}),[()=>Bt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t.class)]),d(e,r),Q()}function nn(e,t){L(t,!0);let s=P(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=x(r);const n=$(()=>Bt("text-foreground text-lg font-semibold",t.class));I(l,()=>$a,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),Q()}const on=Ta,ln=Ca;var un=k('<span class="text-destructive-foreground"> </span>'),cn=k("<!> <span> </span>",1),dn=k('<div class="flex items-center gap-2"><!></div>'),hn=k('<div class="my-4"><!></div>'),fn=k('<div class="absolute inset-0 flex items-center justify-center backdrop-blur-sm" data-testid="loading-spinner"><!></div>'),vn=k(" <!>",1),gn=k('<div class="flex w-full flex-row gap-3"><!> <!></div>'),pn=k('<!> <div class="mt-6"><!></div> <!> <!>',1);function mn(e,t){const s=P(t,"submitLabel",3,"Submit"),a=P(t,"cancelLabel",3,"Cancel"),r=P(t,"errorMessage",3,""),l=P(t,"successMessage",3,""),n=P(t,"isOpen",3,!1),u=P(t,"isLoading",3,!1),f=P(t,"isDisabled",3,!1);var v=O(),p=x(v);I(p,()=>on,(c,h)=>{h(c,{get open(){return n()},get onOpenChange(){return t.onOpenChange},children:(g,w)=>{var _=O(),m=x(_);I(m,()=>Aa,(y,b)=>{b(y,{side:"right",class:"w-[400px]",children:(C,D)=>{var R=pn(),q=x(R);I(q,()=>sn,(ht,ft)=>{ft(ht,{children:(Tt,Ht)=>{var vt=O(),At=x(vt);I(At,()=>nn,(U,xt)=>{xt(U,{children:(Y,X)=>{et();var J=St();K(()=>mt(J,t.title)),d(Y,J)},$$slots:{default:!0}})}),d(Tt,vt)},$$slots:{default:!0}})});var bt=F(q,2),Ct=T(bt);H(Ct,()=>t.children),A(bt);var _t=F(bt,2);{var Rt=ht=>{var ft=hn(),Tt=T(ft);const Ht=$(()=>r()?"destructive":"default"),vt=$(()=>r()?"alert-destructive":"alert-success");I(Tt,()=>Oa,(At,U)=>{U(At,{get variant(){return i(Ht)},class:"border text-foreground",get"data-testid"(){return i(vt)},children:(xt,Y)=>{var X=dn(),J=T(X);{var Et=st=>{var N=un(),G=T(N,!0);A(N),K(()=>mt(G,r())),d(st,N)},Ft=st=>{var N=cn(),G=x(N);Xr(G,{class:"h-4 w-4 text-primary"});var at=F(G,2),re=T(at,!0);A(at),K(()=>mt(re,l())),d(st,N)};dt(J,st=>{r()?st(Et):st(Ft,!1)})}A(X),d(xt,X)},$$slots:{default:!0}})}),A(ft),Ks(3,ft,()=>ka),d(ht,ft)};dt(_t,ht=>{(r()||l())&&ht(Rt)})}var Ke=F(_t,2);I(Ke,()=>rn,(ht,ft)=>{ft(ht,{class:"mt-6",children:(Tt,Ht)=>{var vt=gn(),At=T(vt);I(At,()=>ln,(Y,X)=>{X(Y,{class:"w-full",children:(J,Et)=>{Ae(J,{class:"w-full",variant:"ghost",get disabled(){return u()},"data-testid":"cancel-button",children:(Ft,st)=>{et();var N=St();K(()=>mt(N,a())),d(Ft,N)},$$slots:{default:!0}})},$$slots:{default:!0}})});var U=F(At,2);const xt=$(()=>f()||u());Ae(U,{class:"relative w-full",get disabled(){return i(xt)},get onclick(){return t.onSubmit},"data-testid":"submit-button",children:(Y,X)=>{et();var J=vn(),Et=x(J),Ft=F(Et);{var st=N=>{var G=fn(),at=T(G);tn(at,{class:"animate-spin"}),A(G),d(N,G)};dt(Ft,N=>{u()&&N(st)})}K(()=>mt(Et,`${s()??""} `)),d(Y,J)},$$slots:{default:!0}}),A(vt),d(Tt,vt)},$$slots:{default:!0}})}),d(C,R)},$$slots:{default:!0}})}),d(g,_)},$$slots:{default:!0}})}),d(e,v)}function yn({dataset_id:e,includeFilter:t,excludeFilter:s}){const a=Je(0),r=Je(void 0),l=Je(!1);return(t||s)&&(l.set(!0),zs.POST("/api/datasets/{dataset_id}/export/stats",{params:{path:{dataset_id:e}},body:{include:t,exclude:s}}).then(n=>{n!=null&&n.data&&a.set(n.data)}).catch(n=>{r.set(n.message)}).finally(()=>{l.set(!1)})),{isLoading:l,error:r,count:a}}var bn=k("<!> Export & Download",1),_n=k("<!> <!>",1),xn=k("<!> <!> <!> <!>",1),wn=k("<!> <!>",1),Pn=k("<!> <!>",1),Sn=k('<div class="rounded-lg bg-muted p-4"><h4 class="font-medium">Summary</h4> <div class="mt-2 space-y-2 text-sm text-muted-foreground"><p>Samples to export: <strong> </strong></p></div></div>'),$n=k('<div class="space-y-6"><!> <div class="space-y-2"><!></div> <!></div>'),Cn=k("<!> <!>",1);function Tn(e,t){L(t,!0);const[s,a]=Ue(),r=()=>pt(w,"$tags",s),l=()=>pt(m,"$selectedSampleIds",s),n=()=>pt(y,"$selectedSampleAnnotationCropIds",s),u=()=>pt(i(_t),"$statError",s),f=()=>pt(i(Ct),"$isLoading",s),v=()=>pt(i(bt),"$count",s);let p=Ut(!1),c=Ut(!1),h=Wa.params.dataset_id,g=Ut("");const{tags:w}=Ma({dataset_id:h}),_=$(()=>{var U;return((U=r().find(xt=>xt.tag_id===i(g)))==null?void 0:U.name)??"Select tag to export"}),{selectedSampleIds:m,selectedSampleAnnotationCropIds:y}=Qs();let b=Ut("bySelection");const C=$(()=>{const U={};return i(b)==="bySelection"?l().size>0?U.sample_ids=Array.from(l()):n().size>0&&(U.annotation_ids=Array.from(n())):i(b)==="byTag"&&(U.tag_ids=i(g)?[i(g)]:void 0),U}),D=$(()=>i(c)?void 0:i(C)),R=$(()=>i(c)?i(C):void 0),q=$(()=>yn({dataset_id:h,includeFilter:i(D),excludeFilter:i(R)})),bt=$(()=>i(q).count),Ct=$(()=>i(q).isLoading),_t=$(()=>i(q).error),Rt=$(()=>!!Math.max(l().size,n().size)),Ke=$(()=>i(b)==="bySelection"?i(Rt):i(g));let ht=$(()=>i(b)==="bySelection"&&!i(Rt)?"No samples or annotations selected.":u()?u():i(b)==="bySelection"&&l().size>0&&n().size>0?"You can only export samples or annotations, not both.":"");const ft=()=>{Yr({dataset_id:h,includeFilter:i(D),excludeFilter:i(R)})};var Tt=Cn(),Ht=x(Tt);Ae(Ht,{variant:"ghost",class:"flex items-center space-x-2",onclick:()=>z(p,!0),children:(U,xt)=>{var Y=bn(),X=x(Y);Zr(X,{class:"size-4"}),et(),d(U,Y)},$$slots:{default:!0}});var vt=F(Ht,2);const At=$(()=>!!i(ht));mn(vt,{title:"Export samples",submitLabel:"Export",get isOpen(){return i(p)},get isDisabled(){return i(At)},get isLoading(){return f()},get errorMessage(){return i(ht)},onSubmit:ft,onOpenChange:U=>z(p,de(U)),children:(U,xt)=>{var Y=$n(),X=T(Y);I(X,()=>Wr,(N,G)=>{G(N,{class:"w-full",get value(){return i(b)},set value(at){z(b,de(at))},children:(at,re)=>{var ne=Pn(),ye=x(ne);ws(ye,{label:"Export",children:(Be,cs)=>{var be=O(),ds=x(be);I(ds,()=>Vr,(He,hs)=>{hs(He,{class:"grid w-full grid-cols-2",children:(_e,fs)=>{var xe=_n(),we=x(xe);I(we,()=>ks,(Pe,jt)=>{jt(Pe,{value:"bySelection",children:(zt,je)=>{et();var Lt=St("By selection");d(zt,Lt)},$$slots:{default:!0}})});var ie=F(we,2);I(ie,()=>ks,(Pe,jt)=>{jt(Pe,{value:"byTag",children:(zt,je)=>{et();var Lt=St("By tag");d(zt,Lt)},$$slots:{default:!0}})}),d(_e,xe)},$$slots:{default:!0}})}),d(Be,be)}});var ea=F(ye,2);I(ea,()=>Gr,(Be,cs)=>{cs(Be,{value:"byTag",class:"pt-2",children:(be,ds)=>{ws(be,{label:"Tag to export",description:"Select the tag you want to export samples for",children:(He,hs)=>{var _e=O(),fs=x(_e);I(fs,()=>Da,(xe,we)=>{we(xe,{type:"single",name:"tagIdToExport",get value(){return i(g)},set value(ie){z(g,de(ie))},children:(ie,Pe)=>{var jt=wn(),zt=x(jt);I(zt,()=>Ia,(Lt,ze)=>{ze(Lt,{class:"w-full",children:(Ge,sa)=>{et();var oe=St();K(()=>mt(oe,i(_))),d(Ge,oe)},$$slots:{default:!0}})});var je=F(zt,2);I(je,()=>Ra,(Lt,ze)=>{ze(Lt,{children:(Ge,sa)=>{var oe=O(),aa=x(oe);I(aa,()=>Ea,(ra,na)=>{na(ra,{children:(ia,zn)=>{var vs=xn(),gs=x(vs);I(gs,()=>Ps,(rt,nt)=>{nt(rt,{children:(wt,le)=>{et();var Qt=St("Annotation tags");d(wt,Qt)},$$slots:{default:!0}})});var ps=F(gs,2);Ze(ps,1,()=>r().filter(rt=>rt.kind=="annotation"),ts,(rt,nt)=>{var wt=O(),le=x(wt);I(le,()=>xs,(Qt,Ve)=>{Ve(Qt,{get value(){return i(nt).tag_id},get label(){return i(nt).name},children:(We,la)=>{et();var ue=St();K(()=>mt(ue,i(nt).name)),d(We,ue)},$$slots:{default:!0}})}),d(rt,wt)});var ms=F(ps,2);I(ms,()=>Ps,(rt,nt)=>{nt(rt,{children:(wt,le)=>{et();var Qt=St("Sample tags");d(wt,Qt)},$$slots:{default:!0}})});var oa=F(ms,2);Ze(oa,1,()=>r().filter(rt=>rt.kind=="sample"),ts,(rt,nt)=>{var wt=O(),le=x(wt);I(le,()=>xs,(Qt,Ve)=>{Ve(Qt,{get value(){return i(nt).tag_id},get label(){return i(nt).name},children:(We,la)=>{et();var ue=St();K(()=>mt(ue,i(nt).name)),d(We,ue)},$$slots:{default:!0}})}),d(rt,wt)}),d(ia,vs)},$$slots:{default:!0}})}),d(Ge,oe)},$$slots:{default:!0}})}),d(ie,jt)},$$slots:{default:!0}})}),d(He,_e)}})},$$slots:{default:!0}})}),d(at,ne)},$$slots:{default:!0}})});var J=F(X,2),Et=T(J);ur(Et,{name:"inverse-selection",label:"Inverse selection",get isChecked(){return i(c)},onCheckedChange:()=>z(c,!i(c)),helperText:"Inverse selection will export all samples that are not selected"}),A(J);var Ft=F(J,2);{var st=N=>{var G=Sn(),at=F(T(G),2),re=T(at),ne=F(T(re)),ye=T(ne,!0);A(ne),A(re),A(at),A(G),K(()=>mt(ye,v())),d(N,G)};dt(Ft,N=>{i(Ke)&&N(st)})}A(Y),d(U,Y)},$$slots:{default:!0}}),d(e,Tt),Q(),a()}var An=k('<div role="tooltip" id="tooltip"> </div>'),On=k('<div class="relative inline-block" tabindex="0" role="button"><!> <!></div>');function kn(e,t){L(t,!0);let s=P(t,"position",3,"top"),a=Ut(!1),r;function l(){if(!r)return{};switch(s()){case"top":return{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"5px"};case"bottom":return{top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"5px"};case"left":return{right:"100%",top:"50%",transform:"translateY(-50%)",marginRight:"5px"};case"right":return{left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:"5px"};default:return{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"5px"}}}function n(){z(a,!0)}function u(){z(a,!1)}var f=On(),v=T(f);H(v,()=>t.children);var p=F(v,2);{var c=h=>{var g=An(),w=T(g,!0);A(g),K((_,m)=>{La(g,1,_),Qa(g,m),mt(w,t.content)},[()=>Fa(Bt("bg-popover text-popover-foreground absolute z-50 max-w-xs rounded-md px-3 py-1.5 text-xs shadow-md",t.class)),l]),Ks(3,g,()=>qa,()=>({y:s()==="top"?5:s()==="bottom"?-5:0,x:s()==="left"?5:s()==="right"?-5:0,duration:200})),d(h,g)};dt(p,h=>{i(a)&&t.content&&h(c)})}A(f),us(f,h=>r=h,()=>r),K(()=>he(f,"aria-describedby",i(a)?"tooltip":void 0)),ce("mouseenter",f,n),ce("mouseleave",f,u),ce("focusin",f,n),ce("focusout",f,u),ce("keydown",f,h=>h.key==="Escape"&&u()),d(e,f),Q()}var Mn=k("<!> <span>Metrics</span>",1);function Dn(e,t){L(t,!1);const[s,a]=Ue(),r=()=>pt(n,"$hasEnoughTasksForMetrics",s),l=()=>pt(u,"$isMetricsPanelOpen",s),{hasEnoughTasksForMetrics:n}=Ua(),{isMetricsPanelOpen:u,toggleMetricsPanel:f}=Ya();function v(){f()}me();const p=Ce(()=>r()?"":"Metrics are only available when you have both ground truth and prediction annotation tasks");kn(e,{get content(){return i(p)},children:(c,h)=>{const g=Ce(()=>l()?"default":"ghost"),w=Ce(()=>!r());Ae(c,{get variant(){return i(g)},class:"flex items-center space-x-2",onclick:v,get disabled(){return i(w)},children:(_,m)=>{var y=Mn(),b=x(y);Jr(b,{class:"size-4"}),et(2),d(_,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),Q(),a()}var In=k('<header><div class="p mb-3 border-b border-border-hard bg-card px-4 py-4 pl-8 text-diffuse-foreground"><div class="flex justify-between"><div class="w-50 flex-none"><a><!></a></div> <div class="flex flex-auto justify-end gap-2"><!> <!> <!></div></div></div></header>');function Rn(e,t){L(t,!1);const s=Ns(),[a,r]=s;me();var l=In(),n=T(l),u=T(n),f=T(u),v=T(f),p=T(v);Ln(p),A(v),A(f);var c=F(f,2),h=T(c);Dn(h,{});var g=F(h,2);Tn(g,{});var w=F(g,2);Na(w,{}),A(c),A(u),A(n),A(l),K(_=>he(v,"href",_),[()=>a("/",void 0)],Ce),d(e,l),Q()}const En=""+new URL("../assets/LightlyLogo.BNjCIww-.png",import.meta.url).href;var Fn=k('<div><img alt="Lightly Purple Logo" class="h-10"></div>');function Ln(e){var t=Fn(),s=T(t);he(s,"src",En),A(t),d(e,t)}var Jt,Xt,tt,Nt,j,ge,Kt,ut,Pt,Is,Qn=(Is=class extends Ja{constructor(t){super();S(this,ut);S(this,Jt);S(this,Xt);S(this,tt);S(this,Nt);S(this,j);S(this,ge);S(this,Kt);M(this,Kt,!1),M(this,ge,t.defaultOptions),this.setOptions(t.options),this.observers=[],M(this,Nt,t.client),M(this,tt,o(this,Nt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,M(this,Jt,Un(this.options)),this.state=t.state??o(this,Jt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=o(this,j))==null?void 0:t.promise}setOptions(t){this.options={...o(this,ge),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&o(this,tt).remove(this)}setData(t,s){const a=Xa(this.state.data,t,this.options);return Z(this,ut,Pt).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(t,s){Z(this,ut,Pt).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var a,r;const s=(a=o(this,j))==null?void 0:a.promise;return(r=o(this,j))==null||r.cancel(t),s?s.then(lt).catch(lt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(o(this,Jt))}isActive(){return this.observers.some(t=>Za(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!tr(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=o(this,j))==null||s.continue()}onOnline(){var s;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=o(this,j))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),o(this,tt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(o(this,j)&&(o(this,Kt)?o(this,j).cancel({revert:!0}):o(this,j).cancelRetry()),this.scheduleGc()),o(this,tt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Z(this,ut,Pt).call(this,{type:"invalidate"})}fetch(t,s){var f,v,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(o(this,j))return o(this,j).continueRetry(),o(this,j).promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(h=>h.options.queryFn);c&&this.setOptions(c.options)}const a=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(M(this,Kt,!0),a.signal)})},l=()=>{const c=Vs(this.options,s),h={client:o(this,Nt),queryKey:this.queryKey,meta:this.meta};return r(h),M(this,Kt,!1),this.options.persister?this.options.persister(c,h,this):c(h)},n={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:o(this,Nt),state:this.state,fetchFn:l};r(n),(f=this.options.behavior)==null||f.onFetch(n,this),M(this,Xt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=n.fetchOptions)==null?void 0:v.meta))&&Z(this,ut,Pt).call(this,{type:"fetch",meta:(p=n.fetchOptions)==null?void 0:p.meta});const u=c=>{var h,g,w,_;Xe(c)&&c.silent||Z(this,ut,Pt).call(this,{type:"error",error:c}),Xe(c)||((g=(h=o(this,tt).config).onError)==null||g.call(h,c,this),(_=(w=o(this,tt).config).onSettled)==null||_.call(w,this.state.data,c,this)),this.scheduleGc()};return M(this,j,er({initialPromise:s==null?void 0:s.initialPromise,fn:n.fetchFn,abort:a.abort.bind(a),onSuccess:c=>{var h,g,w,_;if(c===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(m){u(m);return}(g=(h=o(this,tt).config).onSuccess)==null||g.call(h,c,this),(_=(w=o(this,tt).config).onSettled)==null||_.call(w,c,this.state.error,this),this.scheduleGc()},onError:u,onFail:(c,h)=>{Z(this,ut,Pt).call(this,{type:"failed",failureCount:c,error:h})},onPause:()=>{Z(this,ut,Pt).call(this,{type:"pause"})},onContinue:()=>{Z(this,ut,Pt).call(this,{type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0})),o(this,j).start()}},Jt=new WeakMap,Xt=new WeakMap,tt=new WeakMap,Nt=new WeakMap,j=new WeakMap,ge=new WeakMap,Kt=new WeakMap,ut=new WeakSet,Pt=function(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...qn(a.data,this.options),fetchMeta:t.meta??null};case"success":return{...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return Xe(r)&&r.revert&&o(this,Xt)?{...o(this,Xt),fetchStatus:"idle"}:{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),V.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),o(this,tt).notify({query:this,type:"updated",action:t})})},Is);function qn(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sr(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Un(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,a=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var gt,Rs,Nn=(Rs=class extends Ws{constructor(t={}){super();S(this,gt);this.config=t,M(this,gt,new Map)}build(t,s,a){const r=s.queryKey,l=s.queryHash??Ys(r,s);let n=this.get(l);return n||(n=new Qn({client:t,queryKey:r,queryHash:l,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(r)}),this.add(n)),n}add(t){o(this,gt).has(t.queryHash)||(o(this,gt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=o(this,gt).get(t.queryHash);s&&(t.destroy(),s===t&&o(this,gt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){V.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return o(this,gt).get(t)}getAll(){return[...o(this,gt).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>Ss(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>Ss(t,a)):s}notify(t){V.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){V.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){V.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gt=new WeakMap,Rs),$t,ct,pe,Es,Kn=(Es=class extends Ws{constructor(t={}){super();S(this,$t);S(this,ct);S(this,pe);this.config=t,M(this,$t,new Set),M(this,ct,new Map),M(this,pe,0)}build(t,s,a){const r=new ar({mutationCache:this,mutationId:++Se(this,pe)._,options:t.defaultMutationOptions(s),state:a});return this.add(r),r}add(t){o(this,$t).add(t);const s=$e(t);if(typeof s=="string"){const a=o(this,ct).get(s);a?a.push(t):o(this,ct).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(o(this,$t).delete(t)){const s=$e(t);if(typeof s=="string"){const a=o(this,ct).get(s);if(a)if(a.length>1){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}else a[0]===t&&o(this,ct).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=$e(t);if(typeof s=="string"){const a=o(this,ct).get(s),r=a==null?void 0:a.find(l=>l.state.status==="pending");return!r||r===t}else return!0}runNext(t){var a;const s=$e(t);if(typeof s=="string"){const r=(a=o(this,ct).get(s))==null?void 0:a.find(l=>l!==t&&l.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){V.batch(()=>{o(this,$t).forEach(t=>{this.notify({type:"removed",mutation:t})}),o(this,$t).clear(),o(this,ct).clear()})}getAll(){return Array.from(o(this,$t))}find(t){const s={exact:!0,...t};return this.getAll().find(a=>$s(s,a))}findAll(t={}){return this.getAll().filter(s=>$s(t,s))}notify(t){V.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return V.batch(()=>Promise.all(t.map(s=>s.continue().catch(lt))))}},$t=new WeakMap,ct=new WeakMap,pe=new WeakMap,Es);function $e(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Ms(e){return{onFetch:(t,s)=>{var p,c,h,g,w;const a=t.options,r=(h=(c=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:c.fetchMore)==null?void 0:h.direction,l=((g=t.state.data)==null?void 0:g.pages)||[],n=((w=t.state.data)==null?void 0:w.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const v=async()=>{let _=!1;const m=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},y=Vs(t.options,t.fetchOptions),b=async(C,D,R)=>{if(_)return Promise.reject();if(D==null&&C.pages.length)return Promise.resolve(C);const q={client:t.client,queryKey:t.queryKey,pageParam:D,direction:R?"backward":"forward",meta:t.options.meta};m(q);const bt=await y(q),{maxPages:Ct}=t.options,_t=R?rr:nr;return{pages:_t(C.pages,bt,Ct),pageParams:_t(C.pageParams,D,Ct)}};if(r&&l.length){const C=r==="backward",D=C?Bn:Ds,R={pages:l,pageParams:n},q=D(a,R);u=await b(R,q,C)}else{const C=e??l.length;do{const D=f===0?n[0]??a.initialPageParam:Ds(a,u);if(f>0&&D==null)break;u=await b(u,D),f++}while(f<C)}return u};t.options.persister?t.fetchFn=()=>{var _,m;return(m=(_=t.options).persister)==null?void 0:m.call(_,v,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=v}}}function Ds(e,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}function Bn(e,{pages:t,pageParams:s}){var a;return t.length>0?(a=e.getPreviousPageParam)==null?void 0:a.call(e,t[0],t,s[0],s):void 0}var E,kt,Mt,Zt,te,Dt,ee,se,Fs,ta=(Fs=class{constructor(e={}){S(this,E);S(this,kt);S(this,Mt);S(this,Zt);S(this,te);S(this,Dt);S(this,ee);S(this,se);M(this,E,e.queryCache||new Nn),M(this,kt,e.mutationCache||new Kn),M(this,Mt,e.defaultOptions||{}),M(this,Zt,new Map),M(this,te,new Map),M(this,Dt,0)}mount(){Se(this,Dt)._++,o(this,Dt)===1&&(M(this,ee,ir.subscribe(async e=>{e&&(await this.resumePausedMutations(),o(this,E).onFocus())})),M(this,se,Cs.subscribe(async e=>{e&&(await this.resumePausedMutations(),o(this,E).onOnline())})))}unmount(){var e,t;Se(this,Dt)._--,o(this,Dt)===0&&((e=o(this,ee))==null||e.call(this),M(this,ee,void 0),(t=o(this,se))==null||t.call(this),M(this,se,void 0))}isFetching(e){return o(this,E).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return o(this,kt).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=o(this,E).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=o(this,E).build(this,t),a=s.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Ts(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return o(this,E).findAll(e).map(({queryKey:t,state:s})=>{const a=s.data;return[t,a]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),r=o(this,E).get(a.queryHash),l=r==null?void 0:r.state.data,n=or(t,l);if(n!==void 0)return o(this,E).build(this,a).setData(n,{...s,manual:!0})}setQueriesData(e,t,s){return V.batch(()=>o(this,E).findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=o(this,E).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=o(this,E);V.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=o(this,E);return V.batch(()=>(s.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},a=V.batch(()=>o(this,E).findAll(e).map(r=>r.cancel(s)));return Promise.all(a).then(lt).catch(lt)}invalidateQueries(e,t={}){return V.batch(()=>(o(this,E).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},a=V.batch(()=>o(this,E).findAll(e).filter(r=>!r.isDisabled()).map(r=>{let l=r.fetch(void 0,s);return s.throwOnError||(l=l.catch(lt)),r.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(lt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=o(this,E).build(this,t);return s.isStaleByTime(Ts(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(lt).catch(lt)}fetchInfiniteQuery(e){return e.behavior=Ms(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(lt).catch(lt)}ensureInfiniteQueryData(e){return e.behavior=Ms(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Cs.isOnline()?o(this,kt).resumePausedMutations():Promise.resolve()}getQueryCache(){return o(this,E)}getMutationCache(){return o(this,kt)}getDefaultOptions(){return o(this,Mt)}setDefaultOptions(e){M(this,Mt,e)}setQueryDefaults(e,t){o(this,Zt).set(As(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...o(this,Zt).values()],s={};return t.forEach(a=>{Os(e,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(e,t){o(this,te).set(As(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...o(this,te).values()],s={};return t.forEach(a=>{Os(e,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...o(this,Mt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ys(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Gs&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...o(this,Mt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){o(this,E).clear(),o(this,kt).clear()}},E=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Zt=new WeakMap,te=new WeakMap,Dt=new WeakMap,ee=new WeakMap,se=new WeakMap,Fs);function Hn(e,t){L(t,!1);let s=P(t,"client",24,()=>new ta);js(()=>{s().mount()}),lr(s()),Va(()=>{s().unmount()}),me();var a=O(),r=x(a);Ls(r,t,"default",{},null),d(e,a),Q()}var jn=k('<div class="flex h-full w-full flex-col"><div class="flex-none"><!></div> <div class="relative min-h-0 flex-1"><!></div></div>');function ni(e,t){L(t,!0);const s=new ta({defaultOptions:{queries:{enabled:hr}}});js(()=>{{const{initSettings:a}=Ka();a()}}),br(e,{i18n:cr,children:(a,r)=>{Hn(a,{client:s,children:(l,n)=>{var u=jn(),f=T(u),v=T(f);Rn(v,{}),A(f);var p=F(f,2),c=T(p);H(c,()=>t.children),A(p),A(u),d(l,u)},$$slots:{default:!0}})},$$slots:{default:!0}}),Q()}export{ni as component,ri as universal};
