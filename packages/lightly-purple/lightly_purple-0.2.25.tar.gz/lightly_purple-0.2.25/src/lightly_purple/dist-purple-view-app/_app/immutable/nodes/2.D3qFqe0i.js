var Bt=r=>{throw TypeError(r)};var kt=(r,e,t)=>e.has(r)||Bt("Cannot "+t);var x=(r,e,t)=>(kt(r,e,"read from private field"),t?t.call(r):e.get(r)),Be=(r,e,t)=>e.has(r)?Bt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),it=(r,e,t,n)=>(kt(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Xe=(r,e,t)=>(kt(r,e,"access private method"),t);import{I as tt,s as at,Y as Pt,N as Je,l as pt,m as ea,Z as Lt,f as Kt,u as ca,_ as Tt,$ as Ct,a0 as Et,e as et,a1 as It,k as _t,a2 as At,g as qt,a3 as ua,C as va,L as fa,a4 as ga,b as pa,c as ha,a5 as Gt,a as Ht,a6 as _a,a7 as Rt,a8 as ma,a9 as $a,aa as xa,ab as ba,ac as ya,ad as wa,ae as Sa,d as ka,af as Pa}from"../chunks/OyE1vH6U.js";import{r as vt,c as Ye,a as Ta}from"../chunks/CRLA7a-5.js";import{p as ue,a as ve,f as y,e as rt,H as Ft,g as a,k as I,s as u,c as v,n as ee,d as C,r as d,a8 as Mt,t as W,i as Fe,aF as Jt,l as Re,m as Ca,w as lt,aG as Ea,A as ta,aD as aa,aE as Ot,j as Ia}from"../chunks/Db_QKtB5.js";import{r as Aa}from"../chunks/B90CZVMX.js";import{c as L,a as o,t as P,s as j,b as we}from"../chunks/CCHOD-L1.js";import{s as st,r as Ze,d as Y,c as nt,i as Ae,e as q,a as me,p as ct,b as Vt}from"../chunks/BkOFT6Jj.js";import{p as xt}from"../chunks/B-SrZW14.js";import{g as mt,u as Fa,a as Ma}from"../chunks/BK6Q2Dkz.js";import{S as jt,a as wt,f as dt,A as Oa,T as Na}from"../chunks/Mvxe7S3b.js";import{i as La,p as za}from"../chunks/B48UUeh1.js";import{u as Da,F as Nt,S as Ka,a as qa,s as ja,h as Qt,g as Ba,n as ra,b as Ga}from"../chunks/Cn9iUqyr.js";import{C as sa}from"../chunks/DrHL3fc3.js";function na(r,e){ue(e,!0);let t=Ze(e,["$$slots","$$events","$$legacy"]);tt(r,st({name:"image"},()=>t,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(s,i)=>{var l=L(),f=y(l);at(f,()=>e.children??rt),o(s,l)},$$slots:{default:!0}})),ve()}function Ha(r,e){ue(e,!0);let t=Ze(e,["$$slots","$$events","$$legacy"]);tt(r,st({name:"component"},()=>t,{iconNode:[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}]],children:(s,i)=>{var l=L(),f=y(l);at(f,()=>e.children??rt),o(s,l)},$$slots:{default:!0}})),ve()}var Ra=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Ja=["difference","intersection","symmetricDifference","union"],Ut=!1,ut,ze,Qe,bt,oa;const yt=class yt extends Set{constructor(t){super();Be(this,bt);Be(this,ut,new Map);Be(this,ze,Ft(0));Be(this,Qe,Ft(0));if(t){for(var n of t)super.add(n);x(this,Qe).v=super.size}Ut||Xe(this,bt,oa).call(this)}has(t){var n=super.has(t),s=x(this,ut),i=s.get(t);if(i===void 0){if(!n)return a(x(this,ze)),!1;i=Ft(!0),s.set(t,i)}return a(i),n}add(t){return super.has(t)||(super.add(t),I(x(this,Qe),super.size),Pt(x(this,ze))),this}delete(t){var n=super.delete(t),s=x(this,ut),i=s.get(t);return i!==void 0&&(s.delete(t),I(i,!1)),n&&(I(x(this,Qe),super.size),Pt(x(this,ze))),n}clear(){if(super.size!==0){super.clear();var t=x(this,ut);for(var n of t.values())I(n,!1);t.clear(),I(x(this,Qe),0),Pt(x(this,ze))}}keys(){return this.values()}values(){return a(x(this,ze)),super.values()}entries(){return a(x(this,ze)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return a(x(this,Qe))}};ut=new WeakMap,ze=new WeakMap,Qe=new WeakMap,bt=new WeakSet,oa=function(){Ut=!0;var t=yt.prototype,n=Set.prototype;for(const s of Ra)t[s]=function(...i){return a(x(this,ze)),n[s].apply(this,i)};for(const s of Ja)t[s]=function(...i){a(x(this,ze));var l=n[s].apply(this,i);return new yt(l)}};let zt=yt;var Va=P("<!> Samples",1),Qa=P("<!> Annotations",1),Ua=P('<div class="mb-5 mt-2 text-lg font-semibold">Collections</div> <!> <div class="flex space-x-2"><!> <!></div>',1);function Wa(r,e){ue(e,!0);var t=Ua(),n=u(y(t),2);jt(n,{class:"mb-4 bg-border-hard"});var s=u(n,2),i=v(s);const l=C(()=>pt("flex-1","px-2",e.gridType=="samples"&&"inline-flex rounded-md bg-muted")),f=C(()=>vt.toSamples(e.datasetId));Je(i,{variant:"ghost",get class(){return a(l)},get href(){return a(f)},"data-sveltekit-noscroll":!0,children:(p,M)=>{var h=Va(),w=y(h);na(w,{class:"size-4"}),ee(),o(p,h)},$$slots:{default:!0}});var k=u(i,2);const m=C(()=>pt("flex-1","px-2",e.gridType=="annotations"&&"inline-flex rounded-md bg-muted")),b=C(()=>vt.toAnnotations(e.datasetId));Je(k,{get class(){return a(m)},variant:"ghost",get href(){return a(b)},"data-sveltekit-noscroll":!0,children:(p,M)=>{var h=Qa(),w=y(h);Ha(w,{class:"size-4"}),ee(),o(p,h)},$$slots:{default:!0}}),d(s),o(r,t),ve()}var Ya=P('<div class="space-y-4"><div class="space-y-1"><h2 class="text-md">Width Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div> <div class="space-y-1"><h2 class="text-md">Height Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div></div>');function Za(r,e){ue(e,!1);const[t,n]=nt(),s=()=>Y(f,"$values",t),i=()=>Y(l,"$bounds",t),{dimensionsBounds:l,dimensionsValues:f,updateDimensionsValues:k}=ea(),m=p=>{k({min_width:p[0],max_width:p[1],min_height:s().min_height,max_height:s().max_height})},b=p=>{k({min_width:s().min_width,max_width:s().max_width,min_height:p[0],max_height:p[1]})};La(),wt(r,{title:"Metadata",children:(p,M)=>{var h=Ya(),w=v(h),c=u(v(w),2),g=v(c),_=v(g);d(g);var A=u(g,2),R=v(A);d(A),d(c);var F=u(c,2),B=v(F);const te=Mt(()=>[s().min_width,s().max_width]);Lt(B,{type:"multiple",class:"filter-width",get min(){return i().min_width},get max(){return i().max_width},get value(){return a(te)},onValueChange:m}),d(F),d(w);var Se=u(w,2),$e=u(v(Se),2),T=v($e),fe=v(T);d(T);var ge=u(T,2),De=v(ge);d(ge),d($e);var Ke=u($e,2),qe=v(Ke);const ke=Mt(()=>[s().min_height,s().max_height]);Lt(qe,{type:"multiple",class:"filter-height",get min(){return i().min_height},get max(){return i().max_height},get value(){return a(ke)},onValueChange:b}),d(Ke),d(Se),d(h),W((Z,oe,ie,pe)=>{j(_,`${Z??""}px`),j(R,`${oe??""}px`),j(fe,`${ie??""}px`),j(De,`${pe??""}px`)},[()=>dt(s().min_width),()=>dt(s().max_width),()=>dt(s().min_height),()=>dt(s().max_height)],Mt),o(p,h)},$$slots:{default:!0}}),ve(),n()}function Xa(r,e){ue(e,!0);let t=Ze(e,["$$slots","$$events","$$legacy"]);tt(r,st({name:"eraser"},()=>t,{iconNode:[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}],["path",{d:"M22 21H7"}],["path",{d:"m5 11 9 9"}]],children:(s,i)=>{var l=L(),f=y(l);at(f,()=>e.children??rt),o(s,l)},$$slots:{default:!0}})),ve()}function er(r,e){ue(e,!0);let t=Ze(e,["$$slots","$$events","$$legacy"]);tt(r,st({name:"grid-3x3"},()=>t,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]],children:(s,i)=>{var l=L(),f=y(l);at(f,()=>e.children??rt),o(s,l)},$$slots:{default:!0}})),ve()}function tr(r,e){ue(e,!0);let t=Ze(e,["$$slots","$$events","$$legacy"]);tt(r,st({name:"plus"},()=>t,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(s,i)=>{var l=L(),f=y(l);at(f,()=>e.children??rt),o(s,l)},$$slots:{default:!0}})),ve()}function ar(r,e){ue(e,!0);let t=Ze(e,["$$slots","$$events","$$legacy"]);tt(r,st({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(s,i)=>{var l=L(),f=y(l);at(f,()=>e.children??rt),o(s,l)},$$slots:{default:!0}})),ve()}function rr(r,e){ue(e,!0);let t=Ze(e,["$$slots","$$events","$$legacy"]);tt(r,st({name:"sliders-horizontal"},()=>t,{iconNode:[["line",{x1:"21",x2:"14",y1:"4",y2:"4"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22"}]],children:(s,i)=>{var l=L(),f=y(l);at(f,()=>e.children??rt),o(s,l)},$$slots:{default:!0}})),ve()}const sr=async r=>{const e={data:{},error:void 0};try{const t=await Ye.POST("/api/metrics/compute/detection/map",{body:r});if(t.error)throw new Error(JSON.stringify(t.error,null,2));if(!t.data)throw new Error("No data returned from metrics calculation");e.data=t.data}catch(t){e.error="Error computing metrics: "+String(t)}return e};var nr=P("<!> <!>",1),or=P("<!> <!>",1),ir=P("<!> <!>",1),lr=P("<!> <!>",1),dr=P('<div class="rounded-md bg-destructive/15 p-3 text-sm text-destructive"> </div>'),cr=P('<span class="mr-2 animate-spin">‚ü≥</span>'),ur=P("<!> Compute",1),vr=P('<div class="space-y-6"><!> <!> <!> <!> <div class="flex space-x-2"><!> <!></div></div>'),fr=P('<div class="flex justify-between"><span class="truncate"> </span> <span class="font-medium"> </span></div>'),gr=P('<div class="rounded-lg bg-muted p-4"><h4 class="text-md mb-2 font-medium">mAP by Class</h4> <div class="max-h-60 space-y-1 overflow-y-auto text-sm"></div></div>'),pr=P('<div class="space-y-4"><div class="rounded-lg bg-muted p-4"><h4 class="text-md mb-2 font-medium">mAP Results</h4> <div class="space-y-2 text-sm"><div class="flex justify-between"><span>mAP:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span>mAP@50:</span> <span class="font-medium"> </span></div> <div class="flex justify-between"><span>mAP@75:</span> <span class="font-medium"> </span></div></div></div> <!> <!></div>'),hr=P('<div class="flex w-80 flex-col rounded-[1vw] bg-card p-4"><div class="mb-5 mt-2 text-lg font-semibold">Metrics</div> <!> <div class="flex-1 space-y-6"><!></div></div>'),_r=P('<div class="hidden"></div>');function mr(r,e){ue(e,!0);const[t,n]=nt(),s=()=>Y(M,"$isMetricsPanelOpen",t),i=()=>Y(p,"$hasEnoughTasksForMetrics",t),l=()=>Y(b,"$annotationTasks",t),f=()=>Y(m,"$tags",t);let k=za.params.dataset_id;const{tags:m}=Kt({dataset_id:k}),{annotationTasks:b,hasEnoughTasksForMetrics:p}=ca(),{isMetricsPanelOpen:M}=Da();let h=Fe(""),w=Fe(""),c=Fe(""),g=Fe(null),_=Fe(!1),A=Fe("");async function R(){if(!a(h)||!a(w)){I(A,"Please select both ground truth and prediction tasks");return}I(_,!0),I(A,"");try{const T=await sr({dataset_id:k,ground_truth_task_id:a(h),prediction_task_id:a(w),tag_id:a(c)||null});T.error?I(A,me(T.error)):I(g,me(T.data))}catch(T){I(A,me(String(T)))}finally{I(_,!1)}}function F(){I(h,""),I(w,""),I(c,""),I(g,null),I(A,"")}var B=L(),te=y(B);{var Se=T=>{var fe=hr(),ge=u(v(fe),2);jt(ge,{class:"mb-4 bg-border-hard"});var De=u(ge,2),Ke=v(De);{var qe=Z=>{var oe=vr(),ie=v(oe);Nt(ie,{label:"Ground Truth Task",children:(E,G)=>{var O=L(),Oe=y(O);q(Oe,()=>At,(Ne,J)=>{J(Ne,{type:"single",name:"groundTruthTaskId",get value(){return a(h)},set value(H){I(h,me(H))},children:(H,Ie)=>{var le=nr(),ae=y(le);q(ae,()=>Tt,(re,se)=>{se(re,{class:"w-full",children:(V,je)=>{ee();var K=we();W(N=>j(K,N),[()=>{var N;return((N=l().find(he=>he.annotation_task_id===a(h)))==null?void 0:N.name)||"Select ground truth task"}]),o(V,K)},$$slots:{default:!0}})});var Ge=u(ae,2);q(Ge,()=>Ct,(re,se)=>{se(re,{children:(V,je)=>{var K=L(),N=y(K);q(N,()=>Et,(he,z)=>{z(he,{children:(X,Pe)=>{var de=L(),ne=y(de);et(ne,1,()=>l().filter(ce=>!ce.is_prediction),_t,(ce,Q)=>{var U=L(),be=y(U);{var Le=_e=>{var Te=L(),ft=y(Te);q(ft,()=>It,(ht,ot)=>{ot(ht,{get value(){return a(Q).annotation_task_id},get label(){return a(Q).name},children:(St,da)=>{ee();var gt=we();W(()=>j(gt,a(Q).name)),o(St,gt)},$$slots:{default:!0}})}),o(_e,Te)};Ae(be,_e=>{a(Q).annotation_task_id&&_e(Le)})}o(ce,U)}),o(X,de)},$$slots:{default:!0}})}),o(V,K)},$$slots:{default:!0}})}),o(H,le)},$$slots:{default:!0}})}),o(E,O)}});var pe=u(ie,2);Nt(pe,{label:"Prediction Task",children:(E,G)=>{var O=L(),Oe=y(O);q(Oe,()=>At,(Ne,J)=>{J(Ne,{type:"single",name:"predictionTaskId",get value(){return a(w)},set value(H){I(w,me(H))},children:(H,Ie)=>{var le=or(),ae=y(le);q(ae,()=>Tt,(re,se)=>{se(re,{class:"w-full",children:(V,je)=>{ee();var K=we();W(N=>j(K,N),[()=>{var N;return((N=l().find(he=>he.annotation_task_id===a(w)))==null?void 0:N.name)||"Select prediction task"}]),o(V,K)},$$slots:{default:!0}})});var Ge=u(ae,2);q(Ge,()=>Ct,(re,se)=>{se(re,{children:(V,je)=>{var K=L(),N=y(K);q(N,()=>Et,(he,z)=>{z(he,{children:(X,Pe)=>{var de=L(),ne=y(de);et(ne,1,()=>l().filter(ce=>ce.is_prediction),_t,(ce,Q)=>{var U=L(),be=y(U);{var Le=_e=>{var Te=L(),ft=y(Te);q(ft,()=>It,(ht,ot)=>{ot(ht,{get value(){return a(Q).annotation_task_id},get label(){return a(Q).name},children:(St,da)=>{ee();var gt=we();W(()=>j(gt,a(Q).name)),o(St,gt)},$$slots:{default:!0}})}),o(_e,Te)};Ae(be,_e=>{a(Q).annotation_task_id&&_e(Le)})}o(ce,U)}),o(X,de)},$$slots:{default:!0}})}),o(V,K)},$$slots:{default:!0}})}),o(H,le)},$$slots:{default:!0}})}),o(E,O)}});var xe=u(pe,2);Nt(xe,{label:"Tag (Optional)",children:(E,G)=>{var O=L(),Oe=y(O);q(Oe,()=>At,(Ne,J)=>{J(Ne,{type:"single",name:"tagId",get value(){return a(c)},set value(H){I(c,me(H))},children:(H,Ie)=>{var le=lr(),ae=y(le);q(ae,()=>Tt,(re,se)=>{se(re,{class:"w-full",children:(V,je)=>{ee();var K=we();W(N=>j(K,N),[()=>{var N;return((N=f().find(he=>he.tag_id===a(c)))==null?void 0:N.name)||"Select tag (optional)"}]),o(V,K)},$$slots:{default:!0}})});var Ge=u(ae,2);q(Ge,()=>Ct,(re,se)=>{se(re,{children:(V,je)=>{var K=L(),N=y(K);q(N,()=>Et,(he,z)=>{z(he,{children:(X,Pe)=>{var de=ir(),ne=y(de);q(ne,()=>Ka,(Q,U)=>{U(Q,{children:(be,Le)=>{ee();var _e=we("Sample tags");o(be,_e)},$$slots:{default:!0}})});var ce=u(ne,2);et(ce,1,()=>f().filter(Q=>Q.kind==="sample"),_t,(Q,U)=>{var be=L(),Le=y(be);q(Le,()=>It,(_e,Te)=>{Te(_e,{get value(){return a(U).tag_id},get label(){return a(U).name},children:(ft,ht)=>{ee();var ot=we();W(()=>j(ot,a(U).name)),o(ft,ot)},$$slots:{default:!0}})}),o(Q,be)}),o(X,de)},$$slots:{default:!0}})}),o(V,K)},$$slots:{default:!0}})}),o(H,le)},$$slots:{default:!0}})}),o(E,O)}});var Ce=u(xe,2);{var Me=E=>{var G=dr(),O=v(G,!0);d(G),W(()=>j(O,a(A))),o(E,G)};Ae(Ce,E=>{a(A)&&E(Me)})}var Ee=u(Ce,2),$=v(Ee);Je($,{variant:"outline",class:"flex-1",onclick:F,get disabled(){return a(_)},children:(E,G)=>{ee();var O=we("Reset");o(E,O)},$$slots:{default:!0}});var S=u($,2);const D=C(()=>!a(h)||!a(w)||a(_));Je(S,{variant:"default",class:"flex-1",onclick:R,get disabled(){return a(D)},children:(E,G)=>{var O=ur(),Oe=y(O);{var Ne=J=>{var H=cr();o(J,H)};Ae(Oe,J=>{a(_)&&J(Ne)})}ee(),o(E,O)},$$slots:{default:!0}}),d(Ee),d(oe),o(Z,oe)},ke=Z=>{var oe=pr(),ie=v(oe),pe=u(v(ie),2),xe=v(pe),Ce=u(v(xe),2),Me=v(Ce);d(Ce),d(xe);var Ee=u(xe,2),$=u(v(Ee),2),S=v($);d($),d(Ee);var D=u(Ee,2),E=u(v(D),2),G=v(E);d(E),d(D),d(pe),d(ie);var O=u(ie,2);{var Oe=J=>{var H=gr(),Ie=u(v(H),2);et(Ie,21,()=>Object.entries(a(g).map_per_class).sort(([le],[ae])=>le<ae?-1:le>ae?1:0),_t,(le,ae)=>{let Ge=()=>a(ae)[0],re=()=>a(ae)[1];var se=fr(),V=v(se),je=v(V);d(V);var K=u(V,2),N=v(K);d(K),d(se),W(he=>{j(je,`${Ge()??""}:`),j(N,`${he??""}%`)},[()=>(re()*100).toFixed(2)]),o(le,se)}),d(Ie),d(H),o(J,H)};Ae(O,J=>{a(g).map_per_class&&J(Oe)})}var Ne=u(O,2);Je(Ne,{variant:"outline",class:"mt-4 w-full",onclick:()=>I(g,null),children:(J,H)=>{ee();var Ie=we("Back to Form");o(J,Ie)},$$slots:{default:!0}}),d(oe),W((J,H,Ie)=>{j(Me,`${J??""}%`),j(S,`${H??""}%`),j(G,`${Ie??""}%`)},[()=>(a(g).map*100).toFixed(2),()=>(a(g).map_50*100).toFixed(2),()=>(a(g).map_75*100).toFixed(2)]),o(Z,oe)};Ae(Ke,Z=>{a(g)?Z(ke,!1):Z(qe)})}d(De),d(fe),o(T,fe)},$e=T=>{var fe=_r();o(T,fe)};Ae(te,T=>{s()&&i()?T(Se):T($e,!1)})}o(r,B),ve(),n()}var $r=P('<div class="w-300 flex space-x-4 text-diffuse-foreground"><!> <!> <!></div>');function xr(r,e){ue(e,!0);const[t,n]=nt(),s=()=>Y(f,"$sampleSize",t),i=ct(e,"min",3,100),l=ct(e,"max",3,1500),{sampleSize:f,updateSampleSize:k}=qt(),m=C(()=>s().width),b=ua.throttle(g=>{k(g[0])},100);var p=$r(),M=v(p);er(M,{class:"h-6 w-6"});var h=u(M,2);const w=C(()=>[a(m)]);Lt(h,{class:"w-full flex-1",get value(){return a(w)},get min(){return i()},get max(){return l()},step:1,onValueChange:b});var c=u(h,2);na(c,{class:"h-6 w-6"}),d(p),o(r,p),ve(),n()}var br=P('<div class="h-3 w-3 cursor-pointer rounded-sm border"></div>'),yr=P('<div class="color-picker-container"><!></div> <p class="flex-1 truncate text-base font-normal"> </p> <span class="text-sm text-diffuse-foreground"> </span>',1),wr=P('<div class="width-full flex items-center space-x-2"><!> <!></div>'),Sr=P('<div class="width-full space-y-2 overflow-hidden"></div>');function kr(r,e){ue(e,!0);const[t,n]=nt(),s=()=>Y(b,"$customLabelColorsStore",t),i=()=>Y(l(),"$annotationFilters",t);let l=ct(e,"annotationFilters",19,()=>[]);const{setCustomColor:f,getCustomColor:k,hasCustomColor:m,customLabelColorsStore:b}=Fa();function p(c,g,_){f(c,g,_)}function M(c){if(m(c)){const _=k(c);return(_==null?void 0:_.color)||"#ff0000"}const g=mt(c,1).color;try{const _=g.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(_){const A=parseInt(_[1]),R=parseInt(_[2]),F=parseInt(_[3]);return`#${((1<<24)+(A<<16)+(R<<8)+F).toString(16).slice(1)}`}}catch(_){console.error("Error converting rgba to hex",_)}return"#ff0000"}function h(c){if(m(c)){const g=k(c);return(g==null?void 0:g.alpha)||1}return .4}const w=C(()=>{const c=s(),g={};for(const _ of Object.keys(c)){const A=c[_];g[_]={borderColor:A.color,backgroundColor:mt(_,.4).color}}return g});wt(r,{title:"Labels",children:(c,g)=>{var _=Sr();et(_,5,i,({label_name:A,current_count:R,total_count:F,selected:B})=>A,(A,R)=>{let F=()=>a(R).label_name,B=()=>a(R).current_count,te=()=>a(R).total_count,Se=()=>a(R).selected;var $e=wr(),T=v($e);const fe=C(()=>`${F()}-label`);va(T,{get id(){return F()},get checked(){return Se()},get"aria-labelledby"(){return a(fe)},onCheckedChange:()=>e.onToggleAnnotationFilter(F())});var ge=u(T,2);const De=C(()=>`${F()}-label`);fa(ge,{get id(){return a(De)},get for(){return F()},class:"flex min-w-0 flex-1 cursor-pointer items-center space-x-2 text-nowrap peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(Ke,qe)=>{var ke=yr(),Z=y(ke),oe=v(Z);const ie=C(()=>M(F())),pe=C(()=>h(F()));ga(oe,{get initialColor(){return a(ie)},get initialAlpha(){return a(pe)},onChange:($,S)=>p(F(),$,S),children:($,S)=>{var D=br();W(E=>pa(D,E),[()=>{var E,G;return`
                                    border-color: ${((E=a(w)[F()])==null?void 0:E.borderColor)??mt(F()).color};
                                    background-color: ${((G=a(w)[F()])==null?void 0:G.backgroundColor)??mt(F(),Se()?1:.4).color};
                                `}]),o($,D)},$$slots:{default:!0}}),d(Z);var xe=u(Z,2),Ce=v(xe,!0);d(xe);var Me=u(xe,2),Ee=v(Me);d(Me),W(($,S)=>{j(Ce,F()),j(Ee,`${$??""} of ${S??""}`)},[()=>dt(B()),()=>dt(te())]),o(Ke,ke)},$$slots:{default:!0}}),d($e),W(()=>ha($e,"title",F())),o(A,$e)}),d(_),o(c,_)},$$slots:{default:!0}}),ve(),n()}const Pr=async({dataset_id:r,tag_id:e,annotationIdsBody:t})=>{const n={data:void 0,error:void 0};try{const s=await Ye.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/annotations",{params:{path:{dataset_id:r,tag_id:e}},body:t});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No data");n.data=s.data}catch(s){n.error="Error assigning annotationIds to a tag: "+String(s)}return n};var Ue,We,ye,He,Ve,$t,Dt,Xt,Tr=(Xt=class extends qa{constructor(e,t){super();Be(this,Ve);Be(this,Ue);Be(this,We);Be(this,ye);Be(this,He);it(this,Ue,e),this.setOptions(t),this.bindMethods(),Xe(this,Ve,$t).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const t=this.options;this.options=x(this,Ue).defaultMutationOptions(e),ja(this.options,t)||x(this,Ue).getMutationCache().notify({type:"observerOptionsUpdated",mutation:x(this,ye),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&Qt(t.mutationKey)!==Qt(this.options.mutationKey)?this.reset():((n=x(this,ye))==null?void 0:n.state.status)==="pending"&&x(this,ye).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=x(this,ye))==null||e.removeObserver(this)}onMutationUpdate(e){Xe(this,Ve,$t).call(this),Xe(this,Ve,Dt).call(this,e)}getCurrentResult(){return x(this,We)}reset(){var e;(e=x(this,ye))==null||e.removeObserver(this),it(this,ye,void 0),Xe(this,Ve,$t).call(this),Xe(this,Ve,Dt).call(this)}mutate(e,t){var n;return it(this,He,t),(n=x(this,ye))==null||n.removeObserver(this),it(this,ye,x(this,Ue).getMutationCache().build(x(this,Ue),this.options)),x(this,ye).addObserver(this),x(this,ye).execute(e)}},Ue=new WeakMap,We=new WeakMap,ye=new WeakMap,He=new WeakMap,Ve=new WeakSet,$t=function(){var t;const e=((t=x(this,ye))==null?void 0:t.state)??Ba();it(this,We,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Dt=function(e){ra.batch(()=>{var t,n,s,i,l,f,k,m;if(x(this,He)&&this.hasListeners()){const b=x(this,We).variables,p=x(this,We).context;(e==null?void 0:e.type)==="success"?((n=(t=x(this,He)).onSuccess)==null||n.call(t,e.data,b,p),(i=(s=x(this,He)).onSettled)==null||i.call(s,e.data,null,b,p)):(e==null?void 0:e.type)==="error"&&((f=(l=x(this,He)).onError)==null||f.call(l,e.error,b,p),(m=(k=x(this,He)).onSettled)==null||m.call(k,void 0,e.error,b,p))}this.listeners.forEach(b=>{b(x(this,We))})})},Xt);function ia(r){return Ga()}function Cr(r){return"subscribe"in r&&typeof r.subscribe=="function"}function Er(){}function Ir(r,e){const t=ia(),n=Cr(r)?r:Jt(r),s=new Tr(t,Re(n));let i;n.subscribe(k=>{i=(m,b)=>{s.mutate(m,b).catch(Er)},s.setOptions(k)});const l=Jt(s.getCurrentResult(),k=>s.subscribe(ra.batchCalls(m=>k(m)))),{subscribe:f}=Ca(l,k=>({...k,mutate:i,mutateAsync:k.mutate}));return{subscribe:f}}const Ar=r=>["/api/datasets/{dataset_id}/tags",r];var Fr=P("<input>"),Mr=P("<input>");function la(r,e){ue(e,!0);let t=ct(e,"ref",15,null),n=ct(e,"value",15),s=ct(e,"files",15),i=Ze(e,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var l=L(),f=y(l);{var k=b=>{var p=Fr();Gt(p);let M;Vt(p,h=>t(h),()=>t()),W(h=>M=Ht(p,M,{class:h,type:"file",...i}),[()=>pt("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),_a(p,s),Rt(p,n),o(b,p)},m=b=>{var p=Mr();Gt(p);let M;Vt(p,h=>t(h),()=>t()),W(h=>M=Ht(p,M,{class:h,type:e.type,...i}),[()=>pt("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),Rt(p,n),o(b,p)};Ae(f,b=>{e.type==="file"?b(k):b(m,!1)})}o(r,l),ve()}const Or=async({dataset_id:r,tag_id:e,sampleIdsBody:t})=>{const n={data:void 0,error:void 0};try{const s=await Ye.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/samples",{params:{path:{dataset_id:r,tag_id:e}},body:t});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No data");n.data=s.data}catch(s){n.error="Error assigning sampleIds to tag: "+String(s)}return n},Nr=async({dataset_id:r,tagInputBody:e})=>{const t={data:void 0,error:void 0};try{const n=await Ye.POST("/api/datasets/{dataset_id}/tags",{params:{path:{dataset_id:r}},body:e});if(n.error)throw new Error(JSON.stringify(n.error,null,2));if(!n.data)throw new Error("No data");t.data=n.data}catch(n){t.error="Error creating tag: "+String(n)}return t};var Lr=P("<!> Create new Tags",1),zr=P("<!> <!>",1),Dr=P('<div class="flex space-x-2 py-1"><!></div>'),Kr=P('<!> <!> <div class="grid gap-4"><!></div> <div><!> <!></div> <!>',1),qr=P('<div class="flex space-x-1"><!> <!></div> <!>',1);function jr(r,e){ue(e,!0);const[t,n]=nt(),s=()=>Y(h,"$selectedSampleIds",t),i=()=>Y(w,"$selectedSampleAnnotationCropIds",t),l=()=>Y(a(p),"$tags",t),f=()=>Y(a(A),"$itemsSelected",t),k=()=>Y(qe,"$submitTagAndMutate",t);let m=C(()=>e.gridType==="samples"?"sample":"annotation");const b=C(()=>Kt({dataset_id:e.datasetId,kind:[a(m)]})),p=C(()=>a(b).tags),M=C(()=>a(b).loadTags),{selectedSampleIds:h,selectedSampleAnnotationCropIds:w,clearSelectedSampleAnnotationCrops:c,clearSelectedSamples:g}=qt(),_=C(()=>e.gridType==="samples"?g:c),A=C(()=>e.gridType==="samples"?h:w);let R=Fe(!1);const F=C(()=>s().size>0&&e.gridType==="samples"||i().size>0&&e.gridType==="annotations");let B=Fe(""),te=Fe(me([])),Se=()=>{a(te).push(a(B)),T.add(a(B)),I(B,"")};const $e=C(()=>[...a(te).map($=>({tag_id:$,name:$,kind:a(m)})),...l()].filter($=>$.name.includes(a(B))));let T=me(new zt);const fe=$=>{T.has($)?(T.delete($),a(te).splice(a(te).indexOf($),1)):T.add($)};let ge=Fe(null);const De=async()=>{await Promise.all([...a(te)].map(async $=>{var D;const S=await Nr({dataset_id:e.datasetId,tagInputBody:{name:$,description:`${$} description`,kind:a(m)}});if(S.error)throw S.error;return(D=S.data)!=null&&D.tag_id&&(T.delete($),T.add(S.data.tag_id)),S})),await Promise.all([...T].map(async $=>{const S=a(m)==="sample"?await Or({dataset_id:e.datasetId,tag_id:$,sampleIdsBody:{sample_ids:[...f()]}}):await Pr({dataset_id:e.datasetId,tag_id:$,annotationIdsBody:{annotation_ids:[...f()]}});if(S.error)throw S.error;return S}))},Ke=ia(),qe=Ir({mutationFn:async()=>{await De()},onError:$=>{I(ge,me($))},onSuccess:()=>{Ke.invalidateQueries({queryKey:Ar({dataset_id:e.datasetId})}),a(M)(),a(_)(),ke(!1)}}),ke=$=>{I(R,me($)),I(ge,null),I(B,""),I(te,me([])),T.clear()},Z=C(()=>T.size>0||a(te).length>0);var oe=qr(),ie=y(oe),pe=v(ie);const xe=C(()=>!a(F));Je(pe,{variant:"outline",get disabled(){return a(xe)},class:"flex-1",onclick:()=>I(R,!0),children:($,S)=>{var D=Lr(),E=y(D);tr(E,{}),ee(),o($,D)},$$slots:{default:!0}});var Ce=u(pe,2);const Me=C(()=>!a(F));Je(Ce,{variant:"outline",get disabled(){return a(Me)},size:"icon",title:"Clear selection",get onclick(){return a(_)},children:($,S)=>{Xa($,{})},$$slots:{default:!0}}),d(ie);var Ee=u(ie,2);q(Ee,()=>wa,($,S)=>{S($,{onOpenChange:ke,get open(){return a(R)},children:(D,E)=>{var G=L(),O=y(G);q(O,()=>ma,(Oe,Ne)=>{Ne(Oe,{class:"sm:max-w-[425px]",children:(J,H)=>{var Ie=Kr(),le=y(Ie);q(le,()=>$a,(z,X)=>{X(z,{children:(Pe,de)=>{var ne=zr(),ce=y(ne);q(ce,()=>xa,(U,be)=>{be(U,{children:(Le,_e)=>{ee();var Te=we();W(()=>j(Te,`Add the selected ${a(m)??""} to a tag`)),o(Le,Te)},$$slots:{default:!0}})});var Q=u(ce,2);q(Q,()=>ba,(U,be)=>{be(U,{children:(Le,_e)=>{ee();var Te=we();W(()=>j(Te,`Add the selected ${f().size??""}
                ${a(m)??""} to an new or existing tag. Tags can later be exported.`)),o(Le,Te)},$$slots:{default:!0}})}),o(Pe,ne)},$$slots:{default:!0}})});var ae=u(le,2);{var Ge=z=>{Oa(z,{title:"Error occured",children:(X,Pe)=>{ee();var de=we();W(()=>j(de,a(ge))),o(X,de)}})};Ae(ae,z=>{a(ge)&&z(Ge)})}var re=u(ae,2),se=v(re);la(se,{type:"text",placeholder:"Create or search tags",autofocus:!0,get value(){return a(B)},set value(z){I(B,me(z))}}),d(re);var V=u(re,2),je=v(V);et(je,17,()=>a($e),z=>z.tag_id,(z,X)=>{var Pe=Dr(),de=v(Pe);const ne=C(()=>`tagCreateDialog-tag-${a(X).tag_id}`),ce=C(()=>T.has(a(X).tag_id));sa(de,{get name(){return a(ne)},get isChecked(){return a(ce)},get label(){return a(X).name},onCheckedChange:()=>fe(a(X).tag_id)}),d(Pe),o(z,Pe)});var K=u(je,2);{var N=z=>{const X=C(()=>pt("",...Sa({variant:"outline"})));Je(z,{type:"button",variant:"outline",get class(){return a(X)},onclick:Se,children:(Pe,de)=>{ee();var ne=we();W(()=>j(ne,`Create tag "${a(B)??""}"`)),o(Pe,ne)},$$slots:{default:!0}})};Ae(K,z=>{a(B)&&z(N)})}d(V);var he=u(V,2);q(he,()=>ya,(z,X)=>{X(z,{children:(Pe,de)=>{var ne=L(),ce=y(ne);{var Q=U=>{Je(U,{type:"submit",onclick:()=>k().mutate(),children:(be,Le)=>{ee();var _e=we("Save changes");o(be,_e)},$$slots:{default:!0}})};Ae(ce,U=>{a(Z)&&U(Q)})}o(Pe,ne)},$$slots:{default:!0}})}),o(J,Ie)},$$slots:{default:!0}})}),o(D,G)},$$slots:{default:!0}})}),o(r,oe),ve(),n()}var Br=P('<div class="flex items-center space-x-2 py-1"><!></div>'),Gr=P("<p>No tag, create a tag</p>"),Hr=P('<div class="mb-3 w-full space-y-2"></div>');function Rr(r,e){ue(e,!0);const[t,n]=nt(),s=()=>Y(a(f),"$tags",t),i=()=>Y(a(k),"$tagsSelected",t),l=C(()=>Kt({dataset_id:e.dataset_id,kind:[e.gridType==="annotations"?"annotation":"sample"]})),f=C(()=>a(l).tags),k=C(()=>a(l).tagsSelected),m=C(()=>a(l).tagSelectionToggle);wt(r,{title:"Tags",icon:Na,children:(b,p)=>{var M=Hr();et(M,5,s,h=>h.tag_id,(h,w)=>{var c=Br(),g=v(c);const _=C(()=>i().has(a(w).tag_id));sa(g,{get name(){return a(w).tag_id},get isChecked(){return a(_)},get label(){return a(w).name},onCheckedChange:()=>a(m)(a(w).tag_id)}),d(c),o(h,c)},h=>{var w=Gr();o(h,w)}),d(M),o(b,M)}}),ve(),n()}const Wt=async({dataset_id:r,filtered_labels:e,dimensions:t})=>{const n={data:[],error:void 0};try{const s=await Ye.GET("/api/annotations/count",{params:{query:{dataset_id:r,...e&&{filtered_labels:e},...(t==null?void 0:t.min_width)&&{min_width:t.min_width},...(t==null?void 0:t.max_width)&&{max_width:t.max_width},...(t==null?void 0:t.min_height)&&{min_height:t.min_height},...(t==null?void 0:t.max_height)&&{max_height:t.max_height}}}});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No annotation counts found");n.data=s.data.map(i=>({label_name:i.label_name,total_count:i.total_count,current_count:i.current_count}))}catch(s){n.error="Error loading annotation counts: "+String(s)}return n},Jr=async()=>{const r={data:[],error:void 0};try{const e=await Ye.GET("/api/annotation_labels");e.data&&(r.data=e.data)}catch(e){r.error="Error loading annotation labels: "+String(e)}return r},Yt=(r,e)=>r.map(t=>({...t,selected:e.includes(t.label_name)})),Zt=r=>e=>e.includes(r)?e.filter(t=>t!==r):[...e,r],Vr=async({params:{dataset_id:r}})=>{const{data:e,error:t}=await Ta(r);if(t||!e)throw Aa(307,vt.toHome());const{selectedAnnotationFilterIds:n,sampleSize:s}=qt(),{dimensionsValues:i}=ea(r),l=Array.from(Re(n)),f=lt([]),k=lt(l),m=lt([]),b=lt(void 0),p=c=>{b.set(c)},[M]=await Promise.all([Jr().then(c=>{const g=c.data.reduce((A,R)=>({...A,[R.annotation_label_name]:R.annotation_label_id}),{}),_=Object.entries(g).filter(([,A])=>l.includes(A)).map(([A])=>A);return f.set(_),g}),Wt({dataset_id:r}).then(({data:c})=>{if(c){const g=Re(f);m.set(Yt(c,g))}})]),h=async()=>{try{const c=Re(f),{data:g}=await Wt({dataset_id:r,filtered_labels:c.length>0?c:void 0,dimensions:Re(i)});g&&m.update(()=>Yt(g||[],c))}catch(c){b.set(`Failed to load annotations: ${String(c)}`)}};return i.subscribe(()=>{h()}),{datasetId:r,annotationFilters:m,toggleAnnotationFilterSelection:c=>{f.update(Zt(c));const g=M[c];n.update(_=>(_.has(g)?_.delete(g):_.add(g),_)),k.update(Zt(g)),h()},annotationFilterLabels:M,selectedAnnotationFilter:f,selectedAnnotationFilterIds:k,error:Re(b),setError:p,sampleSize:s}},gs=Object.freeze(Object.defineProperty({__proto__:null,load:Vr},Symbol.toStringTag,{value:"Module"})),Qr=()=>{const r=lt([]),e=lt(null);return Ye.GET("/api/features").then(t=>{t.data&&r.set(t.data)}).catch(t=>{e.set(t)}),{error:e,featureFlags:Ea(r)}},Ur=r=>{const{getKeyboardShortcuts:e}=ka(),t=new Set,n=i=>{if(i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement||i.target instanceof HTMLSelectElement)return;t.add(i.key);const l=Re(xt).url.pathname,f={hideAnnotations:e.hide_annotations||"v",goBack:e.go_back||"Escape"};Object.entries(r).forEach(([k,m])=>{const b=f[k]||m.key;if(i.key===b){if(m.requiredPath){if(typeof m.requiredPath=="function"){if(!m.requiredPath(l))return}else if(!m.requiredPath.test(l))return}m.action(i)}})},s=i=>{t.delete(i.key)};return ta(()=>{window.addEventListener("keydown",n),window.addEventListener("keyup",s)}),aa(()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",s)}),{isKeyPressed:i=>t.has(i)}},Wr={goBack:{key:"Escape",description:"Go back from detail view to grid view",isConfigurable:!0,requiredPath:r=>/\/datasets\/[^/]+\/(samples|annotations)\/[^/]+/.test(r)||/\/samples\/[^/]+/.test(r),action:()=>{const r=Re(xt).url.pathname,e=Re(xt).params.dataset_id;if(/\/samples\/[^/]+/.test(r)&&!e){Ot("/");return}e&&(r.includes("/samples/")?Ot(vt.toSamples(e)):r.includes("/annotations/")&&Ot(vt.toAnnotations(e)))}}},Yr=async({query_text:r="",model_id:e=""})=>{const t={data:[],error:void 0};try{const n=await Ye.GET("/api/text_embedding/embed_text",{params:{query:{query_text:r,model_id:e}}});if(n.error)throw new Error(JSON.stringify(n.error,null,2));if(!n.data)throw new Error("No data");t.data=n.data}catch(n){t.error="Error creating text embedding: "+String(n)}return t};var Zr=P('<div class="space-y-2"><!> <!></div>'),Xr=P('<div class="relative"><!> <!></div>'),es=P('<div class="flex h-full w-full space-x-4 px-4 pb-4"><div class="flex w-80 flex-col space-y-6 rounded-[1vw] bg-card py-4"><div class="px-4"><!></div> <div class="min-h-0 flex-1 space-y-2 overflow-y-auto px-4 dark:[color-scheme:dark]"><div><!> <!></div> <!></div></div> <div class="flex1 flex flex-grow flex-col space-y-4 rounded-[1vw] bg-card p-4"><div class="my-2 flex items-center space-x-4"><div class="flex-1"><!></div> <div class="w-4/12"><!></div></div> <!> <div class="flex min-h-0 flex-1"><!></div></div> <!></div>');function ps(r,e){ue(e,!0);const[t,n]=nt(),s=()=>Y(xt,"$page",t),i=()=>Y(M,"$textEmbedding",t),l=()=>Y(R,"$featureFlags",t);let f=s().params.dataset_id;const{annotationFilters:k,toggleAnnotationFilterSelection:m,setError:b,globalStorage:{setTextEmbedding:p,textEmbedding:M,setLastGridType:h}}=e.data,{handleKeyEvent:w}=Ma();ta(()=>{window.addEventListener("keydown",w),window.addEventListener("keyup",w)}),aa(()=>{window.removeEventListener("keydown",w),window.removeEventListener("keyup",w)}),Ur({goBack:Wr.goBack});let c=Fe("samples");Ia(()=>{I(c,me(s().url.pathname===vt.toAnnotations(f)?"annotations":"samples")),h(a(c))});let g=Fe(me(i()?i().queryText:""));async function _(){if(a(g).trim()!=="")try{return(await Yr({query_text:a(g),model_id:void 0})).data}catch(S){b(S.message),console.error("Error during API call:",S)}}async function A(S){if(S.key==="Enter"){const D=await _();p({queryText:a(g),embedding:D})}}const{featureFlags:R}=Qr(),F=C(()=>l().some(S=>S==="embeddingSearchEnabled"));var B=es(),te=v(B),Se=v(te),$e=v(Se);Wa($e,{datasetId:f,get gridType(){return a(c)}}),d(Se);var T=u(Se,2),fe=v(T),ge=v(fe);Rr(ge,{dataset_id:f,get gridType(){return a(c)}});var De=u(ge,2);jr(De,{datasetId:f,get gridType(){return a(c)}}),d(fe);var Ke=u(fe,2);wt(Ke,{title:"Filters",icon:rr,children:(S,D)=>{var E=Zr(),G=v(E);kr(G,{annotationFilters:k,onToggleAnnotationFilter:m});var O=u(G,2);Za(O,{}),d(E),o(S,E)}}),d(T),d(te);var qe=u(te,2),ke=v(qe),Z=v(ke),oe=v(Z);{var ie=S=>{var D=Xr(),E=v(D);ar(E,{class:"absolute left-2 top-[50%] h-4 w-4 translate-y-[-50%] text-muted-foreground"});var G=u(E,2);la(G,{placeholder:"Search",class:"pl-8",onkeydown:A,get value(){return a(g)},set value(O){I(g,me(O))}}),d(D),o(S,D)};Ae(oe,S=>{a(c)==="samples"&&a(F)&&S(ie)})}d(Z);var pe=u(Z,2),xe=v(pe);xr(xe,{}),d(pe),d(ke);var Ce=u(ke,2);jt(Ce,{class:"mb-4 bg-border-hard"});var Me=u(Ce,2),Ee=v(Me);Pa(Ee,e,"default",{},null),d(Me),d(qe);var $=u(qe,2);mr($,{}),d(B),o(r,B),ve(),n()}export{ps as component,gs as universal};
