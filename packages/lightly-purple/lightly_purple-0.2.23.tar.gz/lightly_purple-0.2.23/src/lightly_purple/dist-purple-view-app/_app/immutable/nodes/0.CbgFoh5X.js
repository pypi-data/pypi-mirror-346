var ua=Object.defineProperty;var ys=e=>{throw TypeError(e)};var ca=(e,t,s)=>t in e?ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var it=(e,t,s)=>ca(e,typeof t!="symbol"?t+"":t,s),Je=(e,t,s)=>t.has(e)||ys("Cannot "+s);var o=(e,t,s)=>(Je(e,t,"read from private field"),s?s.call(e):t.get(e)),S=(e,t,s)=>t.has(e)?ys("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),M=(e,t,s,a)=>(Je(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),Z=(e,t,s)=>(Je(e,t,"access private method"),s);var Se=(e,t,s,a)=>({set _(r){M(e,t,r,s)},get _(){return o(e,t,a)}});import{e as Ze,k as ts,c as he,a6 as da,a7 as ha,a8 as fa,a9 as bs,a5 as Ls,g as Qs,aa as es,ab as is,ac as os,ad as ss,o as B,ae as va,af as ga,ag as pa,q as ma,m as Fe,r as qs,A as ls,D as ya,x as Us,v as ba,E as _a,ah as xa,ai as Pa,aj as wa,ak as _s,n as Le,z as Sa,s as H,a as ae,p as Qe,h as Ks,l as Bt,I as qe,Z as $a,al as Ta,J as Ae,am as Ca,F as Ns,an as Aa,f as Oa,H as ka,j as Ma,b as Da,ao as Ia,u as Ea,d as Ra}from"../chunks/BQEJVgPf.js";import{c as O,a as d,t as k,d as Fa,b as St,s as mt,e as ce}from"../chunks/CYqQTk2G.js";import{aG as La,p as F,ah as Bs,aH as ot,v as z,aI as Gt,j as i,k as qt,aJ as Hs,f as _,a as L,t as N,aK as Qa,x as qa,l as $,q as Ut,e as Ua,c as C,n as yt,r as A,A as et,s as Q,w as Ye,a8 as Te,y as js,aD as Ka}from"../chunks/Cj1lW-Gn.js";import{c as zs}from"../chunks/BBLiiV7J.js";import{i as me}from"../chunks/DvURYSWS.js";import{d as pt,p as w,i as dt,c as Ue,a as de,r as W,e as I,s as It,b as us}from"../chunks/ljGkMZWX.js";import{p as Na}from"../chunks/OoM2i83e.js";import{D as Ba,d as Ha,F as xs,R as ja,S as za,a as Ga,G as Va,c as Ps,b as ws,u as Wa,i as Ja,r as Ya,j as lt,k as Xa,l as Gs,t as Za,m as tr,n as V,o as Vs,p as Xe,q as er,e as Ws,v as Js,w as Ss,M as sr,x as $s,y as ar,z as rr,A as nr,B as Ts,C as Cs,E as ir,h as As,H as Os,I as or}from"../chunks/D3o6BS6S.js";import{a as lr}from"../chunks/IZXhtOqv.js";import{n as Ys,p as as,s as rs,i as ur}from"../chunks/Dg7m9X23.js";import{p as ns}from"../chunks/342KIpWk.js";const cr=!0,dr=cr,hr=La;function fr(e,t){return e.protocol!==t.protocol?t.href:t.password||t.username?"//"+[t.username,t.password].filter(Boolean).join(":")+"@"+t.host+t.pathname+t.search+t.hash:e.host!==t.host?"//"+t.host+t.pathname+t.search+t.hash:t.pathname+t.search+t.hash}function vr(e,t,s){const a=new URL(s,t).pathname;return e.origin!==t.origin||!e.pathname.startsWith(a)}var gr=k('<link rel="alternate">');function pr(e,t){F(t,!1);const[s,a]=Ue(),r=()=>pt(ns,"$page",s),l=Gt(),n=Gt(),u=Gt(),f=Ys(Bs,new URL(r().url))||"/";let v=w(t,"availableLanguageTags",8),p=w(t,"strategy",8),c=w(t,"currentLang",8);const h=(m,y)=>{const b=[];for(const T of v()){const D=y.getLocalisedPath(m,T),E=rs(D,f,void 0),q=new URL(E,new URL(r().url)).href;b.push(q)}return b};ot(()=>r(),()=>{z(l,as(r().url.pathname,f)[0])}),ot(()=>(qt(p()),i(l),qt(c())),()=>{z(n,p().getCanonicalPath(i(l),c()))}),ot(()=>(i(n),qt(p())),()=>{z(u,h(i(n),p()))}),Hs(),me();var g=O(),x=_(g);{var P=m=>{var y=O(),b=_(y);Ze(b,1,()=>i(u),ts,(T,D,E)=>{var q=gr();N(()=>{he(q,"hreflang",v()[E]),he(q,"href",i(D))}),d(T,q)}),d(m,y)};dt(x,m=>{v().length>=1&&m(P)})}d(e,g),L(),a()}const mr=(e,t)=>`${da}=${e};Path=${t};SameSite=lax;Max-Age=31557600`;function yr(e,t){F(t,!1);const[s,a]=Ue(),r=()=>pt(ns,"$page",s),l=Gt(),n=Gt(),u=Ys(Bs,new URL(r().url))||"/";let f=w(t,"languageTag",24,()=>{}),v=w(t,"i18n",8),p=Gt(0);function c(x,P){try{const m=new URL(qa(ns).url),[y,b]=as(m.pathname,u),T=v().strategy.getCanonicalPath(y,i(l)),D=new URL(m);D.pathname=rs(T,u,b);const E=new URL(x,new URL(D));if(vr(E,m,u)||v().config.exclude(E.pathname))return x;const q=P??i(l),[bt,Tt]=as(E.pathname,u),_t=v().strategy.getLocalisedPath(bt,q),Et=new URL(E);return Et.pathname=rs(_t,u,Tt),fr(m,Et)}catch{return x}}ha({translateHref:c}),ot(()=>(qt(f()),qt(v()),r()),()=>{z(l,f()??v().getLanguageFromUrl(r().url))}),ot(()=>(qt(v()),i(l)),()=>{v().config.runtime.setLanguageTag(i(l))}),ot(()=>i(l),()=>{document.documentElement.lang=i(l)}),ot(()=>(qt(v()),i(l)),()=>{document.documentElement.dir=v().config.textDirection[i(l)]??"ltr"}),ot(()=>(i(l),i(p)),()=>{i(l)&&z(p,i(p)+1)}),ot(()=>(i(l),i(p),bs),()=>{i(l)&&(i(p)>1||hr)&&Qa(bs)}),ot(()=>i(l),()=>{z(n,i(l))}),ot(()=>i(l),()=>{document.cookie=mr(i(l),u)}),Hs(),me();var h=O();Fa(x=>{var P=O(),m=_(P);{var y=b=>{pr(b,{get availableLanguageTags(){return v().config.runtime.availableLanguageTags},get strategy(){return v().strategy},get currentLang(){return i(l)}})};dt(m,b=>{v().config.seo.noAlternateLinks!==!0&&!v().config.exclude(r().url.pathname)&&b(y)})}d(x,P)});var g=_(h);fa(g,()=>i(n),x=>{var P=O(),m=_(P);Ls(m,t,"default",{},null),d(x,P)}),d(e,h),L(),a()}const br=Qs(),_r=async()=>({globalStorage:br}),ri=Object.freeze(Object.defineProperty({__proto__:null,load:_r},Symbol.toStringTag,{value:"Module"})),xr=(e,t)=>{const s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.setAttribute("download",e),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(s)};function Pr(e){return window.getComputedStyle(e).getPropertyValue("direction")}function wr(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?os:is,vertical:ss}[t]}function Sr(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?is:os,vertical:es}[t]}function $r(e="ltr",t="horizontal"){return["ltr","rtl"].includes(e)||(e="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:wr(e,t),prevKey:Sr(e,t)}}function Tr(e){const t=B(null);function s(){if(!ga)return[];const n=document.getElementById(e.rootNodeId.current);return n?e.candidateSelector?Array.from(n.querySelectorAll(e.candidateSelector)):Array.from(n.querySelectorAll(`[${e.candidateAttr}]:not([data-disabled])`)):[]}function a(){var u;const n=s();n.length&&((u=n[0])==null||u.focus())}function r(n,u,f=!1){var T;const v=document.getElementById(e.rootNodeId.current);if(!v||!n)return;const p=s();if(!p.length)return;const c=p.indexOf(n),h=Pr(v),{nextKey:g,prevKey:x}=$r(h,e.orientation.current),P=e.loop.current,m={[g]:c+1,[x]:c-1,[pa]:0,[va]:p.length-1};if(f){const D=g===ss?is:ss,E=x===es?os:es;m[D]=c+1,m[E]=c-1}let y=m[u.key];if(y===void 0)return;u.preventDefault(),y<0&&P?y=p.length-1:y===p.length&&P&&(y=0);const b=p[y];if(b)return b.focus(),t.current=b.id,(T=e.onCandidateFocus)==null||T.call(e,b),b}function l(n){const u=s(),f=t.current!==null;return n&&!f&&u[0]===n?(t.current=n.id,0):(n==null?void 0:n.id)===t.current?0:-1}return{setCurrentTabStopId(n){t.current=n},getTabIndex:l,handleKeydown:r,focusFirstCandidate:a,currentTabStopId:t}}const Cr="data-tabs-root",Ar="data-tabs-list",Xs="data-tabs-trigger",Or="data-tabs-content";var fe,Oe;class kr{constructor(t){it(this,"opts");it(this,"rovingFocusGroup");S(this,fe,Ut(de([])));it(this,"valueToTriggerId",new _s);it(this,"valueToContentId",new _s);S(this,Oe,$(()=>({id:this.opts.id.current,"data-orientation":ls(this.opts.orientation.current),[Cr]:""})));this.opts=t,Fe(t),this.rovingFocusGroup=Tr({candidateAttr:Xs,rootNodeId:this.opts.id,loop:this.opts.loop,orientation:this.opts.orientation})}get triggerIds(){return i(o(this,fe))}set triggerIds(t){z(o(this,fe),de(t))}registerTrigger(t,s){return this.triggerIds.push(t),this.valueToTriggerId.set(s,t),()=>{this.triggerIds=this.triggerIds.filter(a=>a!==t),this.valueToTriggerId.delete(s)}}registerContent(t,s){return this.valueToContentId.set(s,t),()=>{this.valueToContentId.delete(s)}}setValue(t){this.opts.value.current=t}get props(){return i(o(this,Oe))}}fe=new WeakMap,Oe=new WeakMap;var ke,Me;class Mr{constructor(t,s){it(this,"opts");it(this,"root");S(this,ke,$(()=>this.root.opts.disabled.current));S(this,Me,$(()=>({id:this.opts.id.current,role:"tablist","aria-orientation":ya(this.root.opts.orientation.current),"data-orientation":ls(this.root.opts.orientation.current),[Ar]:"","data-disabled":qs(i(o(this,ke)))})));this.opts=t,this.root=s,Fe(t)}get props(){return i(o(this,Me))}}ke=new WeakMap,Me=new WeakMap;var Vt,Ot,Wt,De,Jt,Ce,Ie;class Dr{constructor(t,s){S(this,Jt);it(this,"opts");it(this,"root");S(this,Vt,$(()=>this.root.opts.value.current===this.opts.value.current));S(this,Ot,$(()=>this.opts.disabled.current||this.root.opts.disabled.current));S(this,Wt,Ut(0));S(this,De,$(()=>this.root.valueToContentId.get(this.opts.value.current)));S(this,Ie,$(()=>({id:this.opts.id.current,role:"tab","data-state":Zs(i(o(this,Vt))),"data-value":this.opts.value.current,"data-orientation":ls(this.root.opts.orientation.current),"data-disabled":qs(i(o(this,Ot))),"aria-selected":Pa(i(o(this,Vt))),"aria-controls":i(o(this,De)),[Xs]:"",disabled:xa(i(o(this,Ot))),tabindex:i(o(this,Wt)),onclick:this.onclick,onfocus:this.onfocus,onkeydown:this.onkeydown})));this.opts=t,this.root=s,Fe(t),Us([()=>this.opts.id.current,()=>this.opts.value.current],([a,r])=>this.root.registerTrigger(a,r)),Ua(()=>{this.root.triggerIds.length,i(o(this,Vt))||!this.root.opts.value.current?z(o(this,Wt),0):z(o(this,Wt),-1)}),this.onfocus=this.onfocus.bind(this),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onfocus(t){this.root.opts.activationMode.current!=="automatic"||i(o(this,Ot))||Z(this,Jt,Ce).call(this)}onclick(t){i(o(this,Ot))||Z(this,Jt,Ce).call(this)}onkeydown(t){if(!i(o(this,Ot))){if(t.key===ba||t.key===_a){t.preventDefault(),Z(this,Jt,Ce).call(this);return}this.root.rovingFocusGroup.handleKeydown(this.opts.ref.current,t)}}get props(){return i(o(this,Ie))}}Vt=new WeakMap,Ot=new WeakMap,Wt=new WeakMap,De=new WeakMap,Jt=new WeakSet,Ce=function(){this.root.opts.value.current!==this.opts.value.current&&this.root.setValue(this.opts.value.current)},Ie=new WeakMap;var ve,Ee,Re;class Ir{constructor(t,s){it(this,"opts");it(this,"root");S(this,ve,$(()=>this.root.opts.value.current===this.opts.value.current));S(this,Ee,$(()=>this.root.valueToTriggerId.get(this.opts.value.current)));S(this,Re,$(()=>({id:this.opts.id.current,role:"tabpanel",hidden:wa(!i(o(this,ve))),tabindex:0,"data-value":this.opts.value.current,"data-state":Zs(i(o(this,ve))),"aria-labelledby":i(o(this,Ee)),[Or]:""})));this.opts=t,this.root=s,Fe(t),Us([()=>this.opts.id.current,()=>this.opts.value.current],([a,r])=>this.root.registerContent(a,r))}get props(){return i(o(this,Re))}}ve=new WeakMap,Ee=new WeakMap,Re=new WeakMap;const Ke=new ma("Tabs.Root");function Er(e){return Ke.set(new kr(e))}function Rr(e){return new Dr(e,Ke.get())}function Fr(e){return new Mr(e,Ke.get())}function Lr(e){return new Ir(e,Ke.get())}function Zs(e){return e?"active":"inactive"}var Qr=k("<div><!></div>");function qr(e,t){F(t,!0);let s=w(t,"id",19,Le),a=w(t,"ref",15,null),r=w(t,"value",15,""),l=w(t,"onValueChange",3,Sa),n=w(t,"orientation",3,"horizontal"),u=w(t,"loop",3,!0),f=w(t,"activationMode",3,"automatic"),v=w(t,"disabled",3,!1),p=W(t,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","orientation","loop","activationMode","disabled","children","child"]);const c=Er({id:B.with(()=>s()),value:B.with(()=>r(),y=>{r(y),l()(y)}),orientation:B.with(()=>n()),loop:B.with(()=>u()),activationMode:B.with(()=>f()),disabled:B.with(()=>v()),ref:B.with(()=>a(),y=>a(y))}),h=$(()=>Qe(p,c.props));var g=O(),x=_(g);{var P=y=>{var b=O(),T=_(b);H(T,()=>t.child,()=>({props:i(h)})),d(y,b)},m=y=>{var b=Qr();let T;var D=C(b);H(D,()=>t.children??yt),A(b),N(()=>T=ae(b,T,{...i(h)})),d(y,b)};dt(x,y=>{t.child?y(P):y(m,!1)})}d(e,g),L()}var Ur=k("<div><!></div>");function Kr(e,t){F(t,!0);let s=w(t,"id",19,Le),a=w(t,"ref",15,null),r=W(t,["$$slots","$$events","$$legacy","children","child","id","ref","value"]);const l=Lr({value:B.with(()=>t.value),id:B.with(()=>s()),ref:B.with(()=>a(),c=>a(c))}),n=$(()=>Qe(r,l.props));var u=O(),f=_(u);{var v=c=>{var h=O(),g=_(h);H(g,()=>t.child,()=>({props:i(n)})),d(c,h)},p=c=>{var h=Ur();let g;var x=C(h);H(x,()=>t.children??yt),A(h),N(()=>g=ae(h,g,{...i(n)})),d(c,h)};dt(f,c=>{t.child?c(v):c(p,!1)})}d(e,u),L()}var Nr=k("<div><!></div>");function Br(e,t){F(t,!0);let s=w(t,"id",19,Le),a=w(t,"ref",15,null),r=W(t,["$$slots","$$events","$$legacy","child","children","id","ref"]);const l=Fr({id:B.with(()=>s()),ref:B.with(()=>a(),c=>a(c))}),n=$(()=>Qe(r,l.props));var u=O(),f=_(u);{var v=c=>{var h=O(),g=_(h);H(g,()=>t.child,()=>({props:i(n)})),d(c,h)},p=c=>{var h=Nr();let g;var x=C(h);H(x,()=>t.children??yt),A(h),N(()=>g=ae(h,g,{...i(n)})),d(c,h)};dt(f,c=>{t.child?c(v):c(p,!1)})}d(e,u),L()}var Hr=k("<button><!></button>");function jr(e,t){F(t,!0);let s=w(t,"disabled",3,!1),a=w(t,"id",19,Le),r=w(t,"type",3,"button"),l=w(t,"ref",15,null),n=W(t,["$$slots","$$events","$$legacy","child","children","disabled","id","type","value","ref"]);const u=Rr({id:B.with(()=>a()),disabled:B.with(()=>s()??!1),value:B.with(()=>t.value),ref:B.with(()=>l(),m=>l(m))}),f=$(()=>Qe(n,u.props,{type:r()})),v=Ks(),[p,c]=v;var h=O(),g=_(h);{var x=m=>{var y=O(),b=_(y);H(b,()=>t.child,()=>({props:i(f)})),d(m,y)},P=m=>{var y=Hr();let b;var T=C(y);H(T,()=>t.children??yt),A(y),N(D=>b=ae(y,b,{...D}),[()=>c({...i(f)},[{attribute_name:"formaction"}])]),d(m,y)};dt(g,m=>{t.child?m(x):m(P,!1)})}d(e,h),L()}function zr(e,t){F(t,!0);let s=w(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=_(r);const n=$(()=>Bt("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",t.class));I(l,()=>Kr,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),L()}function Gr(e,t){F(t,!0);let s=w(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=_(r);const n=$(()=>Bt("bg-muted text-muted-foreground inline-flex h-10 items-center justify-center rounded-md p-1",t.class));I(l,()=>Br,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),L()}function ks(e,t){F(t,!0);let s=w(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=_(r);const n=$(()=>Bt("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm",t.class));I(l,()=>jr,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),L()}const Vr=qr,Wr=async({dataset_id:e,filename:t="",includeFilter:s,excludeFilter:a})=>{var l;const r={data:void 0,error:void 0};try{const n=await zs.POST("/api/datasets/{dataset_id}/export",{params:{path:{dataset_id:e}},body:{include:s,exclude:a},headers:{"Access-Control-Expose-Headers":"Content-Disposition"},parseAs:"blob"});if(n.error)throw new Error(JSON.stringify(n.error,null,2));if(!n.data)throw new Error("No data");r.data=n.data,t=t||((l=n.response.headers.get("content-disposition"))==null?void 0:l.split("filename=")[1])||`export_${new Date().toISOString()}.txt`,xr(t,r.data)}catch(n){r.error="Error exporting dataset: "+String(n)}return r};function Jr(e,t){F(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"chart-bar"},()=>s,{iconNode:[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16"}],["path",{d:"M7 16h8"}],["path",{d:"M7 11h12"}],["path",{d:"M7 6h3"}]],children:(r,l)=>{var n=O(),u=_(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),L()}function Yr(e,t){F(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"circle-check"},()=>s,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:(r,l)=>{var n=O(),u=_(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),L()}function Xr(e,t){F(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"download"},()=>s,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(r,l)=>{var n=O(),u=_(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),L()}function Zr(e,t){F(t,!0);let s=W(t,["$$slots","$$events","$$legacy"]);qe(e,It({name:"loader-circle"},()=>s,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(r,l)=>{var n=O(),u=_(n);H(u,()=>t.children??yt),d(r,n)},$$slots:{default:!0}})),L()}var tn=k("<div><!></div>");function en(e,t){F(t,!0);let s=w(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=tn();let l;var n=C(r);H(n,()=>t.children??yt),A(r),us(r,u=>s(u),()=>s()),N(u=>l=ae(r,l,{class:u,...a}),[()=>Bt("flex flex-col space-y-2 text-center sm:text-left",t.class)]),d(e,r),L()}var sn=k("<div><!></div>");function an(e,t){F(t,!0);let s=w(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=sn();let l;var n=C(r);H(n,()=>t.children??yt),A(r),us(r,u=>s(u),()=>s()),N(u=>l=ae(r,l,{class:u,...a}),[()=>Bt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t.class)]),d(e,r),L()}function rn(e,t){F(t,!0);let s=w(t,"ref",15,null),a=W(t,["$$slots","$$events","$$legacy","ref","class"]);var r=O(),l=_(r);const n=$(()=>Bt("text-foreground text-lg font-semibold",t.class));I(l,()=>Ba,(u,f)=>{f(u,It({get class(){return i(n)}},()=>a,{get ref(){return s()},set ref(v){s(v)}}))}),d(e,r),L()}const nn=Ha,on=$a;var ln=k('<span class="text-destructive-foreground"> </span>'),un=k("<!> <span> </span>",1),cn=k('<div class="flex items-center gap-2"><!></div>'),dn=k('<div class="my-4"><!></div>'),hn=k('<div class="absolute inset-0 flex items-center justify-center backdrop-blur-sm" data-testid="loading-spinner"><!></div>'),fn=k(" <!>",1),vn=k('<div class="flex w-full flex-row gap-3"><!> <!></div>'),gn=k('<!> <div class="mt-6"><!></div> <!> <!>',1);function pn(e,t){const s=w(t,"submitLabel",3,"Submit"),a=w(t,"cancelLabel",3,"Cancel"),r=w(t,"errorMessage",3,""),l=w(t,"successMessage",3,""),n=w(t,"isOpen",3,!1),u=w(t,"isLoading",3,!1),f=w(t,"isDisabled",3,!1);var v=O(),p=_(v);I(p,()=>nn,(c,h)=>{h(c,{get open(){return n()},get onOpenChange(){return t.onOpenChange},children:(g,x)=>{var P=O(),m=_(P);I(m,()=>Ta,(y,b)=>{b(y,{side:"right",class:"w-[400px]",children:(T,D)=>{var E=gn(),q=_(E);I(q,()=>en,(ht,ft)=>{ft(ht,{children:(Ct,Ht)=>{var vt=O(),At=_(vt);I(At,()=>rn,(U,xt)=>{xt(U,{children:(J,X)=>{et();var Y=St();N(()=>mt(Y,t.title)),d(J,Y)},$$slots:{default:!0}})}),d(Ct,vt)},$$slots:{default:!0}})});var bt=Q(q,2),Tt=C(bt);H(Tt,()=>t.children),A(bt);var _t=Q(bt,2);{var Et=ht=>{var ft=dn(),Ct=C(ft);const Ht=$(()=>r()?"destructive":"default"),vt=$(()=>r()?"alert-destructive":"alert-success");I(Ct,()=>Ca,(At,U)=>{U(At,{get variant(){return i(Ht)},class:"border text-foreground",get"data-testid"(){return i(vt)},children:(xt,J)=>{var X=cn(),Y=C(X);{var Rt=st=>{var K=ln(),G=C(K,!0);A(K),N(()=>mt(G,r())),d(st,K)},Ft=st=>{var K=un(),G=_(K);Yr(G,{class:"h-4 w-4 text-primary"});var at=Q(G,2),re=C(at,!0);A(at),N(()=>mt(re,l())),d(st,K)};dt(Y,st=>{r()?st(Rt):st(Ft,!1)})}A(X),d(xt,X)},$$slots:{default:!0}})}),A(ft),Ns(3,ft,()=>Aa),d(ht,ft)};dt(_t,ht=>{(r()||l())&&ht(Et)})}var Ne=Q(_t,2);I(Ne,()=>an,(ht,ft)=>{ft(ht,{class:"mt-6",children:(Ct,Ht)=>{var vt=vn(),At=C(vt);I(At,()=>on,(J,X)=>{X(J,{class:"w-full",children:(Y,Rt)=>{Ae(Y,{class:"w-full",variant:"ghost",get disabled(){return u()},"data-testid":"cancel-button",children:(Ft,st)=>{et();var K=St();N(()=>mt(K,a())),d(Ft,K)},$$slots:{default:!0}})},$$slots:{default:!0}})});var U=Q(At,2);const xt=$(()=>f()||u());Ae(U,{class:"relative w-full",get disabled(){return i(xt)},get onclick(){return t.onSubmit},"data-testid":"submit-button",children:(J,X)=>{et();var Y=fn(),Rt=_(Y),Ft=Q(Rt);{var st=K=>{var G=hn(),at=C(G);Zr(at,{class:"animate-spin"}),A(G),d(K,G)};dt(Ft,K=>{u()&&K(st)})}N(()=>mt(Rt,`${s()??""} `)),d(J,Y)},$$slots:{default:!0}}),A(vt),d(Ct,vt)},$$slots:{default:!0}})}),d(T,E)},$$slots:{default:!0}})}),d(g,P)},$$slots:{default:!0}})}),d(e,v)}function mn({dataset_id:e,includeFilter:t,excludeFilter:s}){const a=Ye(0),r=Ye(void 0),l=Ye(!1);return(t||s)&&(l.set(!0),zs.POST("/api/datasets/{dataset_id}/export/stats",{params:{path:{dataset_id:e}},body:{include:t,exclude:s}}).then(n=>{n!=null&&n.data&&a.set(n.data)}).catch(n=>{r.set(n.message)}).finally(()=>{l.set(!1)})),{isLoading:l,error:r,count:a}}var yn=k("<!> Export & Download",1),bn=k("<!> <!>",1),_n=k("<!> <!> <!> <!>",1),xn=k("<!> <!>",1),Pn=k("<!> <!>",1),wn=k('<div class="rounded-lg bg-muted p-4"><h4 class="font-medium">Summary</h4> <div class="mt-2 space-y-2 text-sm text-muted-foreground"><p>Samples to export: <strong> </strong></p></div></div>'),Sn=k('<div class="space-y-6"><!> <div class="space-y-2"><!></div> <!></div>'),$n=k("<!> <!>",1);function Tn(e,t){F(t,!0);const[s,a]=Ue(),r=()=>pt(x,"$tags",s),l=()=>pt(m,"$selectedSampleIds",s),n=()=>pt(y,"$selectedSampleAnnotationCropIds",s),u=()=>pt(i(_t),"$statError",s),f=()=>pt(i(Tt),"$isLoading",s),v=()=>pt(i(bt),"$count",s);let p=Ut(!1),c=Ut(!1),h=Na.params.dataset_id,g=Ut("");const{tags:x}=Oa({dataset_id:h}),P=$(()=>{var U;return((U=r().find(xt=>xt.tag_id===i(g)))==null?void 0:U.name)??"Select tag to export"}),{selectedSampleIds:m,selectedSampleAnnotationCropIds:y}=Qs();let b=Ut("bySelection");const T=$(()=>{const U={};return i(b)==="bySelection"?l().size>0?U.sample_ids=Array.from(l()):n().size>0&&(U.annotation_ids=Array.from(n())):i(b)==="byTag"&&(U.tag_ids=i(g)?[i(g)]:void 0),U}),D=$(()=>i(c)?void 0:i(T)),E=$(()=>i(c)?i(T):void 0),q=$(()=>mn({dataset_id:h,includeFilter:i(D),excludeFilter:i(E)})),bt=$(()=>i(q).count),Tt=$(()=>i(q).isLoading),_t=$(()=>i(q).error),Et=$(()=>!!Math.max(l().size,n().size)),Ne=$(()=>i(b)==="bySelection"?i(Et):i(g));let ht=$(()=>i(b)==="bySelection"&&!i(Et)?"No samples or annotations selected.":u()?u():i(b)==="bySelection"&&l().size>0&&n().size>0?"You can only export samples or annotations, not both.":"");const ft=()=>{Wr({dataset_id:h,includeFilter:i(D),excludeFilter:i(E)})};var Ct=$n(),Ht=_(Ct);Ae(Ht,{variant:"ghost",class:"flex items-center space-x-2",onclick:()=>z(p,!0),children:(U,xt)=>{var J=yn(),X=_(J);Xr(X,{class:"size-4"}),et(),d(U,J)},$$slots:{default:!0}});var vt=Q(Ht,2);const At=$(()=>!!i(ht));pn(vt,{title:"Export samples",submitLabel:"Export",get isOpen(){return i(p)},get isDisabled(){return i(At)},get isLoading(){return f()},get errorMessage(){return i(ht)},onSubmit:ft,onOpenChange:U=>z(p,de(U)),children:(U,xt)=>{var J=Sn(),X=C(J);I(X,()=>Vr,(K,G)=>{G(K,{class:"w-full",get value(){return i(b)},set value(at){z(b,de(at))},children:(at,re)=>{var ne=Pn(),ye=_(ne);xs(ye,{label:"Export",children:(Be,cs)=>{var be=O(),ds=_(be);I(ds,()=>Gr,(He,hs)=>{hs(He,{class:"grid w-full grid-cols-2",children:(_e,fs)=>{var xe=bn(),Pe=_(xe);I(Pe,()=>ks,(we,jt)=>{jt(we,{value:"bySelection",children:(zt,je)=>{et();var Lt=St("By selection");d(zt,Lt)},$$slots:{default:!0}})});var ie=Q(Pe,2);I(ie,()=>ks,(we,jt)=>{jt(we,{value:"byTag",children:(zt,je)=>{et();var Lt=St("By tag");d(zt,Lt)},$$slots:{default:!0}})}),d(_e,xe)},$$slots:{default:!0}})}),d(Be,be)}});var ea=Q(ye,2);I(ea,()=>zr,(Be,cs)=>{cs(Be,{value:"byTag",class:"pt-2",children:(be,ds)=>{xs(be,{label:"Tag to export",description:"Select the tag you want to export samples for",children:(He,hs)=>{var _e=O(),fs=_(_e);I(fs,()=>ja,(xe,Pe)=>{Pe(xe,{type:"single",name:"tagIdToExport",get value(){return i(g)},set value(ie){z(g,de(ie))},children:(ie,we)=>{var jt=xn(),zt=_(jt);I(zt,()=>za,(Lt,ze)=>{ze(Lt,{class:"w-full",children:(Ge,sa)=>{et();var oe=St();N(()=>mt(oe,i(P))),d(Ge,oe)},$$slots:{default:!0}})});var je=Q(zt,2);I(je,()=>Ga,(Lt,ze)=>{ze(Lt,{children:(Ge,sa)=>{var oe=O(),aa=_(oe);I(aa,()=>Va,(ra,na)=>{na(ra,{children:(ia,jn)=>{var vs=_n(),gs=_(vs);I(gs,()=>Ps,(rt,nt)=>{nt(rt,{children:(Pt,le)=>{et();var Qt=St("Annotation tags");d(Pt,Qt)},$$slots:{default:!0}})});var ps=Q(gs,2);Ze(ps,1,()=>r().filter(rt=>rt.kind=="annotation"),ts,(rt,nt)=>{var Pt=O(),le=_(Pt);I(le,()=>ws,(Qt,Ve)=>{Ve(Qt,{get value(){return i(nt).tag_id},get label(){return i(nt).name},children:(We,la)=>{et();var ue=St();N(()=>mt(ue,i(nt).name)),d(We,ue)},$$slots:{default:!0}})}),d(rt,Pt)});var ms=Q(ps,2);I(ms,()=>Ps,(rt,nt)=>{nt(rt,{children:(Pt,le)=>{et();var Qt=St("Sample tags");d(Pt,Qt)},$$slots:{default:!0}})});var oa=Q(ms,2);Ze(oa,1,()=>r().filter(rt=>rt.kind=="sample"),ts,(rt,nt)=>{var Pt=O(),le=_(Pt);I(le,()=>ws,(Qt,Ve)=>{Ve(Qt,{get value(){return i(nt).tag_id},get label(){return i(nt).name},children:(We,la)=>{et();var ue=St();N(()=>mt(ue,i(nt).name)),d(We,ue)},$$slots:{default:!0}})}),d(rt,Pt)}),d(ia,vs)},$$slots:{default:!0}})}),d(Ge,oe)},$$slots:{default:!0}})}),d(ie,jt)},$$slots:{default:!0}})}),d(He,_e)}})},$$slots:{default:!0}})}),d(at,ne)},$$slots:{default:!0}})});var Y=Q(X,2),Rt=C(Y);lr(Rt,{name:"inverse-selection",label:"Inverse selection",get isChecked(){return i(c)},onCheckedChange:()=>z(c,!i(c)),helperText:"Inverse selection will export all samples that are not selected"}),A(Y);var Ft=Q(Y,2);{var st=K=>{var G=wn(),at=Q(C(G),2),re=C(at),ne=Q(C(re)),ye=C(ne,!0);A(ne),A(re),A(at),A(G),N(()=>mt(ye,v())),d(K,G)};dt(Ft,K=>{i(Ne)&&K(st)})}A(J),d(U,J)},$$slots:{default:!0}}),d(e,Ct),L(),a()}var Cn=k('<div role="tooltip" id="tooltip"> </div>'),An=k('<div class="relative inline-block" tabindex="0" role="button"><!> <!></div>');function On(e,t){F(t,!0);let s=w(t,"position",3,"top"),a=Ut(!1),r;function l(){if(!r)return{};switch(s()){case"top":return{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"5px"};case"bottom":return{top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"5px"};case"left":return{right:"100%",top:"50%",transform:"translateY(-50%)",marginRight:"5px"};case"right":return{left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:"5px"};default:return{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"5px"}}}function n(){z(a,!0)}function u(){z(a,!1)}var f=An(),v=C(f);H(v,()=>t.children);var p=Q(v,2);{var c=h=>{var g=Cn(),x=C(g,!0);A(g),N((P,m)=>{Ma(g,1,P),Da(g,m),mt(x,t.content)},[()=>ka(Bt("bg-popover text-popover-foreground absolute z-50 max-w-xs rounded-md px-3 py-1.5 text-xs shadow-md",t.class)),l]),Ns(3,g,()=>Ia,()=>({y:s()==="top"?5:s()==="bottom"?-5:0,x:s()==="left"?5:s()==="right"?-5:0,duration:200})),d(h,g)};dt(p,h=>{i(a)&&t.content&&h(c)})}A(f),us(f,h=>r=h,()=>r),N(()=>he(f,"aria-describedby",i(a)?"tooltip":void 0)),ce("mouseenter",f,n),ce("mouseleave",f,u),ce("focusin",f,n),ce("focusout",f,u),ce("keydown",f,h=>h.key==="Escape"&&u()),d(e,f),L()}var kn=k("<!> <span>Metrics</span>",1);function Mn(e,t){F(t,!1);const[s,a]=Ue(),r=()=>pt(n,"$hasEnoughTasksForMetrics",s),l=()=>pt(u,"$isMetricsPanelOpen",s),{hasEnoughTasksForMetrics:n}=Ea(),{isMetricsPanelOpen:u,toggleMetricsPanel:f}=Wa();function v(){f()}me();const p=Te(()=>r()?"":"Metrics are only available when you have both ground truth and prediction annotation tasks");On(e,{get content(){return i(p)},children:(c,h)=>{const g=Te(()=>l()?"default":"ghost"),x=Te(()=>!r());Ae(c,{get variant(){return i(g)},class:"flex items-center space-x-2",onclick:v,get disabled(){return i(x)},children:(P,m)=>{var y=kn(),b=_(y);Jr(b,{class:"size-4"}),et(2),d(P,y)},$$slots:{default:!0}})},$$slots:{default:!0}}),L(),a()}var Dn=k('<header><div class="p mb-3 border-b border-border-hard bg-card px-4 py-4 pl-8 text-diffuse-foreground"><div class="flex justify-between"><div class="w-50 flex-none"><a><!></a></div> <div class="flex flex-auto justify-end gap-2"><!> <!></div></div></div></header>');function In(e,t){F(t,!1);const s=Ks(),[a,r]=s;me();var l=Dn(),n=C(l),u=C(n),f=C(u),v=C(f),p=C(v);Fn(p),A(v),A(f);var c=Q(f,2),h=C(c);Mn(h,{});var g=Q(h,2);Tn(g,{}),A(c),A(u),A(n),A(l),N(x=>he(v,"href",x),[()=>a("/",void 0)],Te),d(e,l),L()}const En=""+new URL("../assets/LightlyLogo.BNjCIww-.png",import.meta.url).href;var Rn=k('<div><img alt="Lightly Purple Logo" class="h-10"></div>');function Fn(e){var t=Rn(),s=C(t);he(s,"src",En),A(t),d(e,t)}var Yt,Xt,tt,Kt,j,ge,Nt,ut,wt,Is,Ln=(Is=class extends Ja{constructor(t){super();S(this,ut);S(this,Yt);S(this,Xt);S(this,tt);S(this,Kt);S(this,j);S(this,ge);S(this,Nt);M(this,Nt,!1),M(this,ge,t.defaultOptions),this.setOptions(t.options),this.observers=[],M(this,Kt,t.client),M(this,tt,o(this,Kt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,M(this,Yt,qn(this.options)),this.state=t.state??o(this,Yt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=o(this,j))==null?void 0:t.promise}setOptions(t){this.options={...o(this,ge),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&o(this,tt).remove(this)}setData(t,s){const a=Ya(this.state.data,t,this.options);return Z(this,ut,wt).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(t,s){Z(this,ut,wt).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var a,r;const s=(a=o(this,j))==null?void 0:a.promise;return(r=o(this,j))==null||r.cancel(t),s?s.then(lt).catch(lt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(o(this,Yt))}isActive(){return this.observers.some(t=>Xa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Za(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=o(this,j))==null||s.continue()}onOnline(){var s;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=o(this,j))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),o(this,tt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(o(this,j)&&(o(this,Nt)?o(this,j).cancel({revert:!0}):o(this,j).cancelRetry()),this.scheduleGc()),o(this,tt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Z(this,ut,wt).call(this,{type:"invalidate"})}fetch(t,s){var f,v,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(o(this,j))return o(this,j).continueRetry(),o(this,j).promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(h=>h.options.queryFn);c&&this.setOptions(c.options)}const a=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(M(this,Nt,!0),a.signal)})},l=()=>{const c=Vs(this.options,s),h={client:o(this,Kt),queryKey:this.queryKey,meta:this.meta};return r(h),M(this,Nt,!1),this.options.persister?this.options.persister(c,h,this):c(h)},n={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:o(this,Kt),state:this.state,fetchFn:l};r(n),(f=this.options.behavior)==null||f.onFetch(n,this),M(this,Xt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=n.fetchOptions)==null?void 0:v.meta))&&Z(this,ut,wt).call(this,{type:"fetch",meta:(p=n.fetchOptions)==null?void 0:p.meta});const u=c=>{var h,g,x,P;Xe(c)&&c.silent||Z(this,ut,wt).call(this,{type:"error",error:c}),Xe(c)||((g=(h=o(this,tt).config).onError)==null||g.call(h,c,this),(P=(x=o(this,tt).config).onSettled)==null||P.call(x,this.state.data,c,this)),this.scheduleGc()};return M(this,j,tr({initialPromise:s==null?void 0:s.initialPromise,fn:n.fetchFn,abort:a.abort.bind(a),onSuccess:c=>{var h,g,x,P;if(c===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(m){u(m);return}(g=(h=o(this,tt).config).onSuccess)==null||g.call(h,c,this),(P=(x=o(this,tt).config).onSettled)==null||P.call(x,c,this.state.error,this),this.scheduleGc()},onError:u,onFail:(c,h)=>{Z(this,ut,wt).call(this,{type:"failed",failureCount:c,error:h})},onPause:()=>{Z(this,ut,wt).call(this,{type:"pause"})},onContinue:()=>{Z(this,ut,wt).call(this,{type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0})),o(this,j).start()}},Yt=new WeakMap,Xt=new WeakMap,tt=new WeakMap,Kt=new WeakMap,j=new WeakMap,ge=new WeakMap,Nt=new WeakMap,ut=new WeakSet,wt=function(t){const s=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Qn(a.data,this.options),fetchMeta:t.meta??null};case"success":return{...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return Xe(r)&&r.revert&&o(this,Xt)?{...o(this,Xt),fetchStatus:"idle"}:{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=s(this.state),V.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),o(this,tt).notify({query:this,type:"updated",action:t})})},Is);function Qn(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:er(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qn(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,a=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var gt,Es,Un=(Es=class extends Ws{constructor(t={}){super();S(this,gt);this.config=t,M(this,gt,new Map)}build(t,s,a){const r=s.queryKey,l=s.queryHash??Js(r,s);let n=this.get(l);return n||(n=new Ln({client:t,queryKey:r,queryHash:l,options:t.defaultQueryOptions(s),state:a,defaultOptions:t.getQueryDefaults(r)}),this.add(n)),n}add(t){o(this,gt).has(t.queryHash)||(o(this,gt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=o(this,gt).get(t.queryHash);s&&(t.destroy(),s===t&&o(this,gt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){V.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return o(this,gt).get(t)}getAll(){return[...o(this,gt).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(a=>Ss(s,a))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(a=>Ss(t,a)):s}notify(t){V.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){V.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){V.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gt=new WeakMap,Es),$t,ct,pe,Rs,Kn=(Rs=class extends Ws{constructor(t={}){super();S(this,$t);S(this,ct);S(this,pe);this.config=t,M(this,$t,new Set),M(this,ct,new Map),M(this,pe,0)}build(t,s,a){const r=new sr({mutationCache:this,mutationId:++Se(this,pe)._,options:t.defaultMutationOptions(s),state:a});return this.add(r),r}add(t){o(this,$t).add(t);const s=$e(t);if(typeof s=="string"){const a=o(this,ct).get(s);a?a.push(t):o(this,ct).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(o(this,$t).delete(t)){const s=$e(t);if(typeof s=="string"){const a=o(this,ct).get(s);if(a)if(a.length>1){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}else a[0]===t&&o(this,ct).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=$e(t);if(typeof s=="string"){const a=o(this,ct).get(s),r=a==null?void 0:a.find(l=>l.state.status==="pending");return!r||r===t}else return!0}runNext(t){var a;const s=$e(t);if(typeof s=="string"){const r=(a=o(this,ct).get(s))==null?void 0:a.find(l=>l!==t&&l.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){V.batch(()=>{o(this,$t).forEach(t=>{this.notify({type:"removed",mutation:t})}),o(this,$t).clear(),o(this,ct).clear()})}getAll(){return Array.from(o(this,$t))}find(t){const s={exact:!0,...t};return this.getAll().find(a=>$s(s,a))}findAll(t={}){return this.getAll().filter(s=>$s(t,s))}notify(t){V.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return V.batch(()=>Promise.all(t.map(s=>s.continue().catch(lt))))}},$t=new WeakMap,ct=new WeakMap,pe=new WeakMap,Rs);function $e(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Ms(e){return{onFetch:(t,s)=>{var p,c,h,g,x;const a=t.options,r=(h=(c=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:c.fetchMore)==null?void 0:h.direction,l=((g=t.state.data)==null?void 0:g.pages)||[],n=((x=t.state.data)==null?void 0:x.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const v=async()=>{let P=!1;const m=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(t.signal.aborted?P=!0:t.signal.addEventListener("abort",()=>{P=!0}),t.signal)})},y=Vs(t.options,t.fetchOptions),b=async(T,D,E)=>{if(P)return Promise.reject();if(D==null&&T.pages.length)return Promise.resolve(T);const q={client:t.client,queryKey:t.queryKey,pageParam:D,direction:E?"backward":"forward",meta:t.options.meta};m(q);const bt=await y(q),{maxPages:Tt}=t.options,_t=E?ar:rr;return{pages:_t(T.pages,bt,Tt),pageParams:_t(T.pageParams,D,Tt)}};if(r&&l.length){const T=r==="backward",D=T?Nn:Ds,E={pages:l,pageParams:n},q=D(a,E);u=await b(E,q,T)}else{const T=e??l.length;do{const D=f===0?n[0]??a.initialPageParam:Ds(a,u);if(f>0&&D==null)break;u=await b(u,D),f++}while(f<T)}return u};t.options.persister?t.fetchFn=()=>{var P,m;return(m=(P=t.options).persister)==null?void 0:m.call(P,v,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=v}}}function Ds(e,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}function Nn(e,{pages:t,pageParams:s}){var a;return t.length>0?(a=e.getPreviousPageParam)==null?void 0:a.call(e,t[0],t,s[0],s):void 0}var R,kt,Mt,Zt,te,Dt,ee,se,Fs,ta=(Fs=class{constructor(e={}){S(this,R);S(this,kt);S(this,Mt);S(this,Zt);S(this,te);S(this,Dt);S(this,ee);S(this,se);M(this,R,e.queryCache||new Un),M(this,kt,e.mutationCache||new Kn),M(this,Mt,e.defaultOptions||{}),M(this,Zt,new Map),M(this,te,new Map),M(this,Dt,0)}mount(){Se(this,Dt)._++,o(this,Dt)===1&&(M(this,ee,nr.subscribe(async e=>{e&&(await this.resumePausedMutations(),o(this,R).onFocus())})),M(this,se,Ts.subscribe(async e=>{e&&(await this.resumePausedMutations(),o(this,R).onOnline())})))}unmount(){var e,t;Se(this,Dt)._--,o(this,Dt)===0&&((e=o(this,ee))==null||e.call(this),M(this,ee,void 0),(t=o(this,se))==null||t.call(this),M(this,se,void 0))}isFetching(e){return o(this,R).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return o(this,kt).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=o(this,R).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=o(this,R).build(this,t),a=s.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Cs(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return o(this,R).findAll(e).map(({queryKey:t,state:s})=>{const a=s.data;return[t,a]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),r=o(this,R).get(a.queryHash),l=r==null?void 0:r.state.data,n=ir(t,l);if(n!==void 0)return o(this,R).build(this,a).setData(n,{...s,manual:!0})}setQueriesData(e,t,s){return V.batch(()=>o(this,R).findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=o(this,R).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=o(this,R);V.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=o(this,R);return V.batch(()=>(s.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},a=V.batch(()=>o(this,R).findAll(e).map(r=>r.cancel(s)));return Promise.all(a).then(lt).catch(lt)}invalidateQueries(e,t={}){return V.batch(()=>(o(this,R).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},a=V.batch(()=>o(this,R).findAll(e).filter(r=>!r.isDisabled()).map(r=>{let l=r.fetch(void 0,s);return s.throwOnError||(l=l.catch(lt)),r.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(lt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=o(this,R).build(this,t);return s.isStaleByTime(Cs(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(lt).catch(lt)}fetchInfiniteQuery(e){return e.behavior=Ms(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(lt).catch(lt)}ensureInfiniteQueryData(e){return e.behavior=Ms(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ts.isOnline()?o(this,kt).resumePausedMutations():Promise.resolve()}getQueryCache(){return o(this,R)}getMutationCache(){return o(this,kt)}getDefaultOptions(){return o(this,Mt)}setDefaultOptions(e){M(this,Mt,e)}setQueryDefaults(e,t){o(this,Zt).set(As(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...o(this,Zt).values()],s={};return t.forEach(a=>{Os(e,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(e,t){o(this,te).set(As(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...o(this,te).values()],s={};return t.forEach(a=>{Os(e,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...o(this,Mt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Js(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Gs&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...o(this,Mt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){o(this,R).clear(),o(this,kt).clear()}},R=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Zt=new WeakMap,te=new WeakMap,Dt=new WeakMap,ee=new WeakMap,se=new WeakMap,Fs);function Bn(e,t){F(t,!1);let s=w(t,"client",24,()=>new ta);js(()=>{s().mount()}),or(s()),Ka(()=>{s().unmount()}),me();var a=O(),r=_(a);Ls(r,t,"default",{},null),d(e,a),L()}var Hn=k('<div class="flex h-full w-full flex-col"><div class="flex-none"><!></div> <div class="relative min-h-0 flex-1"><!></div></div>');function ni(e,t){F(t,!0);const s=new ta({defaultOptions:{queries:{enabled:dr}}});js(()=>{{const{initSettings:a}=Ra();a()}}),yr(e,{i18n:ur,children:(a,r)=>{Bn(a,{client:s,children:(l,n)=>{var u=Hn(),f=C(u),v=C(f);In(v,{}),A(f);var p=Q(f,2),c=C(p);H(c,()=>t.children),A(p),A(u),d(l,u)},$$slots:{default:!0}})},$$slots:{default:!0}}),L()}export{ni as component,ri as universal};
