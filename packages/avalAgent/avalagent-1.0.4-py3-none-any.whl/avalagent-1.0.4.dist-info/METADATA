Metadata-Version: 2.4
Name: avalAgent
Version: 1.0.4
Summary: AI agent wrapper for AvalAI API with retry and model fallback support
Author-email: Amirhossein Derhami <D3rhami@gmail.com>
License: MIT
Project-URL: AvalAi-Homepage, https://avalai.ir
Project-URL: Source, https://github.com/D3rhami/avalAgent
Project-URL: Bug-Reports, https://github.com/D3rhami/avalAgent/issues
Project-URL: Documentation, https://github.com/D3rhami/avalAgent#readme
Project-URL: Changelog, https://github.com/D3rhami/avalAgent/releases
Keywords: ai,chatbot,avalai,langchain,openai-wrapper
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Operating System :: OS Independent
Classifier: License :: OSI Approved :: MIT License
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pydantic>=2.0.0
Requires-Dist: requests>=2.25.0
Requires-Dist: langchain-core>=0.1.0
Requires-Dist: langchain-openai>=0.0.1
Requires-Dist: openai>=1.0.0
Requires-Dist: tabulate~=0.9.0
Dynamic: license-file

๐ [To change the language to English click here.](README_EN.md)

# AvalAgent 1.0.4

ฺฉ ฺฉูุงูุช ูพุงุชูู ุจุฑุง ุชุนุงูู ุจุง ูุฏูโูุง ููุด ูุตููุน ุงุฒ ุทุฑู API ุณุงุฒฺฏุงุฑ ุจุง OpenAI ุดุฑฺฉุช AvalAIุ ุจุง ูฺฺฏโูุง ูุงููุฏ ุชูุงุดโูุง ูุฌุฏุฏ ุฎูุฏฺฉุงุฑุ ูพุดุชุจุงู ุงุฒ ูุฏูโูุง ุฌุงฺฏุฒูุ ุญุงูุธูู ูฺฉุงูููุ ุจูุจูุฏ ูพุฑุณุดโูุง ู ูุฏุฑุช ุฎุทุงูุง ูู.

## ูฺฺฏโูุง

* ๐ **ูพุดุชุจุงู ุงุฒ ฺูุฏู ูุฏู**: ูุงุจู ุงุณุชูุงุฏู ุจุง GPT-4oุ DeepSeekุ Claude-3 ู ุณุงุฑ ูุฏูโูุง ูพุดุชุจุงูโุดุฏู ุชูุณุท AvalAI
* ๐ **ุชูุงุดโูุง ูุฌุฏุฏ ุฎูุฏฺฉุงุฑ ู ูพุดุชุจุงู ุงุฒ ูุฏูโูุง ุฌุงฺฏุฒู**: ุฏุฑ ุตูุฑุช ุนุฏู ููููุช ูุฏู ุงุตูุ ุจู ูุฏูโูุง ุซุงููู ูุฑุงุฌุนู ูโฺฉูุฏ
* ๐ง **ุญุงูุธูู ูฺฉุงููู**: ุญูุธ ุฒูููู ฺฏูุชฺฏู ุฏุฑ ุชุนุงููุงุช (ูุงุจู ุชูุธู)
* ๐พ **ุฐุฎุฑูโุณุงุฒ ุญุงูุธู**: ุงูฺฉุงู ุฐุฎุฑู ู ุจุงุฑฺฏุฐุงุฑ ุชุงุฑุฎฺูู ูฺฉุงููุงุช ุฏุฑ ุฏุณฺฉ
* ๐๏ธ **ุจูุจูุฏ ูพุฑุณุดโูุง**: ุชุจุฏู ูพุฑุณุดโูุง ุฎุงู ุจู ูพุฑุณุดโูุง ุณุงุฎุชุงุฑุงูุชู ู ุจููู
* ๐ **ูุฏุฑุช ุงูู ฺฉูุฏ API**: ุงุณุชูุงุฏู ุงุฒ `SecretStr` ุจุฑุง ุญูุงุธุช ุงุฒ ฺฉูุฏ API
* ๐ **ุซุจุช ฺฏุฒุงุฑุด ุฏุงุฎู**: ุซุจุช ฺฏุฒุงุฑุดโูุง ุฏูู ุจุฑุง ุงุดฺฉุงูโุฒุฏุง ู ูุธุงุฑุช ุจุฑ ุฏุฑุฎูุงุณุชโูุง API
* โก **ฺฉูพุงุฑฺูโุณุงุฒ ุจุง LangChain**: ุณุงุฒฺฏุงุฑ ุจุง ูุฑูุชโูุง ูพุงู LangChain
* ๐ **ูุธุงุฑุช ุจุฑ ุงุนุชุจุงุฑ ูุตุฑู**: ุจุฑุฑุณ ูุฒุงู ุงุณุชูุงุฏู ู ุงุนุชุจุงุฑ ุจุงูโูุงูุฏู ุงุฒ API

## ูุตุจ

```bash
pip install avalAgent
```



## ุงุณุชูุงุฏูู ูพุงู

```python
from avalAgent.agent import AvalAgent
from pydantic import SecretStr

# ููุฏุงุฑุฏู ุงููู ุจุง ฺฉูุฏ API
agent = AvalAgent(api_key=SecretStr("your-api-key-here"))

# ุฏุฑุงูุช ูพุงุณุฎ
response = agent.get_response(
    system_prompt="ุดูุง ฺฉ ุฏุณุชุงุฑ ููุฏ ูุณุชุฏ.",
    query="ูุญุงุณุจุงุช ฺฉูุงูุชูู ุฑุง ุจู ุฒุจุงู ุณุงุฏู ุชูุถุญ ุจุฏู"
)

print(response)
```



## ูุซุงูโูุง

### ูุซุงู ฑ: ุงุณุชูุงุฏู ุจุง ุชูุธูุงุช ูพุดโูุฑุถ

```python
from avalAgent.agent import AvalAgent
from pydantic import SecretStr

agent = AvalAgent(api_key=SecretStr("your-api-key-here"))

response = agent.get_response(
    system_prompt="ุดูุง ฺฉ ุฏุณุชุงุฑ ููุฏ ูุณุชุฏ.",
    query="ูุธุฑูู ูุณุจุช ุฑุง ุชูุถุญ ุจุฏู"
)

print(response)
```



### ูุซุงู ฒ: ุณูุงุฑุดโุณุงุฒ ูุณุช ุงูููุช ูุฏูโูุง ู ุชุนุฏุงุฏ ุชูุงุดโูุง

```python
from avalAgent.agent import AvalAgent
from pydantic import SecretStr

agent = AvalAgent(
    api_key=SecretStr("your-api-key-here"),
    model_priority_list=[
        "gpt-4o",
        "deepseek-chat",
        "anthropic.claude-3-5-sonnet-20241022-v2:0"
    ],
    stop_after_attempt=5
)

response = agent.get_response(
    system_prompt="ุดูุง ฺฉ ฺฉุงุฑุดูุงุณ ูู ูุณุชุฏ.",
    query="ุจูุงฺฉโฺู ฺฺฏููู ฺฉุงุฑ ูโฺฉูุฏุ",
    model="gpt-4o",
    temperature=0.2
)

print(response)
```



### ูุซุงู ณ: ุงุณุชูุงุฏู ุงุฒ ุญุงูุธูู ูฺฉุงููู

```python
from avalAgent.agent import AvalAgent
from pydantic import SecretStr

# ููุฏุงุฑุฏู ุงููู ุจุง ุญุงูุธู ูุนุงู
agent = AvalAgent(
    api_key=SecretStr("your-api-key-here"),
    use_memory=True,
    max_memory_size=5
)

# ูพุฑุณุด ุงูู ุจุฑุง ุงุฌุงุฏ ุฒููู
response1 = agent.get_response(
    system_prompt="ุดูุง ฺฉ ุฏุณุชุงุฑ ุณูุฑ ูุณุชุฏ.",
    query="ุฌุงุฐุจูโูุง ฺฏุฑุฏุดฺฏุฑ ูพุงุฑุณ ุฑุง ูุนุฑู ฺฉู"
)

# ูพุฑุณุด ุฏูู ุจุง ุจูุฑูโฺฏุฑ ุงุฒ ุญุงูุธู
response2 = agent.get_response(
    query="ฺฉุฏุงูโฺฉ ุจุฑุง ฺฉูุฏฺฉุงู ููุงุณุจ ูุณุชูุฏุ"
)

print(response2)
```



### ูุซุงู ด: ุญุงูุธูู ูพุงุฏุงุฑ ุจู ุฌูุณุงุช

```python
from avalAgent.agent import AvalAgent
from pydantic import SecretStr

# ุฌูุณูู ุงูู - ุฐุฎุฑูู ุญุงูุธู
agent1 = AvalAgent(
    api_key=SecretStr("your-api-key-here"),
    use_memory=True,
    persist_memory=True,
    memory_file="travel_chat.json"
)

response = agent1.get_response(
    system_prompt="ุดูุง ฺฉ ุฏุณุชุงุฑ ุณูุฑ ูุณุชุฏ.",
    query="ุจูุชุฑู ููุฒูโูุง ููุฏู ฺฉุฏุงูโุงูุฏุ"
)

# ุฌูุณูู ุฏูู - ุจุงุฑฺฏุฐุงุฑ ุญุงูุธูู ูุจู
agent2 = AvalAgent(
    api_key=SecretStr("your-api-key-here"),
    use_memory=True,
    persist_memory=True,
    memory_file="travel_chat.json"
)

# ุงุฏุงููู ฺฏูุชฺฏู
response = agent2.get_response(
    query="ฺฉุฏุงูโฺฉ ูุฑูุฏ ุฑุงฺฏุงู ุฏุงุฑูุฏุ"
)

print(response)
```



### ูุซุงู ต: ุจูุจูุฏ ูพุฑุณุด ุจุฑุง ูพุณุช ุงูุณุชุงฺฏุฑุงู

```python
from avalAgent.agent import AvalAgent
from pydantic import SecretStr

agent = AvalAgent(api_key=SecretStr("your-api-key-here"))

raw_prompt = """
ูู ุจู ฺฉ ฺฉูพุดู ูุงุฑุณ ุจุฑุง ุงูุณุชุงฺฏุฑุงู ูุงุฒ ุฏุงุฑู ุจุฑุง ูุฌููุนูู ุฌุฏุฏ ฺฉูโูุง ููฺฉุณ ูุง.
ฺฉูพุดู ุจุงุฏ:
- ุดุงูู ฒ ุชุง ณ ูพุงุฑุงฺฏุฑุงู ฺฉูุชุงู ุจุงุดุฏ
- ุงุฒ ุงููุฌโูุง ุจูโุตูุฑุช ููุงุณุจ ุงุณุชูุงุฏู ฺฉูุฏ
- ุจุฑ ุฑู ููุฑ ุณุงุฎุช ุชุฃฺฉุฏ ฺฉูุฏ
- ุดุงูู ฺฉ ูุฑุงุฎูุงู ุจุฑุง ุงูุฏุงู ุจุงุดุฏ
- ูุญู ุฏูุณุชุงูู ุงูุง ุดฺฉ ุฏุงุดุชู ุจุงุดุฏ
"""

enhanced_prompt = agent.enhance_prompt(raw_prompt)
print(enhanced_prompt)

# ุณูพุณ ุงุณุชูุงุฏู ุงุฒ ูพุฑุณุด ุจูุจูุฏ ุงูุชู
response = agent.get_response(
    system_prompt=enhanced_prompt,
    query="ณ ฺฏุฒููู ฺฉูพุดู ุชููุฏ ฺฉู"
)
print(response)
```



### ูุซุงู ถ: ูุธุงุฑุช ุจุฑ ุงุทูุงุนุงุช ุงุนุชุจุงุฑ

```python
from avalAgent.agent import AvalAgent
from pydantic import SecretStr

agent = AvalAgent(api_key=SecretStr("your-api-key-here"))

# ฺฏุฒูู ฑ: ููุท ุฏุฑุงูุช ุฏุงุฏู
credit_data = agent.get_credit_info()

# ฺฏุฒูู ฒ: ุซุจุช ุฌุฏูู ูุฑูุชโุดุฏู
agent.log_credit_info_table()
```



## ุจูโุฑูุฒุฑุณุงู: ูุณุฎูู 1.0.4

### ูฺฺฏโูุง ุฌุฏุฏ

* **ุจูุจูุฏ ูพุฑุณุด**: ูุชุฏ ุฌุฏุฏ `enhance_prompt()` ุจุฑุง ุชุจุฏู ูพุฑุณุดโูุง ุฎุงู ุจู ูุฑูุชโูุง ุณุงุฎุชุงุฑุงูุชู
* **ุจูุจูุฏ ูุฏุฑุช ุฎุทุง**: ุงุนุชุจุงุฑุณูุฌ ููโุชุฑ ู ูพุงูโูุง ุฎุทุง ุฏููโุชุฑ
* **ูพฺฉุฑุจูุฏ JSON**: ูพุดุชุจุงู ุงุฒ ูพฺฉุฑุจูุฏ ูุจุชู ุจุฑ JSON ุฏุฑ ุจูุจูุฏ ูพุฑุณุด([Sider][1])

### ุจูุจูุฏูุง

* **ุชุบุฑุงุช API**:

  * `get_response()` ุงฺฉููู ุงุฒ ูพุงุฑุงูุชุฑูุง `**config` ุจูโุฌุง ุขุฑฺฏููุงูโูุง ุฌุฏุงฺฏุงูู ุงุณุชูุงุฏู ูโฺฉูุฏ
  * ุงุนุชุจุงุฑุณูุฌ ูพุงุฑุงูุชุฑูุง ุจูโุตูุฑุช ฺฉููุงุฎุช ุฏุฑ ุชูุงู ูุชุฏูุง
* **ูุฏุฑุช ุญุงูุธู**:

  * ุจูุจูุฏ ุฏุฑ ูุฏุฑุช ููุงุฑุฏ ุฎุงุต ุฏุฑ ุฐุฎุฑูโุณุงุฒ ุญุงูุธู

### ุชุบุฑุงุช

* **ุชุบุฑุงุช ุฑูุชุงุฑ**:

  * `get_response()` ุงฺฉููู ุจูโุฌุง ุงุฌุงุฏ ุฎุทุง ุจุฑุง ูพุฑุณุดโูุง ุฎุงูุ `None` ุจุฑูโฺฏุฑุฏุงูุฏ
  * ุงุนุชุจุงุฑุณูุฌ ุณุฎุชโฺฏุฑุงููโุชุฑ ุฏุฑ `create_structured_prompt()`
* **ูุณุชูุฏุณุงุฒ**:

  * ุงูุฒูุฏู ุฑุงูููุง ูุงุฑุณ
  * ูุณุชูุฏุณุงุฒ ุฏููโุชุฑ ูพุงุฑุงูุชุฑูุง

## ูพุดุชุจุงู ุงุฒ ูุฏูโูุง

ูุฏูโูุง ุณุงุฒฺฏุงุฑ ุจุง OpenAI ฺฉู ุงุฒ ุทุฑู API AvalAI ุฏุฑ ุฏุณุชุฑุณ ูุณุชูุฏ.

## ูุฏุฑุช ุฎุทุง

ุงู ุนุงูู ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ:

* ุชูุงุดโูุง ูุงูููู ุฑุง ุชุง ณ ุจุงุฑ ุชฺฉุฑุงุฑ ูโฺฉูุฏ (ุจูโุตูุฑุช ูพุดโูุฑุถ)
* ุฏุฑ ุตูุฑุช ุนุฏู ููููุช ูุฏู ุงุตูุ ุจู ูุฏูโูุง ุฌุงฺฏุฒู ูุฑุงุฌุนู ูโฺฉูุฏ
* ุจุง ูุญุฏูุฏุชโูุง ูุฑุฎ ู ุฎุทุงูุง ุดุจฺฉู ุจูโุตูุฑุช ูุคุซุฑ ุจุฑุฎูุฑุฏ ูโฺฉูุฏ
* ฺฏุฒุงุฑุดโูุง ุฏูู ุจุฑุง ุงุดฺฉุงูโุฒุฏุง ูุฑุงูู ูโฺฉูุฏ

## ๐ ูุดฺฉูุงุช ู ูพุดุชุจุงู

ุงฺฏุฑ ุจุงฺฏ ุง ุฏุฑุฎูุงุณุช ูฺฺฏ ุฏุงุฑุฏุ ูุทูุงู ฺฉ issue ุฏุฑ [ุงูุฌุง](https://github.com/D3rhami/avalai-agent/issues) ุจุงุฒ ฺฉูุฏ.

## LICENSE

ูุฌูุฒ MIT - ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ ุจู ูุงู [LICENSE](LICENSE) ูุฑุงุฌุนู ฺฉูุฏ.
