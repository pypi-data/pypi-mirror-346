(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9242],{2511:(e,t,a)=>{"use strict";var l,n;a.d(t,{A:()=>l,v:()=>n}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(l||(l={})),function(e){e.Having="HAVING",e.Where="WHERE"}(n||(n={}))},5815:(e,t,a)=>{"use strict";a.d(t,{SO:()=>o,Sg:()=>s,pA:()=>i});var l=a(87903),n=a(15151),r=a(2511);const i=(e,t,a=!1,l=!1)=>{const n={};return a?n.adhoc_filters=[{expressionType:r.A.Sql,clause:r.v.Where,sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(n.filters=[{col:e,op:l?"NOT IN":"IN",val:t}]),n},o=(e,t,a)=>{const l=[];return null!=t&&t!==a&&l.push({col:e,op:">=",val:t}),null!=a&&a!==t&&l.push({col:e,op:"<=",val:a}),null!=a&&null!=t&&a===t&&l.push({col:e,op:"==",val:a}),l.length?{filters:l}:{}};function s({timeFormatter:e,numberFormatter:t}={}){return(a,r)=>{if(null==a)return n.mu;if("boolean"==typeof a)return a?n.PU:n.qC;if(r===l.s.Boolean)try{return JSON.parse(String(a).toLowerCase())?n.PU:n.qC}catch{return n.qC}return"string"==typeof a?a:"bigint"==typeof a?String(a):e&&r===l.s.Temporal?e(a):t&&"number"==typeof a&&r===l.s.Numeric?t(a):String(a)}}},62216:e=>{e.exports=function(e){return void 0===e}},64687:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,e:()=>r});var l=a(1932),n=a(96540);function r(e){var t=(0,n.useState)((function(){return(0,l.CN)("function"==typeof e?e():e,!0)})),a=t[1];return[t[0],(0,n.useCallback)((function(e){a("function"==typeof e?(0,l.jM)(e):(0,l.CN)(e))}),[])]}function i(e,t,a){var r=(0,n.useMemo)((function(){return(0,l.jM)(e)}),[e]);return(0,n.useReducer)(r,t,a)}},66861:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var l=a(62216),n=a.n(l),r=a(38221),i=a.n(r),o=a(96540),s=a(96453),u=a(58863),c=a(62952),d=a(86444),f=a(94465),p=a(78518),h=a(64687),m=a(15595),v=a(40570),S=a(27023),g=a(3175),F=a(10504),w=a(5815),M=a(67874),b=a(2445);function y(e,t){switch(t.type){case"ownState":return e.ownState={...e.ownState,...t.ownState},e;case"filterState":return JSON.stringify(e.extraFormData)!==JSON.stringify(t.extraFormData)&&(e.extraFormData=t.extraFormData),JSON.stringify(e.filterState)!==JSON.stringify(t.filterState)&&(e.filterState={...e.filterState,...t.filterState}),e;default:return e}}const C=(0,s.I4)(v.A)`
  display: flex;
  align-items: center;
  width: 100%;

  .exclude-select {
    width: 80px;
    flex-shrink: 0;
  }

  &.ant-space {
    .ant-space-item {
      width: ${({inverseSelection:e,appSection:t})=>e&&t!==u.$s.FilterConfigModal?"auto":"100%"};
    }
  }
`,x=new Map;function N(e){const{coltypeMap:t,data:a,filterState:l,formData:r,height:s,isRefreshing:v,width:N,setDataMask:A,setHoveredFilter:O,unsetHoveredFilter:D,setFocusedFilter:I,unsetFocusedFilter:Y,setFilterActive:H,appSection:$,showOverflow:k,parentRef:E,inputRef:J,filterBarOrientation:V}=e,{enableEmptyFilter:L,creatable:q,multiSelect:R,showSearch:T,inverseSelection:j,defaultToFirstItem:P,searchAllOptions:B}=r,Q=(0,o.useMemo)((()=>(0,c.A)(r.groupby).map(d.A)),[r.groupby]),[U]=Q,[W]=(0,o.useState)(t),[_,z]=(0,o.useState)(""),[G,K]=(0,h.A)(y,{extraFormData:{},filterState:l}),X=t[U],Z=(0,o.useMemo)((()=>(0,w.Sg)({timeFormatter:(0,f.A)(a.map((e=>e[U])))})),[a,U]),[ee,te]=(0,o.useState)(!!n()(null==l?void 0:l.excludeFilterValues)||(null==l?void 0:l.excludeFilterValues)),ae=(0,o.useRef)(ee),le=(0,o.useRef)(!1);(0,o.useEffect)((()=>{const e=x.get(r.nativeFilterId);le.current=void 0!==e&&e!==V,V&&x.set(r.nativeFilterId,V)}),[V]);const ne=(0,o.useCallback)((e=>{const t=L&&!j&&!(null!=e&&e.length),a=j&&null!=e&&e.length?(0,p.t)(" (excluded)"):"";K({type:"filterState",extraFormData:(0,w.pA)(U,e,t,ee&&j),filterState:{...l,label:null!=e&&e.length?`${(e||[]).map((e=>Z(e,X))).join(", ")}${a}`:void 0,value:$===u.$s.FilterConfigModal&&P?void 0:e,excludeFilterValues:ee}})}),[$,U,X,P,K,L,j,ee,JSON.stringify(l),Z]),re=$===u.$s.FilterConfigModal&&P,ie=(0,o.useMemo)((()=>i()((e=>{z(e),B&&K({type:"ownState",ownState:{coltypeMap:W,search:e}})}),S.Qs)),[K,W,B]),oe=(0,o.useCallback)((()=>{Y(),ie("")}),[ie,Y]),se=(0,o.useCallback)((e=>{const t=null===e?[null]:(0,c.A)(e);0===t.length?ne(null):ne(t)}),[ne]),ue=0===a.length?(0,p.t)("No data"):(0,p.tn)("%s option","%s options",a.length,a.length),ce=(0,o.useMemo)((()=>{if(l.validateMessage)return(0,b.Y)(M.Mo,{status:l.validateStatus,children:l.validateMessage})}),[l.validateMessage,l.validateStatus]),de=(0,o.useMemo)((()=>[...new Set([...a.map((e=>e[U]))])].map((e=>({label:Z(e,X),value:e,isNewOption:!1})))),[a,X,U,Z]),fe=(0,o.useMemo)((()=>(!_||R||(0,g.Kz)(_,de,!0)||de.unshift({label:_,value:_,isNewOption:!0}),de)),[R,_,de]),pe=(0,o.useCallback)(((e,t)=>{const a=(0,g.qw)("label");return r.sortAscending?a(e,t):a(t,e)}),[r.sortAscending]);return(0,o.useEffect)((()=>{if(!le.current)if(re)ne(null);else if(P){const e=a[0]?Q.map((e=>a[0][e])):null;void 0!==(null==e?void 0:e[0])&&ne(e)}else null!=r&&r.defaultValue&&ne(r.defaultValue)}),[re,L,P,null==r?void 0:r.defaultValue,a,Q,U,j]),(0,o.useEffect)((()=>{A(G)}),[JSON.stringify(G)]),(0,o.useEffect)((()=>{var e;ae.current!==ee&&(K({type:"filterState",extraFormData:(0,w.pA)(U,l.value,!(null!=(e=l.value)&&e.length),ee&&j),filterState:{...l,excludeFilterValues:ee}}),ae.current=ee)}),[ee]),(0,b.Y)(M.j3,{height:s,width:N,children:(0,b.Y)(M.JF,{validateStatus:l.validateStatus,extra:ce,children:(0,b.FD)(C,{appSection:$,inverseSelection:j,children:[$!==u.$s.FilterConfigModal&&j&&(0,b.Y)(m.l6,{className:"exclude-select",value:`${ee}`,options:[{value:"true",label:(0,p.t)("is not")},{value:"false",label:(0,p.t)("is")}],onChange:e=>{te("true"===e)}}),(0,b.Y)(m.l6,{name:r.nativeFilterId,allowClear:!0,allowNewOptions:!B&&!1!==q,allowSelectAll:!B,value:l.value||[],disabled:re,getPopupContainer:k?()=>(null==E?void 0:E.current)||document.body:e=>(null==e?void 0:e.parentNode)||document.body,showSearch:T,mode:R?"multiple":"single",placeholder:ue,onClear:()=>ie(""),onSearch:ie,onBlur:oe,onFocus:I,onMouseEnter:O,onMouseLeave:D,onChange:se,ref:J,loading:v,oneLine:V===F.QI.Horizontal,invertSelection:j&&ee,options:fe,sortComparator:pe,onDropdownVisibleChange:H,className:"select-container"})]})})})}},67874:(e,t,a)=>{"use strict";a.d(t,{JF:()=>o,Mo:()=>s,YH:()=>r,j3:()=>i});var l=a(96453),n=a(86523);const r=0,i=l.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===r?"100%":`${e}px`};
`,o=(0,l.I4)(n.A)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,s=l.I4.div`
  color: ${({theme:e,status:t="error"})=>{var a;return null==(a=e.colors[t])?void 0:a.base}};
`},94465:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(53705),n=a(94387),r=a(73091);function i(e,t=!1){const a=t?l.DC:l.aL,i=a("%Y-%m-%d %H:%M:%S.%L"),o=a("%Y-%m-%d %H:%M:%S"),s=a("%Y-%m-%d %H:%M"),u=a("%Y-%m-%d %H:%M"),c=a("%Y-%m-%d"),d=a("%Y-%m-%d"),f=a("%Y"),{hasMillisecond:p,hasSecond:h,hasMinute:m,hasHour:v,isNotFirstDayOfMonth:S,isNotFirstMonth:g}=t?n.m:n.w;let F=f;return e.forEach((e=>{"bigint"!=typeof e&&(F===f&&g(e)&&(F=d),F===d&&S(e)&&(F=c),F===c&&v(e)&&(F=u),F===u&&m(e)&&(F=s),F===s&&h(e)&&(F=o),F===o&&p(e)&&(F=i))})),new r.A({description:"Use the finest grain in an array of dates to format all dates in the array",formatFunc:F,id:"finest_temporal_grain",label:"Format temporal columns with the finest grain",useLocalTime:t})}}}]);