Metadata-Version: 2.1
Name: nonebot-plugin-alconna
Version: 0.57.6
Summary: Alconna Adapter for Nonebot
Keywords: command,alconna,nonebot
Author-Email: RF-Tar-Railt <rf_tar_railt@qq.com>
License: MIT
Project-URL: homepage, https://github.com/nonebot/plugin-alconna
Project-URL: repository, https://github.com/nonebot/plugin-alconna
Requires-Python: >=3.9
Requires-Dist: tarina<0.7,>=0.6.8
Requires-Dist: nepattern<1.0,>=0.7.7
Requires-Dist: arclet-alconna<2.0,>=1.8.35
Requires-Dist: arclet-alconna-tools>=0.7.10
Requires-Dist: importlib-metadata>=4.13.0
Requires-Dist: nonebot2>=2.3.0
Requires-Dist: nonebot-plugin-waiter>=0.6.0
Description-Content-Type: text/markdown

<p align="center">
  <a href="https://nonebot.dev/docs/next/best-practice/alconna/"><img src="https://v2.nonebot.dev/logo.png" width="200" height="200" alt="nonebot"></a>
</p>

<div align="center">

# NoneBot Plugin Alconna

_âœ¨ Alconna Usage For NoneBot2 âœ¨_

_âœ¨ All Receive in One, And One Send All âœ¨_

</div>

<p align="center">
  <a href="https://raw.githubusercontent.com/nonebot/plugin-alconna/master/LICENSE">
    <img src="https://img.shields.io/github/license/nonebot/plugin-alconna.svg" alt="license">
  </a>
  <a href="https://pypi.python.org/pypi/nonebot-plugin-alconna">
    <img src="https://img.shields.io/pypi/v/nonebot-plugin-alconna.svg" alt="pypi">
  </a>
  <img src="https://img.shields.io/badge/python-3.9+-blue.svg" alt="python">
</p>

è¯¥æ’ä»¶æä¾›äº† [Alconna](https://github.com/ArcletProject/Alconna) çš„ [NoneBot2](https://github.com/nonebot/nonebot2) é€‚é…ç‰ˆæœ¬ä¸å·¥å…·

## ç‰¹æ€§

- å®Œæ•´çš„ Alconna ç‰¹æ€§æ”¯æŒ
- è‡ªåŠ¨å›å¤å‘½ä»¤å¸®åŠ©ä¿¡æ¯é€‰é¡¹
- è·¨å¹³å°çš„æ¥æ”¶ä¸å‘é€æ¶ˆæ¯(è¢«åŠ¨+ä¸»åŠ¨)
- å¯¹**22ç§é€‚é…å™¨**çš„æ”¶å‘æ¶ˆæ¯æ”¯æŒ
- æ¯” `got-reject` æ›´å¼ºå¤§çš„è¡¥å…¨ä¼šè¯æœºåˆ¶
- å¤šç§å†…ç½®æ’ä»¶ (echoï¼Œhelpï¼Œlang)
- i18n æ”¯æŒ

## è®¨è®º

QQ äº¤æµç¾¤: [é“¾æ¥](https://jq.qq.com/?_wv=1027&k=PUPOnCSH)


## ä½¿ç”¨æ–¹æ³•

NoneBot æ–‡æ¡£: [ğŸ“–è¿™é‡Œ](https://nonebot.dev/docs/next/best-practice/alconna/)
ä»“åº“å†…ä»‹ç»: [ğŸ“¦è¿™é‡Œ](/docs.md)

## è·¨å¹³å°æ¶ˆæ¯

```python
from nonebot import get_driver
from nonebot_plugin_alconna import Target, UniMessage, SupportScope, on_alconna, message_recall

driver = get_driver()
test = on_alconna("test")

@test.handle()
async def handle_test():
    r = await UniMessage.image(path="path/to/img").send()
    if r.recallable:
        await r.reply("å›¾ç‰‡å·²å‘é€ï¼Œ10ç§’åæ’¤å›")
        await r.recall(delay=10, index=0)

@test.got("foo", prompt=UniMessage.template("{:Reply($message_id)}è¯·è¾“å…¥å›¾ç‰‡"))
async def handle_foo():
    await test.send("å›¾ç‰‡å·²æ”¶åˆ°, å³å°†æ’¤å›")
    await message_recall()

@driver.on_startup
async def _():
    await Target.group("123456789", SupportScope.qq_client).send(UniMessage.image(path="test.png"))
```

## æ”¯æŒæƒ…å†µ

### æ”¯æŒçš„é€‚é…å™¨

| åè®®åç§°                                                                | è·¯å¾„                                   |
|---------------------------------------------------------------------|--------------------------------------|
| [OneBot åè®®](https://onebot.dev/)                                    | adapters.onebot11, adapters.onebot12 |
| [Telegram](https://core.telegram.org/bots/api)                      | adapters.telegram                    |
| [é£ä¹¦](https://open.feishu.cn/document/home/index)                    | adapters.feishu                      |
| [GitHub](https://docs.github.com/en/developers/apps)                | adapters.github                      |
| [QQ bot](https://github.com/nonebot/adapter-qq)                     | adapters.qq                          |
| [é’‰é’‰](https://open.dingtalk.com/document/)                           | adapters.ding                        |
| [Console](https://github.com/nonebot/adapter-console)               | adapters.console                     |
| [å¼€é»‘å•¦](https://developer.kookapp.cn/)                                | adapters.kook                        |
| [Mirai](https://docs.mirai.mamoe.net/mirai-api-http/)               | adapters.mirai                       |
| [Ntchat](https://github.com/JustUndertaker/adapter-ntchat)          | adapters.ntchat                      |
| [MineCraft](https://github.com/17TheWord/nonebot-adapter-minecraft) | adapters.minecraft                   |
| [Walle-Q](https://github.com/onebot-walle/nonebot_adapter_walleq)   | adapters.onebot12                    |
| [Discord](https://github.com/nonebot/adapter-discord)               | adapters.discord                     |
| [Red åè®®](https://github.com/nonebot/adapter-red)                    | adapters.red                         |
| [Satori](https://github.com/nonebot/adapter-satori)                 | adapters.satori                      |
| [Dodo IM](https://github.com/nonebot/adapter-dodo)                  | adapters.dodo                        |
| [Kritor](https://github.com/nonebot/adapter-kritor)                 | adapters.kritor                      |
| [Tailchat](https://github.com/eya46/nonebot-adapter-tailchat)       | adapters.tailchat                    |
| [Mail](https://github.com/mobyw/nonebot-adapter-mail)               | adapters.mail                        |
| [å¾®ä¿¡å…¬ä¼—å·](https://github.com/YangRucheng/nonebot-adapter-wxmp)        | adapters.wxmp                        |
| [é»‘ç›’è¯­éŸ³](https://github.com/lclbm/adapter-heybox)                     | adapters.heybox                      |
| [Gewechat](https://github.com/Shine-Light/nonebot-adapter-gewechat) | adapters.gewechat                    |

### æ”¯æŒçš„æ¶ˆæ¯å…ƒç´ 

- âœ…: æ”¯æŒ(æ¥æ”¶å’Œå‘é€)
- â¬‡ï¸: æ”¯æŒæ¥æ”¶
- â¬†ï¸: æ”¯æŒå‘é€
- â–: æƒ…å†µä¸å­˜åœ¨
- âŒ: æ’ä»¶/é€‚é…å™¨æœªæ”¯æŒ
- ğŸš«: åè®®æœªæ”¯æŒ
- (ğŸš§): è®¡åˆ’ä¸­æˆ–éƒ¨åˆ†æ”¯æŒæˆ–ä¸ºå®éªŒæ€§æ”¯æŒ

> [!WARNING]
> æ–œä½“çš„åè®®åç§°æ„å‘³ç€å…¶åè®®æˆ–å…¶é€‚é…å™¨é•¿æ—¶é—´æœªç»´æŠ¤æˆ–å·²å¤±æ•ˆ

| å…ƒç´ \é€‚é…å™¨           | OneBot V11 | OneBot V12 | Telegram | é£ä¹¦ | Github | QQ-API | _é’‰é’‰_ | Console | å¼€é»‘å•¦ | Mirai | _Ntchat_ | MineCraft | Discord | _Red_ | Satori | Dodo IM | Kritor | Tailchat | Mail | å¾®ä¿¡å…¬ä¼—å· | é»‘ç›’è¯­éŸ³ | Gewechat |
|------------------|------------|------------|----------|----|--------|--------|------|---------|-----|-------|----------|-----------|---------|-------|--------|---------|--------|----------|------|-------|------|----------|
| æ–‡æœ¬ Text          | âœ…          | âœ…          | âœ…        | âœ…  | âœ…      | âœ…      | âœ…    | âœ…       | âœ…   | âœ…     | âœ…        | âœ…         | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | âœ…        | âœ…    | âœ…     | âœ…    | âœ…        |
| æ ·å¼æ–‡æœ¬ Styled Text | ğŸš«         | ğŸš«         | âœ…        | âŒ  | âœ…      | âœ…      | âŒ    | âœ…       | âœ…   | ğŸš«    | ğŸš«       | âœ…         | ğŸš«      | ğŸš«    | âœ…      | ğŸš«      | ğŸš«     | âœ…        | âœ…    | ğŸš«    | ğŸš«   | ğŸš«       | 
| æåŠç”¨æˆ· At(user)    | âœ…          | âœ…          | âœ…        | âœ…  | â¬†ï¸     | âœ…      | âœ…    | ğŸš«      | âœ…   | âœ…     | âŒ        | ğŸš«        | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | âœ…        | â¬†ï¸   | ğŸš«    | â¬†ï¸   | âœ…        |
| æåŠè§’è‰² At(role)    | ğŸš«         | ğŸš«         | ğŸš«       | ğŸš« | ğŸš«     | ğŸš«     | ğŸš«   | ğŸš«      | âœ…   | ğŸš«    | ğŸš«       | ğŸš«        | âœ…       | ğŸš«    | âœ…      | âœ…       | ğŸš«     | ğŸš«       | ğŸš«   | ğŸš«    | ğŸš«   | ğŸš«       |
| æåŠé¢‘é“ At(channel) | ğŸš«         | ğŸš«         | ğŸš«       | ğŸš« | ğŸš«     | âœ…      | ğŸš«   | ğŸš«      | âœ…   | ğŸš«    | ğŸš«       | ğŸš«        | âœ…       | ğŸš«    | âœ…      | âœ…       | ğŸš«     | âœ…        | â¬†ï¸   | ğŸš«    | ğŸš«   | ğŸš«       |
| æäº¤å…¨ä½“ AtAll       | âœ…          | âœ…          | ğŸš«       | âœ…  | ğŸš«     | âœ…      | âœ…    | ğŸš«      | âœ…   | âœ…     | ğŸš«       | ğŸš«        | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | ğŸš«       | ğŸš«   | ğŸš«    | ğŸš«   | âœ…        | 
| è¡¨æƒ… Emoji         | âœ…          | ğŸš«         | âœ…        | ğŸš« | ğŸš«     | âœ…      | ğŸš«   | âœ…       | âœ…   | âœ…     | ğŸš«       | ğŸš«        | âœ…       | âœ…     | ğŸš«     | ğŸš«      | âœ…      | âœ…        | ğŸš«   | âœ…     | ğŸš«   | âœ…        |
| å›¾ç‰‡ Image         | âœ…          | âœ…          | âœ…        | âœ…  | â¬†ï¸     | âœ…      | âœ…    | ğŸš«      | âœ…   | âœ…     | âœ…        | âŒ         | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | âœ…        | âœ…    | âœ…     | â¬†ï¸   | âœ…        |
| éŸ³é¢‘ Audio         | â¬†ï¸         | âœ…          | âœ…        | âœ…  | ğŸš«     | âœ…      | ğŸš«   | ğŸš«      | âœ…   | â¬†ï¸    | â¬‡ï¸       | ğŸš«        | â¬†ï¸      | â¬†ï¸    | âœ…      | ğŸš«      | â¬†ï¸     | ğŸš«       | âœ…    | âœ…     | ğŸš«   | âŒ        |
| è¯­éŸ³ Voice         | âœ…          | âœ…          | âœ…        | â¬†ï¸ | ğŸš«     | â¬†ï¸     | ğŸš«   | ğŸš«      | â¬†ï¸  | âœ…     | â¬‡ï¸       | ğŸš«        | â¬†ï¸      | âœ…     | â¬†ï¸     | ğŸš«      | âœ…      | ğŸš«       | âœ…    | âœ…     | ğŸš«   | âŒ        |
| è§†é¢‘ Video         | âœ…          | âœ…          | âœ…        | âœ…  | ğŸš«     | âœ…      | ğŸš«   | ğŸš«      | âœ…   | âœ…     | âœ…        | ğŸš«        | â¬†ï¸      | âœ…     | âœ…      | âœ…       | âœ…      | ğŸš«       | âœ…    | âœ…     | ğŸš«   | âŒ        |
| æ–‡ä»¶ File          | â¬‡ï¸,â¬†ï¸(ğŸš§)  | âœ…          | âœ…        | âœ…  | ğŸš«     | âœ…      | ğŸš«   | ğŸš«      | âœ…   | âœ…     | âœ…        | ğŸš«        | â¬†ï¸      | âœ…     | âœ…      | â¬‡ï¸      | â¬‡ï¸     | âœ…        | âœ…    | ğŸš«    | ğŸš«   | âŒ        |
| å›å¤ Reply         | âœ…          | âœ…          | âœ…        | âœ…  | ğŸš«     | âœ…      | ğŸš«   | ğŸš«      | âœ…   | âœ…     | âœ…        | ğŸš«        | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | âœ…        | âœ…    | ğŸš«    | â¬†ï¸   | âœ…        |
| å¼•ç”¨è½¬å‘ Reference   | âœ…          | ğŸš«         | ğŸš«       | âŒ  | ğŸš«     | ğŸš«     | ğŸš«   | ğŸš«      | ğŸš«  | âœ…     | ğŸš«       | ğŸš«        | ğŸš«      | âœ…     | âœ…      | ğŸš«      | âœ…      | ğŸš«       | ğŸš«   | ğŸš«    | ğŸš«   | âŒ        |
| è¶…çº§æ¶ˆæ¯ Hyper       | âœ…          | ğŸš«         | ğŸš«       | â¬‡ï¸ | ğŸš«     | âœ…      | ğŸš«   | ğŸš«      | âœ…   | âœ…     | âœ…        | ğŸš«        | ğŸš«      | âœ…     | ğŸš«     | ğŸš«      | âœ…      | ğŸš«       | ğŸš«   | âœ…     | ğŸš«   | âœ…        |
| æŒ‰é’® Button        | ğŸš«         | ğŸš«         | â¬†ï¸       | ğŸš« | ğŸš«     | âœ…      | ğŸš«   | ğŸš«      | ğŸš«  | ğŸš«    | ğŸš«       | â¬†ï¸        | âœ…       | ğŸš«    | âœ…      | ğŸš«      | âœ…      | ğŸš«       | ğŸš«   | ğŸš«    | ğŸš«   | ğŸš«       |
| å…¶ä½™ Other         | âœ…          | âœ…          | âœ…        | âœ…  | â–      | âœ…      | âœ…    | â–       | âœ…   | âœ…     | âœ…        | â–         | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | âœ…        | â–    | âœ…     | â–    | âœ…        |


### æ”¯æŒçš„æ¶ˆæ¯æ“ä½œ

- âœ…: æ”¯æŒ
- âŒ: æ’ä»¶/é€‚é…å™¨æœªæ”¯æŒ
- ğŸš«: åè®®æœªæ”¯æŒ
- (ğŸš§): è®¡åˆ’ä¸­æˆ–éƒ¨åˆ†æ”¯æŒæˆ–ä¸ºå®éªŒæ€§æ”¯æŒ

> [!WARNING]
> æ–œä½“çš„åè®®åç§°æ„å‘³ç€å…¶åè®®æˆ–å…¶é€‚é…å™¨é•¿æ—¶é—´æœªç»´æŠ¤æˆ–å·²å¤±æ•ˆ

| æ“ä½œ\é€‚é…å™¨        | OneBot V11 | OneBot V12 | Telegram | é£ä¹¦ | Github | QQ-API | _é’‰é’‰_ | Console | å¼€é»‘å•¦ | Mirai | _Ntchat_ | MineCraft | Discord | _Red_ | Satori | Dodo IM | Kritor | Tailchat | Mail | å¾®ä¿¡å…¬ä¼—å· | é»‘ç›’è¯­éŸ³ | Gewechat |
|---------------|------------|------------|----------|----|--------|--------|------|---------|-----|-------|----------|-----------|---------|-------|--------|---------|--------|----------|------|-------|------|----------|
| å‘é€ Send       | âœ…          | âœ…          | âœ…        | âœ…  | âœ…      | âœ…      | âœ…    | âœ…       | âœ…   | âœ…     | âœ…        | âœ…         | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | âœ…        | âœ…    | âœ…     | âœ…    | âœ…        |
| æ’¤å› Recall     | âœ…          | âœ…          | âœ…        | âœ…  | âŒ      | âœ…      | âŒ    | ğŸš«      | âœ…   | âœ…     | âŒ        | ğŸš«        | âœ…       | âœ…     | âœ…      | âœ…       | âœ…      | âœ…        | ğŸš«   | ğŸš«    | ğŸš«   | âœ…        |
| ç¼–è¾‘ Edit       | ğŸš«         | ğŸš«         | âœ…        | âœ…  | âŒ      | ğŸš«     | âŒ    | ğŸš«      | âœ…   | ğŸš«    | ğŸš«       | ğŸš«        | âœ…       | ğŸš«    | âœ…      | âœ…       | ğŸš«     | ğŸš«       | âŒ    | ğŸš«    | ğŸš«   | ğŸš«       |
| è¡¨æƒ…å“åº” Reaction | âœ…(ğŸš§)      | ğŸš«         | âœ…        | âœ…  | âŒ      | âœ…      | ğŸš«   | ğŸš«      | âœ…   | ğŸš«    | ğŸš«       | ğŸš«        | âœ…       | ğŸš«    | âœ…      | âœ…       | âœ…      | âŒ        | ğŸš«   | ğŸš«    | ğŸš«   | ğŸš«       |


## é…ç½®é¡¹

- ALCONNA_AUTO_SEND_OUTPUT : æ˜¯å¦å…¨å±€å¯ç”¨è¾“å‡ºä¿¡æ¯è‡ªåŠ¨å‘é€
- ALCONNA_USE_COMMAND_START : æ˜¯å¦å°† COMMAND_START ä½œä¸ºå…¨å±€å‘½ä»¤å‰ç¼€
- ALCONNA_GLOBAL_COMPLETION: å…¨å±€çš„è¡¥å…¨ä¼šè¯é…ç½® (ä¸ä»£è¡¨å…¨å±€å¯ç”¨è¡¥å…¨ä¼šè¯)
- ALCONNA_USE_ORIGIN: æ˜¯å¦å…¨å±€ä½¿ç”¨åŸå§‹æ¶ˆæ¯ (å³æœªç»è¿‡ to_me ç­‰å¤„ç†çš„)
- ALCONNA_USE_PARAM: æ˜¯å¦ä½¿ç”¨ç‰¹åˆ¶çš„ Param æä¾›æ›´å¥½çš„ä¾èµ–æ³¨å…¥
- ALCONNA_USE_CMD_SEP: æ˜¯å¦å°† COMMAND_SEP ä½œä¸ºå…¨å±€å‘½ä»¤åˆ†éš”ç¬¦
- ALCONNA_GLOBAL_EXTENSIONS: å…¨å±€åŠ è½½çš„æ‰©å±•, è·¯å¾„ä»¥ . åˆ†éš”, å¦‚ foo.bar.baz:DemoExtension
- ALCONNA_CONTEXT_STYLE: å…¨å±€å‘½ä»¤ä¸Šä¸‹æ–‡æ’å€¼çš„é£æ ¼ï¼ŒNone ä¸ºå…³é—­ï¼Œbracket ä¸º {...}ï¼Œparentheses ä¸º $(...)
- ALCONNA_ENABLE_SAA_PATCH: æ˜¯å¦å¯ç”¨ SAA è¡¥ä¸
- ALCONNA_APPLY_FILEHOST: æ˜¯å¦å¯ç”¨æ–‡ä»¶æ‰˜ç®¡
- ALCONNA_APPLY_FETCH_TARGETS: æ˜¯å¦å¯åŠ¨æ—¶æ‹‰å–ä¸€æ¬¡å‘é€å¯¹è±¡åˆ—è¡¨
- ALCONNA_BUILTIN_PLUGINS: éœ€è¦åŠ è½½çš„alcå†…ç½®æ’ä»¶é›†åˆ
- ALCONNA_CONFLICT_RESOLVER: å‘½ä»¤å†²çªè§£å†³ç­–ç•¥ï¼Œdefault ä¸ºä¿ç•™ä¸¤ä¸ªå‘½ä»¤ï¼Œraise ä¸ºæŠ›å‡ºå¼‚å¸¸ï¼Œignore ä¸ºå¿½ç•¥æ–°å‘½ä»¤ï¼Œreplace ä¸ºæ›¿æ¢æ—§å‘½ä»¤
- ALCONNA_RESPONSE_SELF: æ˜¯å¦å…è®¸å“åº”è‡ªå·±çš„æ¶ˆæ¯

## æ’ä»¶ç¤ºä¾‹

[demo bot](./example/plugins/demo.py)

```python
# echo æ’ä»¶
from nonebot_plugin_alconna import UniMessage, Command

@Command("echo <...content>").build(auto_send_output=True).handle()
async def _(content: UniMessage):
    await content.finish()
```