{"ast":null,"code":"import{Streamlit}from\"streamlit-component-lib\";var labelDiv=document.body.appendChild(document.createElement(\"label\"));var label=labelDiv.appendChild(document.createTextNode(\"\"));var container=document.body.appendChild(document.createElement(\"div\"));container.classList.add(\"container\");var selected_component_values=[];/**\n * The component's render function. This will be called immediately after\n * the component is initially loaded, and then again every time the\n * component gets new data from Python.\n */function onRender(event){// Get the RenderData from the event\nvar data=event.detail;if(data.theme){labelDiv.style.font=data.theme.font;labelDiv.style.color=data.theme.textColor;if(data.theme.base===\"dark\"){document.body.querySelectorAll(\".box, .caption\").forEach(function(el){el.classList.add(\"dark\");});}else{document.body.querySelectorAll(\".box, .caption\").forEach(function(el){el.classList.remove(\"dark\");});}// TODO: Gray out the component if it's disabled.\n}label.textContent=data.args[\"label\"];var images=data.args[\"images\"];var captions=data.args[\"captions\"];// console.log(captions)\nif(container.childNodes.length===0){images.forEach(function(image,i){var item=container.appendChild(document.createElement(\"div\"));item.classList.add(\"item\");if(data.args[\"use_container_width\"]===true){item.classList.add(\"stretch\");}var box=item.appendChild(document.createElement(\"div\"));box.classList.add(\"image-box\");var img=box.appendChild(document.createElement(\"img\"));img.classList.add(\"image\");img.src=image;if(captions){var caption=item.appendChild(document.createElement(\"div\"));caption.classList.add(\"caption\");caption.textContent=captions[i];}// check if i is in the index array\nif(data.args[\"indices\"]!==undefined&&data.args[\"indices\"].includes(i)){box.classList.add(\"selected\");img.classList.add(\"selected\");selected_component_values.push(i);}img.onclick=function(){// check if the image is already selected, then un-select it and remove it from the array\nif(box.classList.contains(\"selected\")){selected_component_values.splice(selected_component_values.indexOf(i),1);box.classList.remove(\"selected\");img.classList.remove(\"selected\");}else{selected_component_values.push(i);box.classList.add(\"selected\");img.classList.add(\"selected\");}selected_component_values.sort();Streamlit.setComponentValue(selected_component_values);};});// return selected_component_values\nStreamlit.setComponentValue(selected_component_values);}// We tell Streamlit to update our frameHeight after each render event, in\n// case it has changed. (This isn't strictly necessary for the example\n// because our height stays fixed, but this is a low-cost function, so\n// there's no harm in doing it redundantly.)\nStreamlit.setFrameHeight();}// Attach our `onRender` handler to Streamlit's render event.\nStreamlit.events.addEventListener(Streamlit.RENDER_EVENT,onRender);// Tell Streamlit we're ready to start receiving data. We won't get our\n// first RENDER_EVENT until we call this function.\nStreamlit.setComponentReady();// Finally, tell Streamlit to update our initial height. We omit the\n// `height` parameter here to have it default to our scrollHeight.\nStreamlit.setFrameHeight();","map":{"version":3,"names":["Streamlit","labelDiv","document","body","appendChild","createElement","label","createTextNode","container","classList","add","selected_component_values","onRender","event","data","detail","theme","style","font","color","textColor","base","querySelectorAll","forEach","el","remove","textContent","args","images","captions","childNodes","length","image","i","item","box","img","src","caption","undefined","includes","push","onclick","contains","splice","indexOf","sort","setComponentValue","setFrameHeight","events","addEventListener","RENDER_EVENT","setComponentReady"],"sources":["/home/andersonls/Downloads/streamlit_dash-0.6.1/streamlit_dash/frontend/src/index.tsx"],"sourcesContent":["import { Streamlit, RenderData } from \"streamlit-component-lib\"\n\nconst labelDiv = document.body.appendChild(document.createElement(\"label\"))\nconst label = labelDiv.appendChild(document.createTextNode(\"\"))\nconst container = document.body.appendChild(document.createElement(\"div\"))\ncontainer.classList.add(\"container\")\nconst selected_component_values: number[] = []\n\n/**\n * The component's render function. This will be called immediately after\n * the component is initially loaded, and then again every time the\n * component gets new data from Python.\n */\nfunction onRender(event: Event): void {\n  // Get the RenderData from the event\n  const data = (event as CustomEvent<RenderData>).detail\n\n  if (data.theme) {\n    labelDiv.style.font = data.theme.font\n    labelDiv.style.color = data.theme.textColor\n    if (data.theme.base === \"dark\") {\n      document.body.querySelectorAll(\".box, .caption\").forEach((el) => {\n        el.classList.add(\"dark\")\n      })\n    } else {\n      document.body.querySelectorAll(\".box, .caption\").forEach((el) => {\n        el.classList.remove(\"dark\")\n      })\n    }\n\n    // TODO: Gray out the component if it's disabled.\n  }\n\n  label.textContent = data.args[\"label\"]\n  let images = data.args[\"images\"]\n  let captions = data.args[\"captions\"]\n  // console.log(captions)\n\n  if (container.childNodes.length === 0) {\n    images.forEach((image: string, i: number) => {\n      let item = container.appendChild(document.createElement(\"div\"))\n      item.classList.add(\"item\")\n      if (data.args[\"use_container_width\"] === true) {\n        item.classList.add(\"stretch\")\n      }\n\n      let box = item.appendChild(document.createElement(\"div\"))\n      box.classList.add(\"image-box\")\n\n      let img = box.appendChild(document.createElement(\"img\"))\n      img.classList.add(\"image\")\n      img.src = image\n\n      if (captions) {\n        let caption = item.appendChild(document.createElement(\"div\"))\n        caption.classList.add(\"caption\")\n        caption.textContent = captions[i]\n      }\n\n      // check if i is in the index array\n      if (data.args[\"indices\"] !== undefined && data.args[\"indices\"].includes(i)) {\n        box.classList.add(\"selected\")\n        img.classList.add(\"selected\")\n        selected_component_values.push(i)\n      }\n\n      img.onclick = function () {\n        // check if the image is already selected, then un-select it and remove it from the array\n        if (box.classList.contains(\"selected\")) {\n          selected_component_values.splice(selected_component_values.indexOf(i), 1)\n          box.classList.remove(\"selected\")\n          img.classList.remove(\"selected\")\n        } else {\n          selected_component_values.push(i)\n          box.classList.add(\"selected\")\n          img.classList.add(\"selected\")\n        }\n        selected_component_values.sort()\n        Streamlit.setComponentValue(selected_component_values)\n      }\n    })\n    // return selected_component_values\n    Streamlit.setComponentValue(selected_component_values)\n  }\n\n  // We tell Streamlit to update our frameHeight after each render event, in\n  // case it has changed. (This isn't strictly necessary for the example\n  // because our height stays fixed, but this is a low-cost function, so\n  // there's no harm in doing it redundantly.)\n  Streamlit.setFrameHeight()\n}\n\n// Attach our `onRender` handler to Streamlit's render event.\nStreamlit.events.addEventListener(Streamlit.RENDER_EVENT, onRender)\n\n// Tell Streamlit we're ready to start receiving data. We won't get our\n// first RENDER_EVENT until we call this function.\nStreamlit.setComponentReady()\n\n// Finally, tell Streamlit to update our initial height. We omit the\n// `height` parameter here to have it default to our scrollHeight.\nStreamlit.setFrameHeight()\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}