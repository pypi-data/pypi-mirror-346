<div class="screen text-input-screen">
  <div style="height: 100vh; background: white; color: black; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px;">
    <p style="font-size: 20px; margin-bottom: 20px;">{{ step.prompt }}</p>
    <input type="text" id="user-input" placeholder="{{ step.placeholder }}"
           style="width: 60%; padding: 15px; font-size: 18px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 6px;" />
    <button id="next-button" disabled
            style="padding: 12px 24px; font-size: 18px; background: #007BFF; color: white; border: none; border-radius: 6px;">
      {{ step.button_text }}
    </button>
  </div>
</div>
  
  <script>
    const input = document.getElementById("user-input");
    const nextBtn = document.getElementById("next-button");
  
    input.addEventListener("input", () => {
      nextBtn.disabled = input.value.trim() === "";
    });
  
    nextBtn.addEventListener("click", () => {
      fetch("/experiment/record", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          step_id: "{{ step.id }}",
          response: input.value.trim(),
        }),
      }).then(() => {
        window.parent.postMessage({type: "nextStep",
                                   answer: input.value.trim(),
                                   time: performance.now()}, "*");
      });
    });
  </script>