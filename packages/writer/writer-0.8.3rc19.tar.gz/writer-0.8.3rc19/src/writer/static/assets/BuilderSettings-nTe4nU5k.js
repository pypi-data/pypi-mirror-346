function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-C7odhkMa.js","./index-Cqy1XuJG.css","./BuilderEmbeddedCodeEditor-BVavrMYM.js","./BuilderEmbeddedCodeEditor-DiDqfWdt.css","./BuilderGraphSelect-BG7-V2uF.js","./useListResources-DQuNrEgo.js","./BuilderApp-DRMjpidg.js","./marked.esm-273vDTCT.js","./BuilderApp-CtaSbCoU.css","./BuilderGraphSelect-CVO4gzts.css","./BuilderApplicationSelect-CotNiguw.js","./BuilderApplicationSelect-DYYFtqjx.css","./BuilderSettingsHandlers-C5vRJzu0.js","./useBlueprintRun-Cqw87f8u.js","./BuilderSettingsHandlers-1QLaHR8J.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as q,i as L,a as j,u as yt,c as x,r as X,w as $e,n as Se,o as p,e as $,N as y,b as A,x as D,f as I,W as H,X as w,a8 as Ie,ao as Oe,s as O,z as Q,A as me,t as Y,V as Me,C as Je,Y as te,_ as z,l as J,P as st,at as gt,aF as _t,S as bt,aj as kt,ah as de,y as ie,q as Be,aG as It,H as St,I as ye,aH as Et,aI as Ct,G as Re,aA as xt,aC as wt,aJ as le,aK as Ae,ae as ne,M as oe,Q as Bt,ai as Ge,aw as He,k as at,v as Te,aL as We,ab as $t,aM as Mt,aN as At,aO as G,aP as Ft,aQ as Tt,aR as Vt,aS as Ot,F as ve,al as Rt}from"./index-C7odhkMa.js";import{u as Pt,B as be}from"./BuilderApp-DRMjpidg.js";import{p as Lt}from"./instancePath-BsbOTTI8.js";import{u as jt}from"./useComponentDescription-X_W6P_20.js";import{B as Xe}from"./BuilderEmbeddedCodeEditor-BVavrMYM.js";import"./marked.esm-273vDTCT.js";const Wt=["data-writer-id"],Dt={id:"validChildrenTypes"},Nt=["value"],Kt=q({__name:"BuilderSettingsActions",setup(n){const e=L(j.core),t=L(j.builderManager),s=yt(e),{createAndInsertComponent:l,moveComponentUp:o,moveComponentDown:a,cutComponent:u,pasteComponent:i,copyComponent:d,isAddAllowed:h,isCopyAllowed:g,isCutAllowed:E,isGoToParentAllowed:r,isPasteAllowed:c,isDeleteAllowed:k,getEnabledMoves:m,removeComponentsSubtree:f,goToParent:S}=te(e,t,s),V=Pt();async function N(){try{await i(M.value)}catch(R){V.pushToast({type:"error",message:String(R)})}}function W(){if(!C.value.isDeleteEnabled)return;const R=t.selection.value.map(F=>F.componentId);R.length!==0&&f(...R)}const M=t.firstSelectedId,T=x(()=>{var R;return(R=t.firstSelectedItem.value)==null?void 0:R.instancePath}),B=X(!1),C=X(null),v=x(()=>t.firstSelectedId.value?c(t.firstSelectedId.value):!1),b=x(()=>{const R=e.getContainableTypes(M.value),F={};return R.map(U=>{const ee=e.getComponentDefinition(U);F[U]=ee}),F});function _(R){const F=R.target.value,U=Object.entries(b.value).filter(([se,ue])=>ue.name==F);if(U.length==0)return;const ee=U[0][0];l(ee,M.value),B.value=!1}function K(){var ee,se;const R=e.getComponentById(M.value);if(!R)return;const{up:F,down:U}=m(M.value);C.value={isAddEnabled:h(M.value),componentTypeName:(ee=e.getComponentDefinition(R.type))==null?void 0:ee.name,toolkit:(se=e.getComponentDefinition(R.type))==null?void 0:se.toolkit,isMoveUpEnabled:F,isMoveDownEnabled:U,isCopyEnabled:g(M.value),isCutEnabled:E(M.value),isGoToParentEnabled:r(M.value),isDeleteEnabled:k(M.value)}}return $e(()=>{var R;return(R=e.getComponentById(M.value))==null?void 0:R.position},async R=>{typeof R>"u"||R===null||K()},{flush:"post"}),Se(()=>{K()}),(R,F)=>{var U,ee,se,ue,Ce,xe,we;return p(),$("div",{class:Je(["BuilderSettingsActions",{collapsed:y(t).isSettingsBarCollapsed.value}]),"data-writer-id":y(M)},[y(t).isSingleSelectionActive.value?(p(),A(H,{key:0,"data-writer-tooltip":"Add child","data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",class:"actionButton",disabled:!((U=C.value)!=null&&U.isAddEnabled),onClick:F[0]||(F[0]=ce=>{var Z;return(Z=C.value)!=null&&Z.isAddEnabled?B.value=!0:void 0})},{default:D(()=>F[8]||(F[8]=[I("i",{class:"material-symbols-outlined"},"add",-1)])),_:1},8,["disabled"])):w("",!0),y(t).isSingleSelectionActive.value?(p(),A(H,{key:1,class:"actionButton",size:"small",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":`Move up (${y(Ie)()}↑)`,disabled:!((ee=C.value)!=null&&ee.isMoveUpEnabled),onClick:F[1]||(F[1]=ce=>{var Z;return(Z=C.value)!=null&&Z.isMoveUpEnabled?y(o)(y(M)):void 0})},{default:D(()=>F[9]||(F[9]=[I("i",{class:"material-symbols-outlined"},"arrow_upward",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),y(t).isSingleSelectionActive.value?(p(),A(H,{key:2,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Move down (${y(Ie)()}↓)`,"data-writer-tooltip-placement":"left",disabled:!((se=C.value)!=null&&se.isMoveDownEnabled),onClick:F[2]||(F[2]=ce=>{var Z;return(Z=C.value)!=null&&Z.isMoveDownEnabled?y(a)(y(M)):void 0})},{default:D(()=>F[10]||(F[10]=[I("i",{class:"material-symbols-outlined"},"arrow_downward",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),y(t).isSingleSelectionActive.value?(p(),A(H,{key:3,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Cut (${y(Ie)()}X)`,"data-writer-tooltip-placement":"left",disabled:!((ue=C.value)!=null&&ue.isCutEnabled),onClick:F[3]||(F[3]=ce=>{var Z;return(Z=C.value)!=null&&Z.isCutEnabled?y(u)(y(M)):void 0})},{default:D(()=>F[11]||(F[11]=[I("i",{class:"material-symbols-outlined"},"cut",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),y(t).isSingleSelectionActive.value?(p(),A(H,{key:4,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Copy (${y(Ie)()}C)`,"data-writer-tooltip-placement":"left",disabled:!((Ce=C.value)!=null&&Ce.isCopyEnabled),onClick:F[4]||(F[4]=ce=>{var Z;return(Z=C.value)!=null&&Z.isCopyEnabled?y(d)(y(M)):void 0})},{default:D(()=>F[12]||(F[12]=[I("i",{class:"material-symbols-outlined"},"content_copy",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),y(t).isSingleSelectionActive.value?(p(),A(H,{key:5,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Paste (${y(Ie)()}V)`,"data-writer-tooltip-placement":"left",disabled:!v.value,onClick:N},{default:D(()=>F[13]||(F[13]=[I("i",{class:"material-symbols-outlined"},"content_paste",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),y(t).isSingleSelectionActive.value?(p(),A(H,{key:6,class:"actionButton",variant:"neutral",size:"small","data-writer-tooltip":`Go to parent (${y(Ie)()}Shift ↑)`,"data-writer-tooltip-placement":"left",disabled:!((xe=C.value)!=null&&xe.isGoToParentEnabled),onClick:F[5]||(F[5]=ce=>{var Z;return(Z=C.value)!=null&&Z.isGoToParentEnabled?y(S)(y(M),T.value):void 0})},{default:D(()=>F[14]||(F[14]=[I("i",{class:"material-symbols-outlined"},"move_up",-1)])),_:1},8,["data-writer-tooltip","disabled"])):w("",!0),y(t).selectionStatus.value===y(Oe).Multiple?(p(),A(H,{key:7,class:"actionButton",variant:"neutral",size:"small","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:F[6]||(F[6]=ce=>y(t).setSelection(null))},{default:D(()=>F[15]||(F[15]=[I("i",{class:"material-symbols-outlined"},"close",-1)])),_:1})):w("",!0),O(H,{class:"actionButton delete",variant:"neutral",size:"small","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:!((we=C.value)!=null&&we.isDeleteEnabled),onClick:W},{default:D(()=>F[16]||(F[16]=[I("i",{class:"material-symbols-outlined"},"delete",-1)])),_:1},8,["disabled"]),B.value?(p(),A(Me,{key:8,title:"Add child component","display-close-button":"",onClose:F[7]||(F[7]=ce=>B.value=!1)},{default:D(()=>[I("input",{class:"addModalInput",type:"text",list:"validChildrenTypes",placeholder:"Component...",onChange:_},null,32),I("datalist",Dt,[(p(!0),$(Q,null,me(b.value,(ce,Z)=>(p(),$("option",{key:Z,value:ce.name},Y(ce.name),9,Nt))),128))])]),_:1})):w("",!0)],10,Wt)}}}),Ut=z(Kt,[["__scopeId","data-v-1366a657"]]);function he(n){return Array.isArray?Array.isArray(n):ut(n)==="[object Array]"}const qt=1/0;function zt(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-qt?"-0":e}function Jt(n){return n==null?"":zt(n)}function pe(n){return typeof n=="string"}function it(n){return typeof n=="number"}function Yt(n){return n===!0||n===!1||Gt(n)&&ut(n)=="[object Boolean]"}function rt(n){return typeof n=="object"}function Gt(n){return rt(n)&&n!==null}function ae(n){return n!=null}function Le(n){return!n.trim().length}function ut(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Ht="Incorrect 'index' type",Xt=n=>`Invalid value for key ${n}`,Zt=n=>`Pattern length exceeds max of ${n}.`,Qt=n=>`Missing ${n} property in key`,en=n=>`Property 'weight' in key '${n}' must be a positive integer`,Ze=Object.prototype.hasOwnProperty;class tn{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(s=>{let l=dt(s);this._keys.push(l),this._keyMap[l.id]=l,t+=l.weight}),this._keys.forEach(s=>{s.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dt(n){let e=null,t=null,s=null,l=1,o=null;if(pe(n)||he(n))s=n,e=Qe(n),t=De(n);else{if(!Ze.call(n,"name"))throw new Error(Qt("name"));const a=n.name;if(s=a,Ze.call(n,"weight")&&(l=n.weight,l<=0))throw new Error(en(a));e=Qe(a),t=De(a),o=n.getFn}return{path:e,id:t,weight:l,src:s,getFn:o}}function Qe(n){return he(n)?n:n.split(".")}function De(n){return he(n)?n.join("."):n}function nn(n,e){let t=[],s=!1;const l=(o,a,u)=>{if(ae(o))if(!a[u])t.push(o);else{let i=a[u];const d=o[i];if(!ae(d))return;if(u===a.length-1&&(pe(d)||it(d)||Yt(d)))t.push(Jt(d));else if(he(d)){s=!0;for(let h=0,g=d.length;h<g;h+=1)l(d[h],a,u+1)}else a.length&&l(d,a,u+1)}};return l(n,pe(e)?e.split("."):e,0),s?t:t[0]}const on={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ln={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},sn={location:0,threshold:.6,distance:100},an={useExtendedSearch:!1,getFn:nn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var P={...ln,...on,...sn,...an};const rn=/[^ ]+/g;function un(n=1,e=3){const t=new Map,s=Math.pow(10,e);return{get(l){const o=l.match(rn).length;if(t.has(o))return t.get(o);const a=1/Math.pow(o,.5*n),u=parseFloat(Math.round(a*s)/s);return t.set(o,u),u},clear(){t.clear()}}}class Ye{constructor({getFn:e=P.getFn,fieldNormWeight:t=P.fieldNormWeight}={}){this.norm=un(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,s)=>{this._keysMap[t.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,pe(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();pe(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!ae(e)||Le(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((l,o)=>{let a=l.getFn?l.getFn(e):this.getFn(e,l.path);if(ae(a)){if(he(a)){let u=[];const i=[{nestedArrIndex:-1,value:a}];for(;i.length;){const{nestedArrIndex:d,value:h}=i.pop();if(ae(h))if(pe(h)&&!Le(h)){let g={v:h,i:d,n:this.norm.get(h)};u.push(g)}else he(h)&&h.forEach((g,E)=>{i.push({nestedArrIndex:E,value:g})})}s.$[o]=u}else if(pe(a)&&!Le(a)){let u={v:a,n:this.norm.get(a)};s.$[o]=u}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function ct(n,e,{getFn:t=P.getFn,fieldNormWeight:s=P.fieldNormWeight}={}){const l=new Ye({getFn:t,fieldNormWeight:s});return l.setKeys(n.map(dt)),l.setSources(e),l.create(),l}function dn(n,{getFn:e=P.getFn,fieldNormWeight:t=P.fieldNormWeight}={}){const{keys:s,records:l}=n,o=new Ye({getFn:e,fieldNormWeight:t});return o.setKeys(s),o.setIndexRecords(l),o}function Ve(n,{errors:e=0,currentLocation:t=0,expectedLocation:s=0,distance:l=P.distance,ignoreLocation:o=P.ignoreLocation}={}){const a=e/n.length;if(o)return a;const u=Math.abs(s-t);return l?a+u/l:u?1:a}function cn(n=[],e=P.minMatchCharLength){let t=[],s=-1,l=-1,o=0;for(let a=n.length;o<a;o+=1){let u=n[o];u&&s===-1?s=o:!u&&s!==-1&&(l=o-1,l-s+1>=e&&t.push([s,l]),s=-1)}return n[o-1]&&o-s>=e&&t.push([s,o-1]),t}const _e=32;function pn(n,e,t,{location:s=P.location,distance:l=P.distance,threshold:o=P.threshold,findAllMatches:a=P.findAllMatches,minMatchCharLength:u=P.minMatchCharLength,includeMatches:i=P.includeMatches,ignoreLocation:d=P.ignoreLocation}={}){if(e.length>_e)throw new Error(Zt(_e));const h=e.length,g=n.length,E=Math.max(0,Math.min(s,g));let r=o,c=E;const k=u>1||i,m=k?Array(g):[];let f;for(;(f=n.indexOf(e,c))>-1;){let T=Ve(e,{currentLocation:f,expectedLocation:E,distance:l,ignoreLocation:d});if(r=Math.min(T,r),c=f+h,k){let B=0;for(;B<h;)m[f+B]=1,B+=1}}c=-1;let S=[],V=1,N=h+g;const W=1<<h-1;for(let T=0;T<h;T+=1){let B=0,C=N;for(;B<C;)Ve(e,{errors:T,currentLocation:E+C,expectedLocation:E,distance:l,ignoreLocation:d})<=r?B=C:N=C,C=Math.floor((N-B)/2+B);N=C;let v=Math.max(1,E-C+1),b=a?g:Math.min(E+C,g)+h,_=Array(b+2);_[b+1]=(1<<T)-1;for(let R=b;R>=v;R-=1){let F=R-1,U=t[n.charAt(F)];if(k&&(m[F]=+!!U),_[R]=(_[R+1]<<1|1)&U,T&&(_[R]|=(S[R+1]|S[R])<<1|1|S[R+1]),_[R]&W&&(V=Ve(e,{errors:T,currentLocation:F,expectedLocation:E,distance:l,ignoreLocation:d}),V<=r)){if(r=V,c=F,c<=E)break;v=Math.max(1,2*E-c)}}if(Ve(e,{errors:T+1,currentLocation:E,expectedLocation:E,distance:l,ignoreLocation:d})>r)break;S=_}const M={isMatch:c>=0,score:Math.max(.001,V)};if(k){const T=cn(m,u);T.length?i&&(M.indices=T):M.isMatch=!1}return M}function vn(n){let e={};for(let t=0,s=n.length;t<s;t+=1){const l=n.charAt(t);e[l]=(e[l]||0)|1<<s-t-1}return e}class pt{constructor(e,{location:t=P.location,threshold:s=P.threshold,distance:l=P.distance,includeMatches:o=P.includeMatches,findAllMatches:a=P.findAllMatches,minMatchCharLength:u=P.minMatchCharLength,isCaseSensitive:i=P.isCaseSensitive,ignoreLocation:d=P.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:l,includeMatches:o,findAllMatches:a,minMatchCharLength:u,isCaseSensitive:i,ignoreLocation:d},this.pattern=i?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(E,r)=>{this.chunks.push({pattern:E,alphabet:vn(E),startIndex:r})},g=this.pattern.length;if(g>_e){let E=0;const r=g%_e,c=g-r;for(;E<c;)h(this.pattern.substr(E,_e),E),E+=_e;if(r){const k=g-_e;h(this.pattern.substr(k),k)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let c={isMatch:!0,score:0};return s&&(c.indices=[[0,e.length-1]]),c}const{location:l,distance:o,threshold:a,findAllMatches:u,minMatchCharLength:i,ignoreLocation:d}=this.options;let h=[],g=0,E=!1;this.chunks.forEach(({pattern:c,alphabet:k,startIndex:m})=>{const{isMatch:f,score:S,indices:V}=pn(e,c,k,{location:l+m,distance:o,threshold:a,findAllMatches:u,minMatchCharLength:i,includeMatches:s,ignoreLocation:d});f&&(E=!0),g+=S,f&&V&&(h=[...h,...V])});let r={isMatch:E,score:E?g/this.chunks.length:1};return E&&s&&(r.indices=h),r}}class ge{constructor(e){this.pattern=e}static isMultiMatch(e){return et(e,this.multiRegex)}static isSingleMatch(e){return et(e,this.singleRegex)}search(){}}function et(n,e){const t=n.match(e);return t?t[1]:null}class fn extends ge{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class mn extends ge{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class hn extends ge{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class yn extends ge{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class gn extends ge{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class _n extends ge{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class vt extends ge{constructor(e,{location:t=P.location,threshold:s=P.threshold,distance:l=P.distance,includeMatches:o=P.includeMatches,findAllMatches:a=P.findAllMatches,minMatchCharLength:u=P.minMatchCharLength,isCaseSensitive:i=P.isCaseSensitive,ignoreLocation:d=P.ignoreLocation}={}){super(e),this._bitapSearch=new pt(e,{location:t,threshold:s,distance:l,includeMatches:o,findAllMatches:a,minMatchCharLength:u,isCaseSensitive:i,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class ft extends ge{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,s;const l=[],o=this.pattern.length;for(;(s=e.indexOf(this.pattern,t))>-1;)t=s+o,l.push([s,t-1]);const a=!!l.length;return{isMatch:a,score:a?0:1,indices:l}}}const Ne=[fn,ft,hn,yn,_n,gn,mn,vt],tt=Ne.length,bn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,kn="|";function In(n,e={}){return n.split(kn).map(t=>{let s=t.trim().split(bn).filter(o=>o&&!!o.trim()),l=[];for(let o=0,a=s.length;o<a;o+=1){const u=s[o];let i=!1,d=-1;for(;!i&&++d<tt;){const h=Ne[d];let g=h.isMultiMatch(u);g&&(l.push(new h(g,e)),i=!0)}if(!i)for(d=-1;++d<tt;){const h=Ne[d];let g=h.isSingleMatch(u);if(g){l.push(new h(g,e));break}}}return l})}const Sn=new Set([vt.type,ft.type]);class En{constructor(e,{isCaseSensitive:t=P.isCaseSensitive,includeMatches:s=P.includeMatches,minMatchCharLength:l=P.minMatchCharLength,ignoreLocation:o=P.ignoreLocation,findAllMatches:a=P.findAllMatches,location:u=P.location,threshold:i=P.threshold,distance:d=P.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:l,findAllMatches:a,ignoreLocation:o,location:u,threshold:i,distance:d},this.pattern=t?e:e.toLowerCase(),this.query=In(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:l}=this.options;e=l?e:e.toLowerCase();let o=0,a=[],u=0;for(let i=0,d=t.length;i<d;i+=1){const h=t[i];a.length=0,o=0;for(let g=0,E=h.length;g<E;g+=1){const r=h[g],{isMatch:c,indices:k,score:m}=r.search(e);if(c){if(o+=1,u+=m,s){const f=r.constructor.type;Sn.has(f)?a=[...a,...k]:a.push(k)}}else{u=0,o=0,a.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return s&&(g.indices=a),g}}return{isMatch:!1,score:1}}}const Ke=[];function Cn(...n){Ke.push(...n)}function Ue(n,e){for(let t=0,s=Ke.length;t<s;t+=1){let l=Ke[t];if(l.condition(n,e))return new l(n,e)}return new pt(n,e)}const Pe={AND:"$and",OR:"$or"},qe={PATH:"$path",PATTERN:"$val"},ze=n=>!!(n[Pe.AND]||n[Pe.OR]),xn=n=>!!n[qe.PATH],wn=n=>!he(n)&&rt(n)&&!ze(n),nt=n=>({[Pe.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function mt(n,e,{auto:t=!0}={}){const s=l=>{let o=Object.keys(l);const a=xn(l);if(!a&&o.length>1&&!ze(l))return s(nt(l));if(wn(l)){const i=a?l[qe.PATH]:o[0],d=a?l[qe.PATTERN]:l[i];if(!pe(d))throw new Error(Xt(i));const h={keyId:De(i),pattern:d};return t&&(h.searcher=Ue(d,e)),h}let u={children:[],operator:o[0]};return o.forEach(i=>{const d=l[i];he(d)&&d.forEach(h=>{u.children.push(s(h))})}),u};return ze(n)||(n=nt(n)),s(n)}function Bn(n,{ignoreFieldNorm:e=P.ignoreFieldNorm}){n.forEach(t=>{let s=1;t.matches.forEach(({key:l,norm:o,score:a})=>{const u=l?l.weight:null;s*=Math.pow(a===0&&u?Number.EPSILON:a,(u||1)*(e?1:o))}),t.score=s})}function $n(n,e){const t=n.matches;e.matches=[],ae(t)&&t.forEach(s=>{if(!ae(s.indices)||!s.indices.length)return;const{indices:l,value:o}=s;let a={indices:l,value:o};s.key&&(a.key=s.key.src),s.idx>-1&&(a.refIndex=s.idx),e.matches.push(a)})}function Mn(n,e){e.score=n.score}function An(n,e,{includeMatches:t=P.includeMatches,includeScore:s=P.includeScore}={}){const l=[];return t&&l.push($n),s&&l.push(Mn),n.map(o=>{const{idx:a}=o,u={item:e[a],refIndex:a};return l.length&&l.forEach(i=>{i(o,u)}),u})}class Ee{constructor(e,t={},s){this.options={...P,...t},this.options.useExtendedSearch,this._keyStore=new tn(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Ye))throw new Error(Ht);this._myIndex=t||ct(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){ae(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let s=0,l=this._docs.length;s<l;s+=1){const o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,l-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:l,shouldSort:o,sortFn:a,ignoreFieldNorm:u}=this.options;let i=pe(e)?pe(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Bn(i,{ignoreFieldNorm:u}),o&&i.sort(a),it(t)&&t>-1&&(i=i.slice(0,t)),An(i,this._docs,{includeMatches:s,includeScore:l})}_searchStringList(e){const t=Ue(e,this.options),{records:s}=this._myIndex,l=[];return s.forEach(({v:o,i:a,n:u})=>{if(!ae(o))return;const{isMatch:i,score:d,indices:h}=t.searchIn(o);i&&l.push({item:o,idx:a,matches:[{score:d,value:o,norm:u,indices:h}]})}),l}_searchLogical(e){const t=mt(e,this.options),s=(u,i,d)=>{if(!u.children){const{keyId:g,searcher:E}=u,r=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(i,g),searcher:E});return r&&r.length?[{idx:d,item:i,matches:r}]:[]}const h=[];for(let g=0,E=u.children.length;g<E;g+=1){const r=u.children[g],c=s(r,i,d);if(c.length)h.push(...c);else if(u.operator===Pe.AND)return[]}return h},l=this._myIndex.records,o={},a=[];return l.forEach(({$:u,i})=>{if(ae(u)){let d=s(t,u,i);d.length&&(o[i]||(o[i]={idx:i,item:u,matches:[]},a.push(o[i])),d.forEach(({matches:h})=>{o[i].matches.push(...h)}))}}),a}_searchObjectList(e){const t=Ue(e,this.options),{keys:s,records:l}=this._myIndex,o=[];return l.forEach(({$:a,i:u})=>{if(!ae(a))return;let i=[];s.forEach((d,h)=>{i.push(...this._findMatches({key:d,value:a[h],searcher:t}))}),i.length&&o.push({idx:u,item:a,matches:i})}),o}_findMatches({key:e,value:t,searcher:s}){if(!ae(t))return[];let l=[];if(he(t))t.forEach(({v:o,i:a,n:u})=>{if(!ae(o))return;const{isMatch:i,score:d,indices:h}=s.searchIn(o);i&&l.push({score:d,key:e,value:o,idx:a,norm:u,indices:h})});else{const{v:o,n:a}=t,{isMatch:u,score:i,indices:d}=s.searchIn(o);u&&l.push({score:i,key:e,value:o,norm:a,indices:d})}return l}}Ee.version="7.0.0";Ee.createIndex=ct;Ee.parseIndex=dn;Ee.config=P;Ee.parseQuery=mt;Cn(En);const Fn={class:"BuilderTemplateInput"},Tn=["id"],Vn=["value"],On=["value","onClick"],Rn={class:"prop"},Pn={class:"type"},Ln=q({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},emits:["input","update:value"],setup(n,{expose:e,emit:t}){const s=t,l=n,o=L(j.core),a=J("input"),u=J("dropdown"),i=st([]),{floatingStyles:d,update:h}=gt(a,u,{placement:"bottom-start",middleware:[Et(),Ct({apply({rects:M,elements:T}){Object.assign(T.floating.style,{minWidth:`${M.reference.width}px`})}})],strategy:"fixed"});g();function g(){let M;function T(){M&&M(),M=void 0}$e(u,()=>{T(),u.value&&(M=_t(a,u.value,h))}),bt(()=>T())}e({focus:()=>{var M;return(M=a.value)==null?void 0:M.focus()}});function E(M,T){return T.reduce((B,C)=>B==null?void 0:B[C],M)}function r(M){var U,ee;let T=((U=a.value)==null?void 0:U.value)??"";const{selectionStart:B,selectionEnd:C}=((ee=a.value)==null?void 0:ee.getSelection())??{},v=T.slice(0,B),b=k(v);if(b===null)return;const K=b.at(-1).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"$",R=v.replace(new RegExp(K),`${M}${l.type==="template"?"}":""}`),F=T.slice(C).replace(/^(\})+/,"");T=R.concat(F),s("input",{target:{value:T}}),s("update:value",T),i.value=[],a.value.focus(),ye(()=>{a.value.setSelectionEnd(R.length),a.value.setSelectionStart(R.length)})}function c(M){return M===null?"null":M===void 0?"undefined":typeof M}function k(M){if((l.type??"template")==="state")return M.split(".");const T=M.match(/@\{([^}{@]*)$/);return T?((T==null?void 0:T[1])??"").split("."):null}function m(M){return M.replace(/\\/g,"\\\\").replace(/\./g,"\\.")}function f(M){s("input",M),s("update:value",M.target.value),S()}function S(){var U,ee;const{selectionStart:M,selectionEnd:T}=((U=a.value)==null?void 0:U.getSelection())??{},B=(ee=a.value)==null?void 0:ee.value;if(!(M===T)){i.value=[];return}const v=B.slice(0,M),b=k(v);if(b===null){i.value=[];return}const _=b.at(-1),K=b.slice(0,-1),R=Object.entries(E(o.userState.value,K)??{}).map(([se,ue])=>({text:m(se),type:c(ue)})),F=new Ee(R,{findAllMatches:!0,includeMatches:!0,keys:["text"]});if(_===""){i.value=R;return}i.value=F.search(_).map(se=>{const{item:ue}=se;return ue})}let V;function N(){V=setTimeout(()=>{i.value=[],V=null},300)}function W(){V&&(clearTimeout(V),V=null)}return(M,T)=>{const B=kt("capture-tabs");return p(),$("div",Fn,[l.multiline?w("",!0):(p(),$(Q,{key:0},[O(de,{ref_key:"input",ref:a,"model-value":l.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",placeholder:l.placeholder,list:l.options?`list-${l.inputId}`:void 0,invalid:n.error!==void 0,onInput:f,onBlur:N},null,8,["model-value","placeholder","list","invalid"]),l.options?(p(),$("datalist",{key:0,id:`list-${l.inputId}`},[(p(!0),$(Q,null,me(n.options,(C,v)=>(p(),$("option",{key:v,value:v},[C.toLowerCase()!==String(v).toLowerCase()?(p(),$(Q,{key:0},[ie(Y(C),1)],64)):w("",!0)],8,Vn))),128))],8,Tn)):w("",!0)],64)),l.multiline?Be((p(),A(It,{key:1,ref_key:"input",ref:a,variant:l.variant,"model-value":l.value,autocorrect:"off",autocomplete:"off",spellcheck:"false",rows:"3",placeholder:l.placeholder,invalid:n.error!==void 0,onInput:f},null,8,["variant","model-value","placeholder","invalid"])),[[B]]):w("",!0),i.value.length?(p(),$("div",{key:2,ref_key:"dropdown",ref:u,class:"fieldStateAutocomplete",tabindex:"-1",style:St(y(d))},[(p(!0),$(Q,null,me(i.value,(C,v)=>(p(),$("button",{key:v,class:"fieldStateAutocompleteOption",value:v,onFocusout:N,onFocusin:W,onClick:()=>r(C.text)},[I("span",Rn,Y(C.text),1),I("span",Pn,Y(C.type),1)],40,On))),128))],4)):w("",!0)])}}}),re=z(Ln,[["__scopeId","data-v-7c269909"]]),jn=["disabled","data-writer-tooltip"],Wn=q({__name:"WdsTab",props:{disabled:{type:[Boolean,String],default:void 0},selected:{type:Boolean}},emits:{click:()=>!0},setup(n){const e=n,t=x(()=>typeof e.disabled=="string"?e.disabled:void 0);return(s,l)=>(p(),$("button",{class:Je(["WdsTab",{"WdsTab--disabled":n.disabled,"WdsTab--selected":n.selected}]),type:"button",disabled:!!n.disabled,"data-writer-tooltip":t.value,onClick:l[0]||(l[0]=o=>s.$emit("click"))},[Re(s.$slots,"default",{},void 0,!0)],10,jn))}}),Dn=z(Wn,[["__scopeId","data-v-84bc5b3a"]]),Nn={class:"WdsTabs"},Kn=q({__name:"WdsTabs",props:xt({tabs:{type:Array,required:!0}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=wt(n,"modelValue");return(t,s)=>(p(),$("div",Nn,[(p(!0),$(Q,null,me(n.tabs,l=>(p(),A(Dn,{key:l.value,disabled:l.disabled,selected:l.value===e.value,onClick:o=>e.value=l.value},{default:D(()=>[ie(Y(l.label),1)]),_:2},1032,["disabled","selected","onClick"]))),128))]))}}),ke=z(Kn,[["__scopeId","data-v-2fa8e710"]]),Fe=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Un=["data-automation-key"],qn={key:0,class:"main"},zn={key:0,class:"pickerContainer"},Jn=q({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne({loader:()=>oe(()=>import("./index-C7odhkMa.js").then(v=>v.aZ),__vite__mapDeps([0,1]),import.meta.url),loadingComponent:be}),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=J("rootEl"),a=J("pickerEl"),u=J("freehandInputEl"),i=[{key:"start",label:"Left",match:v=>v=="start",default:"start",icon:"format_align_left"},{key:"center",label:"Center",match:v=>v=="center",default:"center",icon:"format_align_center"},{key:"end",label:"Right",match:v=>v=="end",default:"end",icon:"format_align_right"}],d=[{key:"start",label:"Top",match:v=>v=="start",default:"start",icon:"vertical_align_top"},{key:"center",label:"Center",match:v=>v=="center",default:"center",icon:"vertical_align_center"},{key:"end",label:"Bottom",match:v=>v=="end",default:"end",icon:"vertical_align_bottom"}],h={pick:a,css:u,default:null},g=n,{componentId:E,fieldKey:r,direction:c}=le(g),k=x(()=>t.getComponentById(E.value)),m=x(()=>c.value=="vertical"?d:c.value=="horizontal"?i:d),f=x(()=>m.value.map(v=>({value:v.key,label:v.label,icon:v.icon}))),S=x(()=>{const v=k.value.content[r.value];for(const b in m.value)if(v&&m.value[b].match(v))return m.value[b].key;return null}),V=x(()=>{const v=k.value.content[r.value];return v||""}),W=X((()=>{if(!V.value)return"default";for(const v in m.value)if(m.value[v].match(V.value))return"pick";return"css"})()),M=()=>{var b;const v=(b=h[W.value])==null?void 0:b.value;v&&(v.focus(),typeof v.selectionStart=="number"&&(v.selectionStart=v.selectionEnd=v.value.length))},T=async v=>{W.value!=v&&(W.value=v,await ye(),M(),v==="default"&&l(k.value.id,r.value,void 0))},B=v=>{for(const b in m.value)if(m.value[b].key==v){const _=m.value[b].default;k.value.content[r.value]=_,l(k.value.id,r.value,_)}},C=v=>{l(k.value.id,r.value,v.target.value)};return Se(()=>{o.value.addEventListener("focus",M)}),Ae(()=>{o.value.removeEventListener("focus",M)}),(v,b)=>(p(),$("div",{ref_key:"rootEl",ref:o,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":g.fieldKey},[O(ke,{tabs:y(Fe),"model-value":W.value,"onUpdate:modelValue":T},null,8,["tabs","model-value"]),W.value=="pick"||W.value=="css"?(p(),$("div",qn,[W.value=="pick"?(p(),$("div",zn,[O(y(e),{ref_key:"pickerEl",ref:a,"model-value":S.value,options:f.value,"onUpdate:modelValue":B},null,8,["model-value","options"])])):w("",!0),W.value=="css"?(p(),A(re,{key:1,ref_key:"freehandInputEl",ref:u,value:k.value.content[y(r)],error:n.error,onInput:C},null,8,["value","error"])):w("",!0)])):w("",!0)],8,Un))}}),ot=z(Jn,[["__scopeId","data-v-effe7708"]]),Yn=["data-automation-key"],Gn={key:0,class:"main"},Hn={key:0,class:"pickerContainer"},Xn=["value"],Zn=q({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(j.core),t=L(j.builderManager),{setContentValue:s}=te(e,t),l=J("rootEl"),o=J("pickerEl"),a=J("freehandInputEl"),u={pick:o,css:a,default:null},i=n,{componentId:d,fieldKey:h}=le(i),g=x(()=>e.getComponentById(d.value)),r=X((()=>{const f=g.value.content[h.value];return f?/#[A-Fa-f0-9]{6}/.test(f)?"pick":"css":"default"})()),c=()=>{var S;const f=(S=u[r.value])==null?void 0:S.value;f&&(f.focus(),typeof f.selectionStart=="number"&&(f.selectionStart=f.selectionEnd=f.value.length))},k=async f=>{r.value!=f&&(r.value=f,await ye(),c(),f==="default"&&s(g.value.id,h.value,void 0))},m=f=>s(g.value.id,h.value,f.target.value);return Se(()=>{l.value.addEventListener("focus",c)}),Ae(()=>{l.value.removeEventListener("focus",c)}),(f,S)=>(p(),$("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":y(h)},[O(ke,{tabs:y(Fe),"model-value":r.value,"onUpdate:modelValue":k},null,8,["tabs","model-value"]),r.value=="pick"||r.value=="css"?(p(),$("div",Gn,[r.value=="pick"?(p(),$("div",Hn,[I("input",{ref_key:"pickerEl",ref:o,type:"color",value:g.value.content[y(h)],onInput:m},null,40,Xn)])):w("",!0),r.value=="css"?(p(),A(re,{key:1,ref_key:"freehandInputEl",ref:a,value:g.value.content[y(h)],error:n.error,onInput:m},null,8,["value","error"])):w("",!0)])):w("",!0)],8,Yn))}}),Qn=z(Zn,[["__scopeId","data-v-335d2cc7"]]),eo={class:"WdsFieldWrapper colorTransformer"},to={class:"temporaryMissingBar"},no={key:0,class:"WdsFieldWrapper__title"},oo={key:0,class:"WdsFieldWrapper__title__label"},lo={key:0,class:"WdsFieldWrapper__title__label__unit"},so={class:"WdsFieldWrapper__slot"},ao={key:1,class:"WdsFieldWrapper__error"},io={key:2,class:"WdsFieldWrapper__hint"},ro=q({__name:"WdsFieldWrapper",props:{label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},isExpansible:{type:Boolean,required:!1,default:!1},helpButton:{type:[String,Boolean],required:!1,default:void 0}},emits:{helpClick:()=>!0,expand:()=>!0,shrink:()=>!0},setup(n,{emit:e}){const t=e,s=X(!1);function l(){t("expand"),s.value=!0}const o={desc:"OK",fn:()=>{s.value=!1,t("shrink")}};return(a,u)=>(p(),$("div",eo,[s.value?(p(),$(Q,{key:0},[O(Me,{actions:[o],description:n.hint,title:n.label},{default:D(()=>[Re(a.$slots,"default",{},void 0,!0)]),_:3},8,["actions","description","title"]),I("div",to,[u[1]||(u[1]=ie(" Field ")),I("strong",null,Y(n.label),1),u[2]||(u[2]=ie(" is open in a new window. "))])],64)):(p(),$(Q,{key:1},[!s.value&&(n.label||n.helpButton)?(p(),$("div",no,[n.label?(p(),$("label",oo,[ie(Y(n.label),1),n.unit?(p(),$("span",lo," : "+Y(n.unit),1)):w("",!0)])):w("",!0),n.isExpansible?(p(),A(H,{key:1,class:"WdsFieldWrapper__title__help",variant:"neutral",size:"smallIcon","data-writer-tooltip":"Expand",onClick:l},{default:D(()=>u[3]||(u[3]=[I("i",{class:"material-symbols-outlined"},"open_in_new",-1)])),_:1})):w("",!0),n.helpButton?(p(),A(H,{key:2,class:"WdsFieldWrapper__title__help",variant:"neutral",size:"smallIcon","data-writer-tooltip":typeof n.helpButton=="string"?n.helpButton:void 0,onClick:u[0]||(u[0]=i=>a.$emit("helpClick"))},{default:D(()=>u[4]||(u[4]=[I("i",{class:"material-symbols-outlined"},"help",-1)])),_:1},8,["data-writer-tooltip"])):w("",!0)])):w("",!0),I("div",so,[Re(a.$slots,"default",{},void 0,!0)]),n.error?(p(),$("p",ao,Y(n.error),1)):w("",!0),n.hint?(p(),$("p",io,Y(n.hint),1)):w("",!0)],64))]))}}),fe=z(ro,[["__scopeId","data-v-6ccdf720"]]);function uo(n){const e=co(),t=X("assisted");function s(m){if(t.value!==m){switch(m){case"assisted":g(k.value);break;case"freehand":l.value=JSON.stringify(k.value,void 0,2);break}t.value=m}}const l=X(),o=st({});g(n);function a(){o.value={...o.value,[e()]:{value:"",key:""}}}function u(m,f){const S=o.value[m];S&&(o.value={...o.value,[m]:{...S,key:f}})}function i(m,f){const S=o.value[m];S&&(o.value={...o.value,[m]:{...S,value:f}})}function d(m){if(!o.value[m])return;const f={...o.value};delete f[m],o.value=f}function h(m){const f=o.value[m];if(f&&r.value.has(f.key))return"This key is already in use. Please remove duplicate keys."}function g(m){o.value=Object.entries(m).reduce((f,[S,V])=>(f[e()]={key:S,value:String(V)},f),{}),Object.keys(o.value).length===0&&a()}const E=x(()=>Object.values(o.value).some(m=>m.key==="")),r=x(()=>{const m=new Set,f=new Set;for(const{key:S}of Object.values(o.value))m.has(S)?f.add(S):m.add(S);return f}),c=x(()=>{switch(t.value){case"assisted":return r.value.size===0;case"freehand":try{return JSON.parse(l.value),!0}catch{return!1}default:return!1}}),k=x(()=>{switch(t.value){case"assisted":return Object.values(o.value).reduce((m,f)=>(m[f.key]=f.value,m),{});case"freehand":try{return JSON.parse(l.value)}catch{return{}}default:return{}}});return{mode:x({get:()=>t.value,set:s}),assistedEntries:Bt(o),addEntryDisabled:E,addAssistedEntry:a,updateAssistedEntryKey:u,updateAssistedEntryValue:i,removeAssistedEntry:d,getAssistedEntryError:h,freehandValue:l,isValid:c,currentValue:k}}function co(){let n=0;return()=>String(++n)}const po={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},vo={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},fo=q({__name:"BuilderFieldsKeyValueModal",props:{data:{type:Object,required:!0},initialMode:{type:String,required:!1,default:"assisted"}},emits:{submit:n=>typeof n=="object"&&n!==void 0,close:()=>!0},setup(n,{emit:e}){const t=ne({loader:()=>oe(()=>import("./BuilderEmbeddedCodeEditor-BVavrMYM.js").then(f=>f.a),__vite__mapDeps([2,0,1,3]),import.meta.url),loadingComponent:be}),s=n,{mode:l,assistedEntries:o,freehandValue:a,isValid:u,currentValue:i,addAssistedEntry:d,updateAssistedEntryValue:h,updateAssistedEntryKey:g,removeAssistedEntry:E,getAssistedEntryError:r}=uo(s.data);l.value=s.initialMode;const c=e,k=x(()=>[{desc:"Save",fn:()=>c("submit",i.value),disabled:JSON.stringify(s.data)===JSON.stringify(i.value)||!u.value}]),m=x(()=>[{label:"List",value:"assisted",disabled:l.value==="freehand"&&!u.value?"The JSON is not valid":void 0},{label:"JSON",value:"freehand"}]);return(f,S)=>(p(),A(Me,{title:"Category key values","display-close-button":"",actions:k.value,onClose:S[2]||(S[2]=V=>f.$emit("close"))},{titleActions:D(()=>[O(ke,{modelValue:y(l),"onUpdate:modelValue":S[0]||(S[0]=V=>Ge(l)?l.value=V:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:m.value},null,8,["modelValue","tabs"])]),default:D(()=>[y(l)==="freehand"?(p(),A(y(t),{key:0,modelValue:y(a),"onUpdate:modelValue":S[1]||(S[1]=V=>Ge(a)?a.value=V:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):w("",!0),y(l)==="assisted"?(p(),$("div",po,[y(l)==="assisted"?(p(),$("div",vo,[S[4]||(S[4]=I("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),S[5]||(S[5]=I("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(p(!0),$(Q,null,me(y(o),(V,N)=>(p(),$(Q,{key:N},[O(fe,{error:y(r)(N)},{default:D(()=>[O(re,{placeholder:"Type a key...",value:V.key,error:y(r)(N),"onUpdate:value":W=>y(g)(N,W)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),O(fe,null,{default:D(()=>[O(re,{placeholder:"Type a value...",value:V.value,"onUpdate:value":W=>y(h)(N,W)},null,8,["value","onUpdate:value"])]),_:2},1024),I("div",null,[O(H,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:W=>y(E)(N)},{default:D(()=>S[3]||(S[3]=[I("span",{class:"material-symbols-outlined"},"delete",-1)])),_:2},1032,["onClick"])])],64))),128))])):w("",!0),O(H,{variant:"special",size:"small",onClick:y(d)},{default:D(()=>S[6]||(S[6]=[I("span",{class:"material-symbols-outlined"},"add",-1),ie("Add a pair")])),_:1},8,["onClick"])])):w("",!0)]),_:1},8,["actions"]))}}),mo=z(fo,[["__scopeId","data-v-7d3c37f9"]]),ho=["data-automation-key"],yo={class:"BuilderFieldsKeyValue__toolbar"},go={key:1,class:"BuilderFieldsKeyValue__listEmpty"},_o={key:2,class:"BuilderFieldsKeyValue__list"},bo=["data-writer-tooltip"],ko=["data-writer-tooltip"],Io=q({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=n,t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),{getEvaluatedFields:o}=at(t),a=He(e,"componentId"),u=He(e,"fieldKey"),i=X(),d=x(()=>o(e.instancePath)[u.value].value),h=x(()=>t.getComponentById(a.value)),g=x(()=>{var c;const r=(c=h.value.content)==null?void 0:c[u.value];if(r===void 0)return d.value;try{return JSON.parse(r)}catch{return{}}});function E(r){i.value=void 0,l(h.value.id,u.value,JSON.stringify(r,null,2))}return(r,c)=>(p(),$("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":e.fieldKey},[I("div",yo,[O(H,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:c[0]||(c[0]=k=>i.value="assisted")},{default:D(()=>c[3]||(c[3]=[I("i",{class:"material-symbols-outlined"},"edit",-1)])),_:1})]),i.value?(p(),A(mo,{key:0,data:g.value,"initial-mode":i.value,onSubmit:E,onClose:c[1]||(c[1]=k=>i.value=void 0)},null,8,["data","initial-mode"])):w("",!0),Object.keys(d.value).length===0?(p(),$("div",go,[c[5]||(c[5]=I("p",null,"There are no key value categories defined",-1)),O(H,{variant:"special",size:"small",onClick:c[2]||(c[2]=k=>i.value="assisted")},{default:D(()=>c[4]||(c[4]=[I("i",{class:"material-symbols-outlined"},"keyboard_backspace",-1),ie(" Edit ")])),_:1})])):(p(),$("ul",_o,[(p(!0),$(Q,null,me(d.value,(k,m)=>(p(),$("li",{key:m,class:"BuilderFieldsKeyValue__list__item"},[I("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":m,"data-writer-tooltip-strategy":"overflow"},Y(m),9,bo),I("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":k,"data-writer-tooltip-strategy":"overflow"},Y(k||"<empty value>"),9,ko)]))),128))]))],8,ho))}}),So=z(Io,[["__scopeId","data-v-b69d9ec7"]]),Eo=q({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(j.core),t=L(j.builderManager),{setContentValue:s}=te(e,t),l=n,{componentId:o,fieldKey:a}=le(l),u=x(()=>e.getComponentById(o.value)),i=h=>{s(u.value.id,a.value,h)},d=x(()=>{const{type:h}=u.value;return e.getComponentDefinition(h).fields[a.value]});return(h,g)=>{var E;return p(),A(re,{class:"BuilderFieldsObject","data-automation-key":l.fieldKey,multiline:"",variant:"code",value:u.value.content[y(a)],placeholder:(E=d.value)==null?void 0:E.default,error:n.error,onInput:g[0]||(g[0]=r=>i(r.target.value))},null,8,["data-automation-key","value","placeholder","error"])}}}),Co=z(Eo,[["__scopeId","data-v-7749ae31"]]),xo=["data-automation-key"],wo={key:0,class:"main"},Bo={key:0,class:"pickerContainer"},$o={class:"BuilderFieldsPadding__options"},Mo=q({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne({loader:()=>oe(()=>import("./index-C7odhkMa.js").then(b=>b.aZ),__vite__mapDeps([0,1]),import.meta.url),loadingComponent:be}),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=J("rootEl"),a=J("pickerEl"),u=J("freehandInputEl"),i=J("fixedEl"),d=[{key:"all_sides",label:"All sides",match:b=>b.split(" ").length==1&&b.endsWith("px"),default:()=>V.value?V.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:b=>b.split(" ").length==2&&b.endsWith("px"),default:()=>V.value?V.value[2]+" "+V.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:b=>b.split(" ").length==4&&b.endsWith("px"),default:()=>V.value?[V.value[3],V.value[1],V.value[2],V.value[0]].join(" "):"0px 0px 0px 0px"}],h={pick:a,css:u,default:null},g=n,{componentId:E,fieldKey:r}=le(g),c=x(()=>t.getComponentById(E.value)),k=x(()=>d.map(b=>({value:b.key,label:b.label,icon:"padding"}))),m=x(()=>{const b=c.value.content[r.value];for(const _ in d)if(b&&d[_].match(b))return d[_].key;return null}),f=x(()=>{const b=c.value.content[r.value];return b||""}),S=x(()=>{const b=V.value;return b?[b[0].substring(0,b[0].length-2),b[1].substring(0,b[1].length-2),b[2].substring(0,b[2].length-2),b[3].substring(0,b[3].length-2)]:["0","0","0","0"]}),V=x(()=>{const b=c.value.content[r.value];if(b){const _=b.split(" ");if(_.length==1&&_[0].endsWith("px"))return[_[0],_[0],_[0],_[0]];if(_.length==2&&_[0].endsWith("px")&&_[0].endsWith("px"))return[_[1],_[1],_[0],_[0]];if(_.length==4&&_[0].endsWith("px")&&_[1].endsWith("px")&&_[2].endsWith("px")&&_[3].endsWith("px"))return[_[3],_[1],_[0],_[2]]}else return null;return null}),W=X((()=>{if(!f.value)return"default";for(const b in d)if(d[b].match(f.value))return"pick";return"css"})()),M=()=>{var _;const b=(_=h[W.value])==null?void 0:_.value;b&&(b.focus(),typeof b.selectionStart=="number"&&(b.selectionStart=b.selectionEnd=b.value.length))},T=async b=>{W.value!=b&&(W.value=b,await ye(),M(),b==="default"&&l(c.value.id,r.value,void 0))},B=b=>{for(const _ in d)if(d[_].key==b){const K=d[_].default();c.value.content[r.value]=K,l(c.value.id,r.value,K)}ye(()=>{var _;(_=i.value)==null||_.focus()})},C=b=>{l(c.value.id,r.value,b.target.value)},v=(b,_,K)=>{const R=Number(b),F=c.value.content[r.value];if(_=="all_sides")l(c.value.id,r.value,R+"px");else if(_=="XY sides"){const U=F.split(" ");K=="x"?U[1]=R+"px":K=="y"&&(U[0]=R+"px"),l(c.value.id,r.value,U.join(" "))}else if(_=="Per side"){const U=F.split(" ");K=="top"?U[0]=R+"px":K=="right"?U[1]=R+"px":K=="bottom"?U[2]=R+"px":K=="left"&&(U[3]=R+"px"),l(c.value.id,r.value,U.join(" "))}};return Se(()=>{o.value.addEventListener("focus",M)}),Ae(()=>{o.value.removeEventListener("focus",M)}),(b,_)=>(p(),$("div",{ref_key:"rootEl",ref:o,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":g.fieldKey},[O(ke,{tabs:y(Fe),"model-value":W.value,"onUpdate:modelValue":T},null,8,["tabs","model-value"]),W.value=="pick"||W.value=="css"?(p(),$("div",wo,[W.value=="pick"?(p(),$("div",Bo,[O(y(e),{ref_key:"pickerEl",ref:a,"model-value":m.value,options:k.value,"onUpdate:modelValue":B},null,8,["model-value","options"]),I("div",$o,[m.value=="all_sides"?(p(),$(Q,{key:0},[_[7]||(_[7]=I("i",null,"All",-1)),O(de,{ref_key:"fixedEl",ref:i,type:"number","model-value":S.value[0],"onUpdate:modelValue":_[0]||(_[0]=K=>v(K,m.value))},null,8,["model-value"]),_[8]||(_[8]=I("div",null,"px",-1))],64)):w("",!0),m.value=="XY sides"?(p(),$(Q,{key:1},[_[9]||(_[9]=I("i",null,"X",-1)),O(de,{type:"number","model-value":S.value[0],"onUpdate:modelValue":_[1]||(_[1]=K=>v(K,m.value,"x"))},null,8,["model-value"]),_[10]||(_[10]=I("div",null,"px",-1)),_[11]||(_[11]=I("i",null,"Y",-1)),O(de,{type:"number","model-value":S.value[2],"onUpdate:modelValue":_[2]||(_[2]=K=>v(K,m.value,"y"))},null,8,["model-value"]),_[12]||(_[12]=I("div",null,"px",-1))],64)):w("",!0),m.value=="Per side"?(p(),$(Q,{key:2},[_[13]||(_[13]=I("i",null,"Left",-1)),O(de,{type:"number","model-value":S.value[0],"onUpdate:modelValue":_[3]||(_[3]=K=>v(K,m.value,"left"))},null,8,["model-value"]),_[14]||(_[14]=I("div",null,"px",-1)),_[15]||(_[15]=I("i",null,"Right",-1)),O(de,{type:"number","model-value":S.value[1],"onUpdate:modelValue":_[4]||(_[4]=K=>v(K,m.value,"right"))},null,8,["model-value"]),_[16]||(_[16]=I("div",null,"px",-1)),_[17]||(_[17]=I("i",null,"Top",-1)),O(de,{type:"number","model-value":S.value[2],"onUpdate:modelValue":_[5]||(_[5]=K=>v(K,m.value,"top"))},null,8,["model-value"]),_[18]||(_[18]=I("div",null,"px",-1)),_[19]||(_[19]=I("i",null,"Bottom",-1)),O(de,{type:"number","model-value":S.value[3],"onUpdate:modelValue":_[6]||(_[6]=K=>v(K,m.value,"bottom"))},null,8,["model-value"]),_[20]||(_[20]=I("div",null,"px",-1))],64)):w("",!0)])])):w("",!0),W.value=="css"?(p(),A(re,{key:1,ref_key:"freehandInputEl",ref:u,value:c.value.content[y(r)],error:n.error,onInput:C},null,8,["value","error"])):w("",!0)])):w("",!0)],8,xo))}}),Ao=z(Mo,[["__scopeId","data-v-4d3bd6b8"]]),Fo=["data-automation-key"],To={key:0,class:"main"},Vo={key:0,class:"pickerContainer"},Oo={class:"param"},Ro={class:"header"},Po=["value"],Lo={class:"param"},jo={class:"header"},Wo=["value"],Do={class:"param"},No={class:"header"},Ko=["value"],Uo={class:"param"},qo={class:"header"},zo=["value"],Jo={class:"param"},Yo=["value"],Go=q({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(j.core),t=L(j.builderManager),{setContentValue:s}=te(e,t),l=J("rootEl"),o=J("freehandInputEl"),a=J("paramOffsetXEl"),u=J("paramOffsetYEl"),i=J("paramBlurRadiusEl"),d=J("paramSpreadRadiusEl"),h=J("paramColorEl"),g={pick:a,css:o,default:null},E=n,{componentId:r,fieldKey:c}=le(E),k=x(()=>e.getComponentById(r.value)),m=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,S=X((()=>{const B=k.value.content[c.value];return B?m.test(B)?"pick":"css":"default"})()),V=()=>{var C;const B=(C=g[S.value])==null?void 0:C.value;B&&(B.focus(),typeof B.selectionStart=="number"&&(B.selectionStart=B.selectionEnd=B.value.length))},N=async B=>{S.value!=B&&(S.value=B,await ye(),V(),B==="default"&&s(k.value.id,c.value,void 0))},W=()=>{const B=a.value.value,C=u.value.value,v=i.value.value,b=d.value.value,_=h.value.value,K=`${B}px ${C}px ${v}px ${b}px ${_}`;s(k.value.id,c.value,K)},M=B=>{s(k.value.id,c.value,B.target.value)},T=x(()=>{var v;const B=k.value.content[c.value];return(v=B==null?void 0:B.match(m))==null?void 0:v.groups});return Se(()=>{l.value.addEventListener("focus",V)}),Ae(()=>{l.value.removeEventListener("focus",V)}),(B,C)=>{var v,b,_,K,R,F,U,ee,se,ue,Ce,xe,we;return p(),$("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":E.fieldKey},[O(ke,{tabs:y(Fe),"model-value":S.value,"onUpdate:modelValue":N},null,8,["tabs","model-value"]),S.value=="pick"||S.value=="css"?(p(),$("div",To,[S.value=="pick"?(p(),$("div",Vo,[I("div",Oo,[I("div",Ro,[C[0]||(C[0]=I("div",{class:"name"},"Offset X",-1)),Be(I("div",{class:"value"},Y((v=T.value)==null?void 0:v.offsetX)+"px ",513),[[Te,(b=T.value)==null?void 0:b.offsetX]])]),I("input",{ref_key:"paramOffsetXEl",ref:a,type:"range",min:"0",max:"32",value:(_=T.value)==null?void 0:_.offsetX,onInput:W},null,40,Po)]),I("div",Lo,[I("div",jo,[C[1]||(C[1]=I("div",{class:"name"},"Offset Y",-1)),Be(I("div",{class:"value"},Y((K=T.value)==null?void 0:K.offsetY)+"px ",513),[[Te,(R=T.value)==null?void 0:R.offsetY]])]),I("input",{ref_key:"paramOffsetYEl",ref:u,type:"range",min:"0",max:"32",value:(F=T.value)==null?void 0:F.offsetY,onInput:W},null,40,Wo)]),I("div",Do,[I("div",No,[C[2]||(C[2]=I("div",{class:"name"},"Blur radius",-1)),Be(I("div",{class:"value"},Y((U=T.value)==null?void 0:U.blurRadius)+"px ",513),[[Te,(ee=T.value)==null?void 0:ee.blurRadius]])]),I("input",{ref_key:"paramBlurRadiusEl",ref:i,type:"range",min:"0",max:"32",value:(se=T.value)==null?void 0:se.blurRadius,onInput:W},null,40,Ko)]),I("div",Uo,[I("div",qo,[C[3]||(C[3]=I("div",{class:"name"},"Spread radius",-1)),Be(I("div",{class:"value"},Y((ue=T.value)==null?void 0:ue.spreadRadius)+"px ",513),[[Te,(Ce=T.value)==null?void 0:Ce.spreadRadius]])]),I("input",{ref_key:"paramSpreadRadiusEl",ref:d,type:"range",min:"-16",max:"32",value:(xe=T.value)==null?void 0:xe.spreadRadius,onInput:W},null,40,zo)]),I("div",Jo,[C[4]||(C[4]=I("div",{class:"header"},[I("div",{class:"name"},"Color")],-1)),I("input",{ref_key:"paramColorEl",ref:h,type:"color",value:(we=T.value)==null?void 0:we.color,onInput:W},null,40,Yo)])])):w("",!0),S.value=="css"?(p(),A(re,{key:1,ref_key:"freehandInputEl",ref:o,value:k.value.content[y(c)],error:n.error,onInput:M},null,8,["value","error"])):w("",!0)])):w("",!0)],8,Fo)}}}),Ho=z(Go,[["__scopeId","data-v-3d00b12a"]]),Xo=["data-automation-key"],Zo=q({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=L(j.core),t=L(j.builderManager),{setContentValue:s}=te(e,t),l=n,{componentId:o,fieldKey:a}=le(l),u=x(()=>e.getComponentById(o.value)),i=x(()=>{const{type:r}=u.value;return e.getComponentDefinition(r).fields[a.value]}),d=x(()=>`${l.componentId}-${l.fieldKey}`),h={uiComponents:()=>{const r=e.getComponents(void 0,{sortedByPosition:!0}).filter(k=>e.isChildOf("root",k.id)),c={};return r.forEach(k=>{c[k.id]=k.id}),c},uiComponentsWithEvents:()=>e.getComponents(void 0,{sortedByPosition:!0}).filter(r=>e.isChildOf("root",r.id)).filter(r=>!!e.getComponentDefinition(r.type).events).reduce((r,c)=>(r[c.id]=c.id,r),{}),eventTypes:(r,c)=>{var V;const k=(V=r.getComponentById(c).content)==null?void 0:V.refComponentId,m=e.getComponentById(k);if(!m)return{};const f=r.getComponentDefinition(m.type);return Object.fromEntries(Object.keys(f.events??{}).map(N=>[N,N]))}},g=x(()=>{const r=i.value;return r.options?typeof r.options=="function"?r.options(e,o.value):typeof r.options=="string"?h==null?void 0:h[r.options](e,o.value):r.options:{}}),E=r=>{s(u.value.id,a.value,r.target.value)};return(r,c)=>{var k,m;return p(),$("div",{class:"BuilderFieldsText","data-automation-key":l.fieldKey},[!i.value.control||i.value.control==y(We).Text?(p(),A(re,{key:0,class:"content","input-id":d.value,value:u.value.content[y(a)],placeholder:(k=i.value)==null?void 0:k.default,options:g.value,error:n.error,onInput:E},null,8,["input-id","value","placeholder","options","error"])):i.value.control==y(We).Textarea?(p(),A(re,{key:1,multiline:"",variant:"text",class:"content","input-id":d.value,value:u.value.content[y(a)],placeholder:(m=i.value)==null?void 0:m.default,error:n.error,onInput:E},null,8,["input-id","value","placeholder","error"])):w("",!0)],8,Xo)}}}),je=z(Zo,[["__scopeId","data-v-b2fda2e3"]]),Qo=["data-automation-key"],el={key:0,class:"main"},tl={key:0,class:"pickerContainer"},nl={key:0,class:"fixedContainer"},ol=q({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne({loader:()=>oe(()=>import("./index-C7odhkMa.js").then(v=>v.aZ),__vite__mapDeps([0,1]),import.meta.url),loadingComponent:be}),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=J("rootEl"),a=J("pickerEl"),u=J("freehandInputEl"),i=J("fixedEl"),d=[{key:"fixed",label:"Fixed",match:v=>v.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:v=>v=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:v=>v=="100%",default:"100%"}],h={pick:a,css:u,default:null},g=n,{componentId:E,fieldKey:r}=le(g),c=x(()=>t.getComponentById(E.value)),k=x(()=>d.map(v=>({value:v.key,label:v.label,icon:"width"}))),m=x(()=>{const v=c.value.content[r.value];for(const b in d)if(v&&d[b].match(v))return d[b].key;return null}),f=x(()=>{const v=c.value.content[r.value];return v||""}),S=x(()=>{const v=c.value.content[r.value];if(v){if(v.endsWith("px"))return v.substring(0,v.length-2)}else return null;return null}),N=X((()=>{if(!f.value)return"default";for(const v in d)if(d[v].match(f.value))return"pick";return"css"})()),W=()=>{var b;const v=(b=h[N.value])==null?void 0:b.value;v&&(v.focus(),typeof v.selectionStart=="number"&&(v.selectionStart=v.selectionEnd=v.value.length))},M=async v=>{N.value!=v&&(N.value=v,await ye(),W(),v==="default"&&l(c.value.id,r.value,void 0))},T=v=>{for(const b in d)if(d[b].key==v){const _=d[b].default;c.value.content[r.value]=_,l(c.value.id,r.value,_)}v=="fixed"&&ye(()=>{i.value.focus()})},B=v=>{l(c.value.id,r.value,v.target.value)},C=v=>{l(c.value.id,r.value,`${v}px`)};return Se(()=>{o.value.addEventListener("focus",W)}),Ae(()=>{o.value.removeEventListener("focus",W)}),(v,b)=>(p(),$("div",{ref_key:"rootEl",ref:o,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":g.fieldKey},[O(ke,{tabs:y(Fe),"model-value":N.value,"onUpdate:modelValue":M},null,8,["tabs","model-value"]),N.value=="pick"||N.value=="css"?(p(),$("div",el,[N.value=="pick"?(p(),$("div",tl,[O(y(e),{ref_key:"pickerEl",ref:a,"model-value":m.value,options:k.value,"onUpdate:modelValue":T},null,8,["model-value","options"]),m.value=="fixed"?(p(),$("div",nl,[O(de,{ref_key:"fixedEl",ref:i,type:"number","model-value":S.value,invalid:n.error!==void 0,"onUpdate:modelValue":C},null,8,["model-value","invalid"]),b[0]||(b[0]=I("div",null,"px",-1))])):w("",!0)])):w("",!0),N.value=="css"?(p(),A(re,{key:1,ref_key:"freehandInputEl",ref:u,value:c.value.content[y(r)],onInput:B},null,8,["value"])):w("",!0)])):w("",!0)],8,Qo))}}),ll=z(ol,[["__scopeId","data-v-78cafd3f"]]),sl=["data-automation-key"],al={class:"tools"},il=["onClick"],rl={class:"toolName"},ul={class:"addToolForm"},dl=q({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(n){const e=ne({loader:()=>oe(()=>import("./BuilderGraphSelect-BG7-V2uF.js"),__vite__mapDeps([4,0,1,5,6,7,8,9]),import.meta.url),loadingComponent:be}),t=ne(()=>oe(()=>import("./BuilderEmbeddedCodeEditor-BVavrMYM.js").then(B=>B.a),__vite__mapDeps([2,0,1,3]),import.meta.url)),s=L(j.core),l=L(j.builderManager),{setContentValue:o}=te(s,l),u={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:""},i=X(u),d=x(()=>{switch(i.value.type){case"function":return!i.value.code;case"graph":return!i.value.graphIds;default:return!0}}),h=x({get:()=>i.value.graphIds.split(","),set(B){i.value={...i.value,graphIds:B.join(",")}}}),g=n,{componentId:E,fieldKey:r}=le(g),c=x(()=>s.getComponentById(E.value)),k=x(()=>{let B={};try{B=JSON.parse(c.value.content[r.value])}catch{B={}}return B});function m(){i.value={...u,isShown:!0}}function f(){const{type:B,code:C,graphIds:v}=i.value;if(B=="function")return{...JSON.parse(C),type:B};if(B=="graph"){const b=v.split(",").map(_=>_.trim());return{type:B,graph_ids:b}}throw"Unexpected tool type."}function S(B){let C=[];const{originalName:v,name:b}=B;return b||C.push("The name cannot be empty."),Object.keys(k.value).includes(b)&&!(v||v==b)&&C.push("An existing tool with the specified name already exists."),C}function V(){const B=S(i.value);if(B.length>0){B.forEach(alert);return}let C;try{C=f()}catch{alert("Incorrect tool definition");return}const v=JSON.stringify({...k.value,...i.value.originalName?{[i.value.originalName]:void 0}:{},[i.value.name]:C});o(c.value.id,r.value,v),i.value.isShown=!1}function N(B,C){var b;const{type:v}=C;if(v=="function")return{isShown:!0,type:"function",originalName:B,name:B,graphIds:"",code:JSON.stringify(C,void 0,2)};if(v=="graph")return{isShown:!0,type:"graph",originalName:B,name:B,graphIds:(b=C.graph_ids)==null?void 0:b.join(","),code:""};throw"Unexpected tool type;"}function W(B){var v;const C=(v=k.value)==null?void 0:v[B];C&&(i.value=N(B,C))}function M(B){const C=JSON.stringify({...k.value,[B]:void 0});o(c.value.id,r.value,C)}const T=x(()=>[{desc:"cancel",fn:()=>i.value.isShown=!1},{desc:"Save",disabled:d.value,fn:V}]);return(B,C)=>(p(),$("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":g.fieldKey},[I("div",al,[(p(!0),$(Q,null,me(k.value,(v,b)=>(p(),$("div",{key:b,class:"tool",onClick:_=>W(b)},[I("div",rl,Y(b),1),O(H,{variant:"primary",size:"small",class:"delete",onClick:$t(_=>M(b),["stop"])},{default:D(()=>C[4]||(C[4]=[I("i",{class:"material-symbols-outlined"},"delete",-1)])),_:2},1032,["onClick"])],8,il))),128))]),O(H,{size:"small",onClick:m},{default:D(()=>C[5]||(C[5]=[I("i",{class:"material-symbols-outlined"},"add",-1),ie(" Add tool")])),_:1}),i.value.isShown?(p(),A(Me,{key:0,actions:T.value,title:"Add tool","allow-overflow":""},{default:D(()=>[I("div",ul,[O(fe,{label:"Tool type"},{default:D(()=>[O(Mt,{modelValue:i.value.type,"onUpdate:modelValue":C[0]||(C[0]=v=>i.value.type=v)},{default:D(()=>C[6]||(C[6]=[I("option",{value:"function"},"Function",-1),I("option",{value:"graph"},"Knowledge graph",-1)])),_:1},8,["modelValue"])]),_:1}),O(fe,{label:"Tool name"},{default:D(()=>[O(de,{modelValue:i.value.name,"onUpdate:modelValue":C[1]||(C[1]=v=>i.value.name=v)},null,8,["modelValue"])]),_:1}),i.value.type=="function"?(p(),A(fe,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:D(()=>[O(y(t),{modelValue:i.value.code,"onUpdate:modelValue":C[2]||(C[2]=v=>i.value.code=v),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):w("",!0),i.value.type=="graph"?(p(),A(fe,{key:1,label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas."},{default:D(()=>[O(y(e),{modelValue:h.value,"onUpdate:modelValue":C[3]||(C[3]=v=>h.value=v),"enable-multi-selection":""},null,8,["modelValue"])]),_:1})):w("",!0)])]),_:1},8,["actions"])):w("",!0)],8,sl))}}),cl=z(dl,[["__scopeId","data-v-1584a53c"]]),pl=q({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0}},setup(n){const e=ne({loader:()=>oe(()=>import("./BuilderEmbeddedCodeEditor-BVavrMYM.js").then(h=>h.a),__vite__mapDeps([2,0,1,3]),import.meta.url),loadingComponent:be}),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=n,{componentId:a,fieldKey:u}=le(o),i=x(()=>t.getComponentById(a.value)),d=X(i.value.content[u.value]);return $e(d,h=>{l(i.value.id,u.value,h)}),(h,g)=>(p(),A(y(e),{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=E=>d.value=E),language:"python",variant:n.isExpanded?"full":"minimal",class:"BuilderFieldsCode"},null,8,["modelValue","variant"]))}}),vl=z(pl,[["__scopeId","data-v-65363ed2"]]),fl=["data-automation-key"],ml=q({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(n){const e=ne(()=>oe(()=>import("./index-C7odhkMa.js").then(r=>r.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=n,{componentId:a,fieldKey:u}=le(o),i=x(()=>t.getComponentById(a.value)),d=x({get:()=>{var r;return((r=i.value)==null?void 0:r.content[o.fieldKey])??""},set:r=>l(i.value.id,u.value,r)}),h=x(()=>{const r=new Set;for(const m of t.getComponents("blueprints_root"))m.content.key&&r.add(m.content.key);const c=[...r].sort((m,f)=>m.localeCompare(f)).map(m=>({value:m,label:m,icon:"linked_services"})),k=[{value:"",label:"(No blueprint)",icon:"block"},...c];if(!k.some(m=>m.value===d.value)){const m=d.value;k.push({value:m,label:m})}return k}),g=x(()=>{const r=t.getComponents("blueprints_root").find(c=>c.content.key===d.value);return r==null?void 0:r.id});function E(){g.value&&(s.setSelection(g.value,null,"click"),t.setActivePageId(g.value))}return(r,c)=>(p(),$("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":o.fieldKey},[O(y(e),{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=k=>d.value=k),options:h.value},null,8,["modelValue","options"]),g.value?(p(),A(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:E},{default:D(()=>c[1]||(c[1]=[I("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:1})):w("",!0)],8,fl))}}),hl=z(ml,[["__scopeId","data-v-86fc9518"]]),yl=["data-automation-key"],gl=q({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(n){const e=ne(()=>oe(()=>import("./index-C7odhkMa.js").then(g=>g.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=n,{componentId:a,fieldKey:u}=le(o),i=x(()=>t.getComponentById(a.value)),d=x({get:()=>{var g;return((g=i.value)==null?void 0:g.content[o.fieldKey])??""},set:g=>l(i.value.id,u.value,g)}),h=x(()=>{const g=t.userFunctions.value.map(r=>r.name).sort((r,c)=>r.localeCompare(c)).map(r=>({value:r,label:r,icon:"function"})),E=[{value:"",label:"(No handler)",icon:"block"},...g];if(!E.some(r=>r.value===d.value)){const r=d.value;E.push({value:r,label:r})}return E});return(g,E)=>(p(),$("div",{class:"BuilderFieldsHandler","data-automation-key":o.fieldKey},[O(y(e),{modelValue:d.value,"onUpdate:modelValue":E[0]||(E[0]=r=>d.value=r),options:h.value},null,8,["modelValue","options"])],8,yl))}}),_l=["data-automation-key"],bl=["href","data-writer-tooltip"],kl=q({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0}},setup(n){const e=ne(()=>oe(()=>import("./BuilderApplicationSelect-CotNiguw.js"),__vite__mapDeps([10,0,1,5,6,7,8,11]),import.meta.url)),t=ne(()=>oe(()=>import("./BuilderGraphSelect-BG7-V2uF.js"),__vite__mapDeps([4,0,1,5,6,7,8,9]),import.meta.url)),s=L(j.core),l=L(j.builderManager),{setContentValue:o}=te(s,l),a=n,{componentId:u,fieldKey:i}=le(a),d=x(()=>s.getComponentById(u.value)),h=J("selectorEl"),g=x(()=>a.resourceType==="graph"?t:e),E=x(()=>{switch(a.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";default:return}}),r=x(()=>{var m,f;if(!c.value)return;const k=(f=(m=h.value)==null?void 0:m.selectedData)==null?void 0:f.organization_id;if(k)switch(a.resourceType){case"graph":{const S=new URLSearchParams({graphId:c.value});return`https://app.writer.com/aistudio/organization/${k}/knowledge-graph?${S}`}case"application":return`https://app.writer.com/aistudio/organization/${k}/app/${c.value}`;default:return}}),c=x({get:()=>d.value.content[a.fieldKey]??"",set(k){o(d.value.id,i.value,String(k))}});return(k,m)=>(p(),$("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":a.fieldKey},[(p(),A(At(g.value),{ref_key:"selectorEl",ref:h,modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=f=>c.value=f)},null,8,["modelValue"])),r.value?(p(),$("a",{key:0,class:"BuilderFieldsWriterResourceId__link",href:r.value,target:"_blank","data-writer-tooltip":E.value},m[1]||(m[1]=[I("i",{class:"material-symbols-outlined"}," open_in_new ",-1)]),8,bl)):w("",!0)],8,_l))}}),lt=z(kl,[["__scopeId","data-v-1a3ddfd9"]]),Il=["data-automation-key"],Sl=q({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne(()=>oe(()=>import("./index-C7odhkMa.js").then(k=>k.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=n,{componentId:a,fieldKey:u}=le(o),i=x(()=>t.getComponentById(a.value));function*d(){yield t.getComponentById("root"),yield*t.getComponentsNested("root")}const h=x(()=>{const k=[];for(const m of d()){const f=t.getComponentDefinition(m==null?void 0:m.type);if(!(f!=null&&f.events)||Object.keys(f.events).length===0)continue;const{name:S,previewText:V,possibleImageUrls:N}=jt(t,m),W=N.value,M=m.id;k.push({value:M,label:V.value||S.value,detail:V.value?S.value:void 0,icon:W})}return k}),g=x({get:()=>i.value.content[o.fieldKey]??"",set(k){l(i.value.id,u.value,String(k))}}),E=x(()=>{let k=g.value;for(;k;){const m=t.getComponentById(k);if(m.type==="page")return m.id;k=m.parentId}}),r=x(()=>t.getComponentById(g.value));function c(){!g.value||!r.value||(E.value&&(s.mode.value="ui",t.setActivePageId(E.value)),s.setSelection(g.value,null,"click"))}return(k,m)=>(p(),$("div",{class:"BuilderFieldsComponentId","data-automation-key":o.fieldKey},[O(y(e),{modelValue:g.value,"onUpdate:modelValue":m[0]||(m[0]=f=>g.value=f),options:h.value,"enable-search":""},null,8,["modelValue","options"]),g.value?(p(),A(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!r.value,onClick:c},{default:D(()=>m[1]||(m[1]=[I("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:1},8,["disabled"])):w("",!0)],8,Il))}}),El=z(Sl,[["__scopeId","data-v-f786fecb"]]),Cl=["data-automation-key"],xl=q({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(n){const e=ne(()=>oe(()=>import("./index-C7odhkMa.js").then(E=>E.aZ),__vite__mapDeps([0,1]),import.meta.url)),t=L(j.core),s=L(j.builderManager),{setContentValue:l}=te(t,s),o=n,{componentId:a,fieldKey:u}=le(o),i=x(()=>t.getComponentById(a.value)),d=x(()=>{var E;return t.getComponentDefinition((E=i.value)==null?void 0:E.type)}),h=x(()=>{var m,f;const E=(f=Object.entries(((m=d.value)==null?void 0:m.fields)??{}).find(([,S])=>S.type===G.ComponentId))==null?void 0:f.at(0);if(E===void 0)return[];const r=i.value.content[String(E)],c=t.getComponentById(r),k=t.getComponentDefinition(c==null?void 0:c.type);return k!=null&&k.events?Object.keys(k.events).map(S=>({value:S,label:S})):[]}),g=x({get:()=>i.value.content[o.fieldKey]??"",set(E){l(i.value.id,u.value,String(E))}});return(E,r)=>(p(),$("div",{class:"BuilderFieldsComponentEventType","data-automation-key":o.fieldKey},[h.value.length?(p(),A(y(e),{key:0,modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=c=>g.value=c),options:h.value,"hide-icons":""},null,8,["modelValue","options"])):(p(),A(de,{key:1,modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=c=>g.value=c)},null,8,["modelValue"]))],8,Cl))}});function wl(n,e){const{getEvaluatedFields:t}=at(n),s=x(()=>{var u;const o=(u=e.value.at(-1))==null?void 0:u.componentId;if(o===void 0)return{};const a=n.getComponentById(o);return a?n.getComponentDefinition(a.type).fields??{}:{}}),l=x(()=>t(e.value));return x(()=>Object.entries(s.value).reduce((o,[a,u])=>{const i=l.value[a].value;return o[a]=Bl(u,i),o},{}))}function Bl(n,e){let t=n.validator;if(t===void 0&&typeof n.options=="object"&&n.options!==null&&Object.keys(n.options).length>0&&(t=Ft(Object.keys(n.options))),t===void 0)return;const s=Tt(t);if(!(s(e)||s.errors===void 0))return Ml(s.errors)}function $l(n){var t;if(n.keyword==="format"&&Object.values(Vt).includes(n.params.format))return Ot[n.params.format].errorMessage;let e="";return n.instancePath&&(e+=`${n.instancePath} `),e+=n.message,Array.isArray((t=n.params)==null?void 0:t.allowedValues)&&(e+=`: ${n.params.allowedValues.join(", ")}`),e}function Ml(n){return n.map($l).join(`
`)}const Al={key:0,class:"BuilderSettingsProperties"},Fl={key:0,class:"BuilderSettingsProperties__category__title"},Tl=q({__name:"BuilderSettingsProperties",setup(n){const e=L(j.core),t=L(j.builderManager),s=X(new Set),l=x(()=>{var c,k;return Lt((k=(c=t.firstSelectedItem)==null?void 0:c.value)==null?void 0:k.instancePath)}),o=x(()=>e.getComponentById(t.firstSelectedId.value)),a=x(()=>{const{type:c}=o.value;return e.getComponentDefinition(c)}),u=x(()=>{var c;return(c=a.value)==null?void 0:c.fields});function i(c){return c.type===G.Code||c.type===G.Object||c.control===We.Textarea}const d=wl(e,l),h=x(()=>[ve.General,ve.Style,ve.Tools].filter(c=>{var k;return(k=g.value[c])==null?void 0:k.length})),g=x(()=>{const c=Object.entries(u.value);return{[ve.General]:c.filter(([m,f])=>!f.category||f.category==ve.General),[ve.Style]:c.filter(([m,f])=>f.category==ve.Style),[ve.Tools]:c.filter(([m,f])=>f.category==ve.Tools)}});function E(c){s.value.add(c)}function r(c){s.value.delete(c)}return(c,k)=>y(t).isSingleSelectionActive&&u.value?(p(),$("div",Al,[(p(!0),$(Q,null,me(h.value,m=>(p(),$("div",{key:m,class:"BuilderSettingsProperties__category"},[g.value[m].length>0&&m!=="General"?(p(),$("h4",Fl,Y(m),1)):w("",!0),(p(!0),$(Q,null,me(g.value[m],([f,S])=>(p(),$("div",{key:f,class:"BuilderSettingsProperties__category__field"},[O(fe,{label:m==="Tools"?void 0:S.name??f,hint:S.desc,unit:S.type,error:y(d)[f],"is-expansible":i(S),onExpand:V=>E(f),onShrink:V=>r(f)},{default:D(()=>[S.type==y(G).Color?(p(),A(Qn,{key:0,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).Shadow?(p(),A(Ho,{key:1,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).KeyValue?(p(),A(So,{key:2,"field-key":f,"component-id":o.value.id,"instance-path":l.value,error:y(d)[f]},null,8,["field-key","component-id","instance-path","error"])):w("",!0),S.type==y(G).Text||S.type==y(G).Boolean?(p(),A(je,{key:3,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).BlueprintKey?(p(),A(hl,{key:4,"field-key":f,"component-id":o.value.id},null,8,["field-key","component-id"])):w("",!0),S.type==y(G).Handler?(p(),A(gl,{key:5,"field-key":f,"component-id":o.value.id},null,8,["field-key","component-id"])):w("",!0),S.type==y(G).Number?(p(),A(je,{key:6,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).IdKey?(p(),A(je,{key:7,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).Object?(p(),A(Co,{key:8,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).Width?(p(),A(ll,{key:9,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).HAlign?(p(),A(ot,{key:10,direction:"horizontal","field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).VAlign?(p(),A(ot,{key:11,direction:"vertical","field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).Padding?(p(),A(Ao,{key:12,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).Tools?(p(),A(cl,{key:13,"field-key":f,"component-id":o.value.id},null,8,["field-key","component-id"])):w("",!0),S.type==y(G).Code?(p(),A(vl,{key:14,"field-key":f,"component-id":o.value.id,"is-expanded":s.value.has(f)},null,8,["field-key","component-id","is-expanded"])):w("",!0),S.type==y(G).WriterGraphId?(p(),A(lt,{key:15,"field-key":f,"component-id":o.value.id,error:y(d)[f],"resource-type":"graph"},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).WriterAppId?(p(),A(lt,{key:16,"field-key":f,"component-id":o.value.id,error:y(d)[f],"resource-type":"application"},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).ComponentId?(p(),A(El,{key:17,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0),S.type==y(G).ComponentEventType?(p(),A(xl,{key:18,"field-key":f,"component-id":o.value.id,error:y(d)[f]},null,8,["field-key","component-id","error"])):w("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"])]))),128))]))),128))])):w("",!0)}}),Vl=z(Tl,[["__scopeId","data-v-7d019e87"]]),Ol={class:"BuilderSectionTitle"},Rl={class:"material-symbols-outlined"},Pl=q({__name:"BuilderSectionTitle",props:{icon:{type:String,required:!0},label:{type:String,required:!0}},setup(n){return(e,t)=>(p(),$("div",Ol,[I("i",Rl,Y(n.icon),1),I("h3",null,Y(n.label),1)]))}}),ht=z(Pl,[["__scopeId","data-v-731e03f5"]]),Ll={key:0,class:"BuilderSettingsBinding"},jl={class:"main"},Wl='Links this component to a state element, in a two-way fashion. Reference the state element directly, i.e. use "my_var" instead of "@{my_var}".',Dl=q({__name:"BuilderSettingsBinding",setup(n){const e=L(j.core),t=L(j.builderManager),{setBinding:s}=te(e,t),l=x(()=>e.getComponentById(t.firstSelectedId.value));return(o,a)=>y(t).isSingleSelectionActive?(p(),$("div",Ll,[O(ht,{icon:"link",label:"Binding"}),I("div",jl,[O(fe,{label:"State element",hint:Wl},{default:D(()=>{var u;return[O(re,{type:"state",value:(u=l.value.binding)==null?void 0:u.stateRef,placeholder:"my_var",onInput:a[0]||(a[0]=i=>y(s)(l.value.id,i.target.value))},null,8,["value"])]}),_:1})])])):w("",!0)}}),Nl=z(Dl,[["__scopeId","data-v-51a930b8"]]),Kl={key:0,class:"BuilderSettingsVisibility"},Ul={class:"main"},ql={class:"flexRow"},zl=["checked"],Jl='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',Yl=q({__name:"BuilderSettingsVisibility",setup(n){const e=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],t=x({get(){const u=a.value.visible;return(u==null?void 0:u.expression)==="custom"?"custom":u===void 0||u.expression===!0?"yes":"no"},set(u){var i,d;u==="custom"?o(a.value.id,"custom",(i=a.value.visible)==null?void 0:i.binding,(d=a.value.visible)==null?void 0:d.reversed):o(a.value.id,u==="yes")}}),s=L(j.core),l=L(j.builderManager),{setVisibleValue:o}=te(s,l),a=x(()=>s.getComponentById(l.firstSelectedId.value));return(u,i)=>y(l).isSingleSelectionActive?(p(),$("div",Kl,[O(ht,{icon:"visibility",label:"Visibility"}),I("div",Ul,[O(ke,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=d=>t.value=d),tabs:e},null,8,["modelValue"]),typeof a.value.visible<"u"&&a.value.visible.expression==="custom"?(p(),A(fe,{key:0,hint:Jl},{default:D(()=>[O(re,{value:a.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:i[1]||(i[1]=d=>y(o)(a.value.id,"custom",d.target.value,a.value.visible.reversed))},null,8,["value"]),I("div",ql,[I("input",{type:"checkbox",checked:a.value.visible.reversed,onInput:i[2]||(i[2]=d=>y(o)(a.value.id,"custom",a.value.visible.binding,d.target.checked))},null,40,zl),i[3]||(i[3]=I("span",null,"Reverse",-1))])]),_:1})):w("",!0)])])):w("",!0)}}),Gl=z(Yl,[["__scopeId","data-v-23772341"]]),Hl=["data-writer-tooltip"],Xl=q({__name:"BuilderCopyText",setup(n){const e=X("Copy to clipboard");function t(s){const l=s.target.textContent;navigator.clipboard.writeText(l),e.value="Copied!",setTimeout(()=>{e.value="Copy to clipboard"},1e3)}return(s,l)=>(p(),$("span",{class:"BuilderCopyText","data-writer-tooltip":e.value,onClick:t},[Re(s.$slots,"default",{},void 0,!0)],8,Hl))}}),Zl=z(Xl,[["__scopeId","data-v-46ba30f4"]]),Ql={key:0,class:"BuilderSettingsAPICode"},es={class:"modalContents"},ts={class:"codeContainer"},ns={class:"codeContainer"},os={key:1},ls=q({__name:"BuilderSettingsAPICode",setup(n){const e=L(j.core),t=L(j.builderManager),s=x(()=>e.getComponentById(t.firstSelectedId.value)),l=x(()=>{var E;return((E=s.value)==null?void 0:E.type)==="blueprints_blueprint"}),o=x(()=>{var E;if(l.value)return(E=s.value.content)==null?void 0:E.key}),a=X(!1),u=X(""),i=X(""),d=X(!1);function h(){g(),a.value=!0}async function g(){const E=await e.hashMessage(`create_job_${o.value}`);if(d.value=!!E,!d.value)return;const r=window.location.origin+window.location.pathname;u.value=`
curl --location --request POST '${r}api/job/blueprint/${o.value}' \\
--header 'Content-Type: application/json' \\
--header 'Authorization: Bearer ${E}' \\
--data '{
    "my_var": 1
}'`.trim(),i.value=`
curl --location '${r}api/job/JOB_ID' \\
--header 'Authorization: Bearer JOB_TOKEN'`.trim()}return(E,r)=>l.value?(p(),$("div",Ql,[a.value?(p(),A(Me,{key:0,title:"API Code","display-close-button":"",hint:d.value?"Note: For API calls to work, the --enable-jobs-api flag must be active.":void 0,onClose:r[2]||(r[2]=c=>a.value=!1)},{default:D(()=>[I("div",es,[d.value?(p(),$(Q,{key:0},[r[3]||(r[3]=I("p",null," The following call will create the job and provide you with a job ID and a job token. ",-1)),I("div",ts,[O(Xe,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=c=>u.value=c),class:"editor",variant:"minimal",language:"shell"},null,8,["modelValue"])]),r[4]||(r[4]=I("p",null," Using the job ID and token obtained in the previous call, check the status of the job. You can use the code below, after replacing JOB_ID and JOB_TOKEN for the right values. ",-1)),I("div",ns,[O(Xe,{modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=c=>i.value=c),class:"editor",variant:"minimal",language:"shell"},null,8,["modelValue"])])],64)):(p(),$("p",os," API code cannot be generated. Please make sure the environment variable WRITER_SECRET_KEY has been set up. "))])]),_:1},8,["hint"])):w("",!0),o.value?(p(),A(H,{key:1,variant:"tertiary",size:"small",onClick:h},{default:D(()=>r[5]||(r[5]=[I("i",{class:"material-symbols-outlined"}," code ",-1),ie(" Call via API")])),_:1})):(p(),A(H,{key:2,disabled:!0,variant:"tertiary",size:"small","data-writer-tooltip":`You need to specify a blueprint key before this blueprint can be
				used in the UI or called via API.`},{default:D(()=>r[6]||(r[6]=[I("i",{class:"material-symbols-outlined"}," code ",-1),ie(" Call via API")])),_:1}))])):w("",!0)}}),ss=z(ls,[["__scopeId","data-v-260b939f"]]),as={class:"BuilderSettingsMain"},is={key:0,class:"BuilderSettingsMain__description"},rs={key:1,class:"warning cmc-warning"},us=["inert"],ds={class:"sections debug"},cs=q({__name:"BuilderSettingsMain",setup(n){const e=ne({loader:()=>oe(()=>import("./BuilderSettingsHandlers-C5vRJzu0.js"),__vite__mapDeps([12,0,1,6,7,8,13,14]),import.meta.url),loadingComponent:be}),t=L(j.core),s=L(j.builderManager),l=x(()=>t.getComponentById(s.firstSelectedId.value)),o=x(()=>l.value.isCodeManaged),a=x(()=>s.isSingleSelectionActive.value?!u.value.toolkit||u.value.toolkit=="core":!1),u=x(()=>{const{type:d}=l.value;return t.getComponentDefinition(d)});$e(l,d=>{d||s.setSelection(null)});const i=x(()=>{var d;return Object.values(((d=u.value)==null?void 0:d.events)??{}).some(h=>h.bindable)});return(d,h)=>(p(),$("div",as,[u.value.description?(p(),$("p",is,Y(u.value.description),1)):w("",!0),o.value?(p(),$("p",rs,h[0]||(h[0]=[I("i",{class:"material-symbols-outlined"},"warning",-1),I("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1)]))):w("",!0),I("div",{class:"sections",inert:o.value},[O(Vl),a.value?(p(),$(Q,{key:0},[i.value?(p(),A(Nl,{key:0})):w("",!0),O(y(e)),O(Gl)],64)):w("",!0),O(ss,null,{default:D(()=>h[1]||(h[1]=[ie("Execute via API")])),_:1})],8,us),I("div",ds,[I("p",null,[h[2]||(h[2]=ie(" Component id: ")),O(Zl,null,{default:D(()=>[ie(Y(y(s).firstSelectedId.value),1)]),_:1})])])]))}}),ps=z(cs,[["__scopeId","data-v-4d40aa9a"]]),vs={key:0,class:"collapser"},fs={key:1,class:"titleBar"},ms=["data-writer-tooltip"],hs=q({__name:"BuilderSettings",setup(n){Rt(d=>({"56a3fa32":y(t).getMode()=="blueprints"?"82px":"20px"}));const e=L(j.core),t=L(j.builderManager),s=X(!1),l=x(()=>e.getComponentById(t.firstSelectedId.value)),o=x(()=>t.selectionStatus.value===Oe.Multiple?!0:t.isSettingsBarCollapsed.value),a=x(()=>t.selection.value.length);function u(){t.isSettingsBarCollapsed.value=!t.isSettingsBarCollapsed.value}const i=x(()=>{const{type:d}=l.value;return e.getComponentDefinition(d)});return $e(l,d=>{d||t.setSelection(null)}),(d,h)=>y(t).selectionStatus.value!==y(Oe).None?(p(),$("div",{key:0,class:Je(["BuilderSettings",{"BuilderSettings--collapsed":o.value,"BuilderSettings--miniDocActive":s.value}])},[y(t).isSingleSelectionActive.value?(p(),$("div",vs,[o.value?(p(),A(H,{key:0,class:"collapserButton",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:u},{default:D(()=>h[0]||(h[0]=[I("i",{class:"material-symbols-outlined"},"settings",-1)])),_:1})):(p(),A(H,{key:1,class:"collapserButton",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:u},{default:D(()=>h[1]||(h[1]=[I("i",{class:"material-symbols-outlined"},"double_arrow",-1)])),_:1}))])):w("",!0),y(t).isSingleSelectionActive?(p(),$("div",fs,[I("div",null,Y(i.value.name),1)])):w("",!0),y(t).selectionStatus.value===y(Oe).Multiple?(p(),$("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${a.value} components selected`},[I("p",null,Y(a.value),1)],8,ms)):w("",!0),O(Ut,{class:"actions"}),O(ps,{inert:o.value,class:"main"},null,8,["inert"])],2)):w("",!0)}}),Ss=z(hs,[["__scopeId","data-v-6524c627"]]);export{Ss as default};
