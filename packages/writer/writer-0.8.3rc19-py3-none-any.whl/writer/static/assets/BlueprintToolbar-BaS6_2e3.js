import{u as x}from"./useBlueprintRun-Cqw87f8u.js";import{d as R,c as W,l as $,r as O,at as h,au as V,o as c,e as v,f as s,G as I,t as w,s as g,x as _,H as A,N as y,X as F,ad as M,C as N,_ as z,i as k,a as T,z as q,A as G,W as D,P as J,y as S,b as j,$ as P}from"./index-C7odhkMa.js";const E=["disabled"],H=["disabled"],K={class:"material-symbols-outlined"},L=R({__name:"WdsButtonSplit",props:{variant:{type:String,default:"primary"},size:{type:String,default:"default"},disabled:{type:Boolean,required:!1}},emits:{mainClick:()=>!0,dropdownOpen:()=>!0,dropdownClose:()=>!0},setup(a,{expose:m,emit:r}){const p=a,f=W(()=>[`WdsButtonSplit--size-${p.size}`,`WdsButtonSplit--variant-${p.variant}`,p.disabled?"WdsButtonSplit--disabled":void 0]),B=r,n=$("btn"),o=$("dropdown"),e=O(!1),{floatingStyles:d}=h(n,o,{placement:"bottom-end",middleware:[V(12)]});function l(b=!e.value){e.value=b,e.value?B("dropdownOpen"):B("dropdownClose")}return m({toggleDropdown:l}),(b,u)=>(c(),v("div",{ref_key:"btn",ref:n,class:N(["WdsButtonSplit",f.value])},[s("button",{type:"button",class:"WdsButtonSplit__main",disabled:a.disabled,onClick:u[0]||(u[0]=i=>b.$emit("mainClick"))},[I(b.$slots,"button",{},void 0,!0)],8,E),u[2]||(u[2]=s("hr",{class:"WdsButtonSplit__divider"},null,-1)),s("button",{class:"WdsButtonSplit__dropdownTrigger",type:"button",disabled:a.disabled,onClickCapture:u[1]||(u[1]=i=>l())},[s("i",K,w(e.value?"keyboard_arrow_up":"keyboard_arrow_down"),1)],40,H),g(M,null,{default:_(()=>[e.value?(c(),v("div",{key:0,ref_key:"dropdown",ref:o,style:A(y(d))},[I(b.$slots,"dropdown",{},void 0,!0)],4)):F("",!0)]),_:3})],2))}}),X=z(L,[["__scopeId","data-v-197d9040"]]),Q={class:"BlueprintToolbarBlocksDropdown"},U={class:"BlueprintToolbarBlocksDropdown__list"},Y={class:"BlueprintToolbarBlocksDropdown__list__item__description"},Z={class:"BlueprintToolbarBlocksDropdown__list__item__title"},tt=R({__name:"BlueprintToolbarBlocksDropdown",props:{components:{type:Array,required:!0}},emits:{jumpToComponent:a=>typeof a=="string",runBranch:a=>typeof a=="string"},setup(a){const m=a,r=k(T.core);function p(n){const o=r.getComponentDefinition(n.type);return(o==null?void 0:o.name)??n.type}function f(n){if(n.type!=="blueprints_uieventtrigger"||!!n.content.defaultResult)return!0;const e=(n.outs??[]).map(l=>r.getComponentById(l.toNodeId)).flatMap(l=>Object.values(l.content??{}));return e.length===0?!0:!e.some(l=>l.includes("@{result}"))}const B=W(()=>m.components.map(n=>{var l;const o=r.getComponentDefinition(n.type),e=((l=n.content)==null?void 0:l.alias)||p(n),d=(o==null?void 0:o.name)??n.type;return{id:n.id,disabled:!f(n),title:e,description:e===d?void 0:d}}));return(n,o)=>(c(),v("div",Q,[o[2]||(o[2]=s("p",{class:"BlueprintToolbarBlocksDropdown__header"}," Start blueprint from ",-1)),s("div",U,[(c(!0),v(q,null,G(B.value,e=>(c(),v("div",{key:e.id,class:N(["BlueprintToolbarBlocksDropdown__list__item",{"BlueprintToolbarBlocksDropdown__list__item--disabled":e.disabled}])},[g(D,{variant:"primary",size:"smallIcon","custom-size":"20px",disabled:e.disabled,"data-writer-tooltip":e.disabled?"Can not run without a default result. Go to this block to define a default result.":"Run the branch",onClick:d=>n.$emit("runBranch",e.id)},{default:_(()=>o[0]||(o[0]=[s("i",{class:"material-symbols-outlined"},"play_arrow",-1)])),_:2},1032,["disabled","data-writer-tooltip","onClick"]),s("div",null,[s("p",Y,w(e.description),1),s("p",Z,w(e.title),1)]),g(D,{variant:"neutral",size:"smallIcon","custom-size":"20px","data-writer-tooltip":"Jump to the blueprint",onClick:d=>n.$emit("jumpToComponent",e.id)},{default:_(()=>o[1]||(o[1]=[s("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])],2))),128))])]))}}),et=z(tt,[["__scopeId","data-v-e742152c"]]),nt={ref:"root",class:"BlueprintToolbar","data-writer-unselectable":!0},ot=R({__name:"BlueprintToolbar",emits:{autogenClick:()=>!0},setup(a){const m=k(T.core),r=k(T.builderManager),p=k(T.componentId),f=$("runBlueprintBtn"),{run:B,isRunning:n}=x(m,p),o=W(()=>m.getComponents(p).filter(i=>{var t;return((t=m.getComponentDefinition(i.type))==null?void 0:t.category)==="Triggers"})),e=J([]);function d(){e.value=P(r.selection.value),r.setSelection(null)}function l(){var i;if((i=e.value)!=null&&i.length){r.setSelection(null);for(const t of e.value)r.appendSelection(t.componentId,t.instancePath,t.source);e.value=[]}}function b(i){var t;r.setSelection(i,void 0,"click"),(t=f.value)==null||t.toggleDropdown(!1)}async function u(i){var t;(t=f.value)==null||t.toggleDropdown(!1),await B(i)}return(i,t)=>(c(),v("div",nt,[g(D,{variant:"secondary","data-automation-action":"run-autogen",onClick:t[0]||(t[0]=C=>i.$emit("autogenClick"))},{default:_(()=>t[4]||(t[4]=[s("i",{class:"material-symbols-outlined"},"bolt",-1),S(" Autogen ")])),_:1}),o.value.length?(c(),j(X,{key:0,ref_key:"runBlueprintBtn",ref:f,class:"BlueprintToolbar__runBlueprintDropdown",variant:"secondary",disabled:y(n),onMainClick:t[2]||(t[2]=C=>u()),onDropdownOpen:d,onDropdownClose:l},{button:_(()=>[t[5]||(t[5]=s("i",{class:"material-symbols-outlined"},"play_arrow",-1)),S(" "+w(y(n)?"Running...":"Run blueprint"),1)]),dropdown:_(()=>[g(et,{components:o.value,onJumpToComponent:b,onRunBranch:t[1]||(t[1]=C=>u(C))},null,8,["components"])]),_:1},8,["disabled"])):(c(),j(D,{key:1,class:"BlueprintToolbar__runBlueprint","data-automation-action":"run-blueprint",variant:"secondary",disabled:y(n),onClick:t[3]||(t[3]=C=>u())},{default:_(()=>[t[6]||(t[6]=s("i",{class:"material-symbols-outlined"},"play_arrow",-1)),S(" "+w(y(n)?"Running...":"Run blueprint"),1)]),_:1},8,["disabled"]))],512))}}),it=z(ot,[["__scopeId","data-v-9df755be"]]);export{it as default};
