[project]
name = "vnet-kernel"
version = "0.5.4-alpha"
description = "virtual network project"
readme = "README.md"
requires-python = ">=3.11"
dependencies = ["posix-ipc>=1.1.1", "scapy==2.6.1"]

[project.optional-dependencies]
dev = ["pytest>=8.3.3", "ruff==0.7.2", "pytest-cov"]
doc = ["mkdocs-material", "mkdocs-mermaid2-plugin"]

[build-system]
requires = ["setuptools", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
packages = [
	"vnet.api",
	"vnet.judge_host",
	"vnet.layers",
	"vnet.layers.application",
	"vnet.layers.transport",
	"vnet.layers.network",
	"vnet.lib",
	"vnet.net_addr",
	"vnet.session",
	"vnet.structs_mapper",
	"vnet.topology",
]

[tool.ruff]
line-length = 100
target-version = "py312"
respect-gitignore = true
indent-width = 4

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
docstring-code-format = true

[tool.ruff.lint]
ignore = ["E402"]

[tool.pytest.ini_options]
# 设置syspath目录
pythonpath = "/home/efterklang/workspace/uestc_vnet"
# 添加命令行选项
addopts = "-vs"
# 指定测试路径
testpaths = ["./test"]
# 指定测试文件和命名规则
python_files = ["test_*.py"]
python_classes = "Test*"
python_functions = "test_*"
# markers
markers = ["kernel: vnet 内核相关的测试", "controller_api: 负责与C通信相关的测试"]
# 设置日志输出级别
log_level = "DEBUG"
log_format = "%(asctime)s %(levelname)s %(message)s"
log_date_format = "%m.%d %H:%M:%S"

# 命令行日志输出设置
log_cli = true
log_cli_format = "%(asctime)s [%(levelname)s] %(message)s"
log_cli_date_format = "%m.%d %H:%M:%S"

# 日志文件设置
log_file_level = "DEBUG"
log_file_format = "%(asctime)s [%(levelname)s] %(name)s: %(message)s"
log_file_date_format = "%m.%d %H:%M:%S"
