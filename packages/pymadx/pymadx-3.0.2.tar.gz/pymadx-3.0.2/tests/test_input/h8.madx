system, "mkdir output";
 
/****************************************************************** 
 MADX Input File 
 ******************************************************************/ 
 TITLE, 'h8_fm_2016db MADX FILE' ; 
 
/***************************** Dipoles ******************************/ 
kBT3 = -0.007;
kB1 = -0.0068356;
kB2 = -0.0068356;
kB3 = 0.0068482;
kB4 = 0.0068482;
kB5 = -0.0018;
kB6 = -0.0018;
/***************************** Quadrupoles ******************************/ 
kQ1 = 0.017789507413685714;
kQ2 = 0.017789507413685714;
kQ3 = -0.026582697671283996;
kQ4 = -0.0013577184966042902;
kQ5 = -0.014074534586636461;
kQ6 = 0.019217636306647294;
kQ7 = -0.011531915844152111;
kQ21 = -0.011531915844152111;
kQ8 = 0.019217636306647294;
kQ9 = -0.014074534586636461;
kQ10 = 0.019217636306647294;
kQ11 = -0.014074534586636461;
kQ12 = -0.0144268363924236;
kQ13 = 0.0005448161807265601;
kQ14 = 0.019499137990636052;
kQ15 = -0.016898295266548558;
kQ16 = 0.0175688728492275;
kQ17 = 0.020753554262950894;
kQ18 = -0.027171857612134805;
kQ19 = 0.007932736441427312;
/***************************** Sextupoles ******************************/ 
/***************************** Kickers ******************************/ 
/***************************** HKickers ******************************/ 
kTRIM11 = 1e-5;
kTRIM1_ = 1e-5;
kTRIM3_ = 1e-5;
kTRIM5_ = 1e-5;
kTRIM7_ = 1e-5;
kTRIM9_ = 1e-5;
/***************************** VKickers ******************************/ 
kTRIM2_ = 1e-5;
kTRIM6_ = 1e-5;
kTRIM8_ = 1e-5;
kTRIM10 = 1e-5;

/****************************************************************** 
  h8_fm_2016db in MADX Sequence format; 
 
******************************************************************/ 
 
 
//---------------------------- Dipoles -----------------------------
MTN : RBEND, L = 3.6, APERTYPE=RECTANGLE, APERTURE={0.12,0.03};
MBNV : RBEND, L = 5.0, APERTYPE=RECTANGLE, APERTURE={0.065,0.0275};
MCA : RBEND, L = 2.5, APERTYPE=RECTANGLE, APERTURE={0.0645,0.0362}; // iron 243 x 80 mm2 

 
//---------------------------- Quadrupoles ----------------------------- 
QSL : QUADRUPOLE, L = 3.0, APERTYPE=CIRCLE, APERTURE={0.0475}; 
QNL : QUADRUPOLE, L = 2.99, APERTYPE=CIRCLE, APERTURE={0.0375}; // square apertures, but for now the 40 mm will be acceptable
QPL : QUADRUPOLE, L = 2.0, APERTYPE=CIRCLE, APERTURE={0.0985}; // No real information on this
QWL : QUADRUPOLE, L = 2.948, APERTYPE=CIRCLE, APERTURE={0.0475}; // square beampipe is used 120 mm across 

 
//---------------------------- Sextupoles ----------------------------- 

 
//---------------------------- Kickers ----------------------------- 

 
//---------------------------- HKickers ----------------------------- 
MDXH : HKICKER, L = 0.4, APERTYPE=RECTANGLE, APERTURE={0.0375,0.0375}; // aperture width is 140 mm
MDXH100 : HKICKER, L = 0.4, APERTYPE=RECTANGLE, APERTURE={0.0475,0.0475}; // first corrector has a 100 mm aperture
//---------------------------- VKickers ----------------------------- 
MDXV : VKICKER, L = 0.4, APERTYPE=RECTANGLE, APERTURE={0.0375,0.0375}; 
MDXV100 : HKICKER, L = 0.4, APERTYPE=RECTANGLE, APERTURE={0.0475,0.0475};

 
//---------------------------- Markers ----------------------------- 
BEGIN.VAC : MARKER;
END.VAC : MARKER;
VXSV.X0420107 : MARKER;
CHANGE.VAC : MARKER;
BCT.X0420414 : MARKER;
BCT.X0420430 : MARKER;
XDWC.X0420543 : MARKER;
XTRI.X0420543 : MARKER;

 
//---------------------------- Monitors ----------------------------- 
MWPC1_2 : MONITOR, L=0.06;
TRIG1 : MONITOR, L=0.1;
MWPC3_4 : MONITOR, L=0.06;
TRIG2 : MONITOR, L=0.1;
TRIG3 : MONITOR, L=0.1;
SC1_XTAL : MONITOR, L=0.06;
TR1_XTAL : MONITOR, L=0.1;
TRIG4 : MONITOR, L=0.1;
XEMC_A : MONITOR, L=0.83;
SC2_XTAL : MONITOR, L=0.06;
TR2_XTAL : MONITOR, L=0.1;
SC3_XTAL : MONITOR, L=0.06;
TRIG5 : MONITOR, L=0.1;
XDWC1_2 : MONITOR, L=0.06;
TRIG6 : MONITOR, L=0.1;
XWCA5_6 : MONITOR, L=0.06;
MWPC7_8 : MONITOR, L=0.06;
TRIG10 : MONITOR, L=0.1;
XDWC5_6 : MONITOR, L=0.06;

 
//---------------------------- HMonitors ----------------------------- 
FISC2 : HMONITOR, L=0.276;
FISC4_N : HMONITOR, L=0.276;
FISC6 : HMONITOR, L=0.276;
FISC8 : HMONITOR, L=0.276;
FISC10 : HMONITOR, L=0.276;
FISC12 : HMONITOR, L=0.276;
FISC14 : HMONITOR, L=0.276;

 
//---------------------------- VMonitors ----------------------------- 
FISC1 : VMONITOR, L=0.276;
FISC5 : VMONITOR, L=0.276;
FISC7 : VMONITOR, L=0.276;
FISC9 : VMONITOR, L=0.276;
FISC11 : VMONITOR, L=0.276;
FISC13 : VMONITOR, L=0.276;

 
//---------------------------- Collimators ----------------------------- 
XTAX.X0420018 : COLLIMATOR, L=1.615, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
XTAX.X0420020 : COLLIMATOR, L=1.615, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C1 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C2 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C3 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C4 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
FCOL : COLLIMATOR, L=1.0, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C13 : COLLIMATOR, L=0.575, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C14 : COLLIMATOR, L=0.575, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C5_C6 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C7 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C8_C9 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C10 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C11 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};

 
//---------------------------- Instruments ----------------------------- 
T4.CENTRE : INSTRUMENT, L=0.0;
TARGET : INSTRUMENT, L=2.0;
ABSORBER : INSTRUMENT, L=0.1;
TR3_XTAL : INSTRUMENT, L=0.94;
CHRV1 : INSTRUMENT, L=11.757;
VELO_LHCb : INSTRUMENT, L=2.0;
XTDV_1 : INSTRUMENT, L=3.22;
XCET_A_TU : INSTRUMENT, L=10.325;
XCET_B_TU : INSTRUMENT, L=9.995;
Morpurgo : INSTRUMENT, L=3.5;
TILECAL : INSTRUMENT, L=0.0;
XTDV2 : INSTRUMENT, L=3.22;
ATLAS_LAR : INSTRUMENT, L=0.0;
DREAM : INSTRUMENT, L=0.0;
TOTEM : INSTRUMENT, L=2.0;
DUMP : INSTRUMENT, L=3.2;

 

 

 
//---------------------------- Strength Definitions ----------------------------- 
BT3H : MTN, ANGLE := kBT3, TILT=-0.0002617993877991494;
BT3Ha : MTN, ANGLE := kBT3, TILT=-0.00026432578132272927;
Q1F : QSL, K1 := kQ1;
Q2F : QSL, K1 := kQ2;
Q3D : QNL, K1 := kQ3;
Q4D : QNL, K1 := kQ4;
B1V : MBNV, ANGLE := kB1, TILT=1.5705294618538286;
B2V : MBNV, ANGLE := kB2, TILT=1.5705294673195003;
B2Va : MBNV, ANGLE := kB2, TILT=1.5705294850190086;
B1Vb : MBNV, ANGLE := kB1, TILT=1.5705295149545797;
B1Vc : MBNV, ANGLE := kB1, TILT=1.570529557129584;
B2Vd : MBNV, ANGLE := kB2, TILT=1.5705296115485379;
Q5D : QNL, K1 := kQ5;
TRIM11H : MDXH100, KICK := kTRIM11, TILT=-4.84918999251519e-06;
Q6F : QNL, K1 := kQ6;
Q7D : QPL, K1 := kQ7;
TRIM1_H : MDXH, KICK := kTRIM1_, TILT=-0.0002666485777916646;
TRIM2_H : MDXV, KICK := kTRIM2_, TILT=-0.0002666485777916646;
Q21D : QPL, K1 := kQ21;
Q8F : QNL, K1 := kQ8;
Q9D : QNL, K1 := kQ9;
TRIM3_H : MDXH, KICK := kTRIM3_, TILT=-0.0002666485777916646;
Q10F : QNL, K1 := kQ10;
TRIM5_H : MDXH, KICK := kTRIM5_, TILT=-0.0002666485777916646;
Q11D : QNL, K1 := kQ11;
B3V : MBNV, ANGLE := kB3, TILT=1.570529678217105;
B4V : MBNV, ANGLE := kB4, TILT=1.570529611453975;
B4Va : MBNV, ANGLE := kB4, TILT=1.5705295569799604;
B3Vb : MBNV, ANGLE := kB3, TILT=1.570529514790524;
B3Vc : MBNV, ANGLE := kB3, TILT=1.5705294848822828;
B4Vd : MBNV, ANGLE := kB4, TILT=1.5705294672530068;
Q12D : QNL, K1 := kQ12;
Q13F : QNL, K1 := kQ13;
TRIM6_V : MDXV, KICK := kTRIM6_, TILT=1.5705294619016184;
B5H : MCA, ANGLE := kB5, TILT=-0.0002668648932781924;
B6H : MCA, ANGLE := kB6, TILT=-0.00026765596229654616;
Q14F : QNL, K1 := kQ14;
Q15D : QWL, K1 := kQ15;
Q16F : QNL, K1 := kQ16;
TRIM7_H : MDXH, KICK := kTRIM7_, TILT=-0.00026844787827568574;
TRIM8_V : MDXV, KICK := kTRIM8_, TILT=1.5705278789166208;
Q17F : QNL, K1 := kQ17;
Q18D : QNL, K1 := kQ18;
Q19F : QNL, K1 := kQ19;
TRIM9_H : MDXH, KICK := kTRIM9_, TILT=-0.00026844787827568574;
TRIM10V : MDXV, KICK := kTRIM10, TILT=1.5705278789166208;

 

 
//---------------------------- Beamline Sequence ----------------------------- 

h8_fm_2016db: SEQUENCE, refer = exit, l = 616.7581324042695;
T4.CENTRE : T4.CENTRE, AT=0;
BEGIN.VAC.X0400001 : BEGIN.VAC, AT=1.101;
MTN.X0400003 : BT3H, AT=4.950007350010504;
MTN.X0400007 : BT3Ha, AT=9.150014700021009;
END.VAC.X0400016 : END.VAC, AT=16.61101470002101;
XTAX.X0420018 : XTAX.X0420018, AT=18.815014700021006;
XTAX.X0420020 : XTAX.X0420020, AT=20.440014700021006;
BEGIN.VAC.X0420020 : BEGIN.VAC, AT=20.505014700021007;
QSL.X0420026 : Q1F, AT=27.440014700021006;
QSL.X0420033 : Q2F, AT=34.42001470002101;
QNL.X0420036 : Q3D, AT=37.84501470002101;
QNL.X0420045 : Q4D, AT=46.24501470002101;
MBNV.X0420049 : B1V, AT=51.79502443449831;
MBNV.X0420055 : B2V, AT=57.45503416897561;
MBNV.X0420061 : B2Va, AT=63.11504390345291;
XCSH.X0420064 : C1, AT=64.5950439034529;
MBNV.X0420067 : B1Vb, AT=69.9250536379302;
MBNV.X0420073 : B1Vc, AT=75.5850633724075;
MBNV.X0420079 : B2Vd, AT=81.2450731068848;
QNL.X0420083 : Q5D, AT=84.7850731068848;
MDX.X0420094 : TRIM11H, AT=93.8250731068848;
QNL.X0420096 : Q6F, AT=97.2700731068848;
VXSV.X0420107 : VXSV.X0420107, AT=107.49107310688478;
CHANGE.VAC.X0420111 : CHANGE.VAC, AT=110.61707310688479;
QPL.X0420125 : Q7D, AT=125.89007310688478;
XCSH.X0420128 : C2, AT=128.70507310688478;
END.VAC.X0420129 : END.VAC, AT=128.80507310688478;
XCON.X0420130 : TARGET, AT=130.81707310688478;
BEGIN.VAC.X0420131 : BEGIN.VAC, AT=131.34807310688478;
XCSV.X0420132 : C3, AT=132.4980731068848;
MDX.X0420133 : TRIM1_H, AT=133.1680731068848;
MDX.X0420134 : TRIM2_H, AT=133.93807310688481;
QPL.X0420141 : Q21D, AT=141.8900731068848;
CHANGE.VAC.X0420155 : CHANGE.VAC, AT=155.3780731068848;
QNL.X0420170 : Q8F, AT=171.50007310688483;
QNL.X0420182 : Q9D, AT=183.98507310688484;
XCSV.X0420185 : C4, AT=185.35507310688484;
XFFV.X0420196 : FISC1, AT=197.90407310688485;
XFFH.X0420197 : FISC2, AT=198.18007310688486;
END.VAC.X0420198 : END.VAC, AT=198.28007310688486;
XWCA.X0420198 : MWPC1_2, AT=198.37007310688486;
XTRS.X0420198 : TRIG1, AT=198.47007310688485;
XCIO.X0420200 : FCOL, AT=199.63707310688486;
BEGIN.VAC.X0420200 : BEGIN.VAC, AT=199.76507310688484;
XCRV.X0420201 : C13, AT=200.61007310688484;
XCRH.X0420201 : C14, AT=201.18507310688483;
XCHV.X0420202 : C5_C6, AT=202.33507310688483;
MDX.X0420203 : TRIM3_H, AT=202.97007310688485;
XFFH.X0420217 : FISC4_N, AT=218.03007310688486;
QNL.X0420221 : Q9D, AT=222.52507310688486;
QNL.X0420234 : Q8F, AT=235.01007310688487;
END.VAC.X0420235 : END.VAC, AT=235.33007310688487;
BEGIN.VAC.X0420236 : BEGIN.VAC, AT=235.88507310688487;
CHANGE.VAC.X0420249 : CHANGE.VAC, AT=248.98607310688487;
QPL.X0420263 : Q21D, AT=263.6300731068849;
XFFV.X0420270 : FISC5, AT=270.6300731068849;
XFFH.X0420271 : FISC6, AT=270.9060731068849;
QPL.X0420279 : Q21D, AT=279.6300731068849;
CHANGE.VAC.X0420293 : CHANGE.VAC, AT=293.0290731068849;
QNL.X0420308 : Q10F, AT=309.2400731068849;
MDX.X0420318 : TRIM5_H, AT=318.28007310688486;
QNL.X0420320 : Q11D, AT=321.72507310688485;
MBNV.X0420325 : B3V, AT=327.2750828772822;
MBNV.X0420330 : B4V, AT=332.9350926476796;
MBNV.X0420336 : B4Va, AT=338.595102418077;
XFFV.X0420338 : FISC7, AT=339.20110241807697;
XFFH.X0420339 : FISC8, AT=339.477102418077;
MBNV.X0420343 : B3Vb, AT=345.40511218847433;
MBNV.X0420349 : B3Vc, AT=351.0651219588717;
MBNV.X0420354 : B4Vd, AT=356.7251317292691;
QNL.X0420359 : Q12D, AT=360.2651317292691;
QNL.X0420371 : Q10F, AT=372.7501317292691;
QNL.X0420374 : Q13F, AT=376.18013172926914;
END.VAC.X0420403 : END.VAC, AT=403.84013172926916;
XWCA.X0420403 : MWPC3_4, AT=403.93013172926914;
XTRS.X0420403 : TRIG2, AT=404.03013172926916;
BEGIN.VAC.X0420404 : BEGIN.VAC, AT=404.06013172926913;
XCSV.X0420404 : C7, AT=405.31013172926913;
XCHV.X0420406 : C8_C9, AT=406.5951317292691;
MDX.X0420407 : TRIM6_V, AT=407.2301317292691;
END.VAC.X0420409 : END.VAC, AT=409.1101317292691;
XTRS.X0420410 : TRIG3, AT=409.31013172926913;
XCON.X0420411 : ABSORBER, AT=409.58013172926917;
BEGIN.VAC.X0420411 : BEGIN.VAC, AT=409.71013172926916;
MCA.X0420412 : B5H, AT=412.7101320667692;
END.VAC.X0420413 : END.VAC, AT=413.18013206676915;
SCI1_XTAL.X0420413 : SC1_XTAL, AT=413.3351320667692;
XTR1_XTAL.X0420413 : TR1_XTAL, AT=413.4351320667692;
BCT.X0420414 : BCT.X0420414, AT=413.7851320667692;
BEGIN.VAC.X0420414 : BEGIN.VAC, AT=414.2601320667692;
MCA.X0420416 : B6H, AT=417.1601324042692;
XFFV.X0420418 : FISC9, AT=419.3561324042692;
XFFH.X0420419 : FISC10, AT=419.6321324042692;
END.VAC.X0420419 : END.VAC, AT=419.73213240426924;
XTRI.X0420420 : TRIG4, AT=419.84213240426925;
XEMC.X0420420 : XEMC_A, AT=420.7021324042692;
BEGIN.VAC.X0420420 : BEGIN.VAC, AT=420.7321324042692;
XCSH.X0420424 : C10, AT=424.85513240426917;
QNL.X0420427 : Q14F, AT=428.0651324042692;
END.VAC.X0420430 : END.VAC, AT=430.2951324042692;
SCI2_XTAL.X0420430 : SC2_XTAL, AT=430.3551324042692;
XTR2_XTAL.X0420430 : TR2_XTAL, AT=430.45513240426925;
BCT.X0420430 : BCT.X0420430, AT=430.70513240426925;
BEGIN.VAC.X0420431 : BEGIN.VAC, AT=431.28013240426924;
XCSH.X0420440 : C11, AT=441.0551324042692;
QWL.X0420444 : Q15D, AT=445.7371324042692;
QWL.X0420447 : Q15D, AT=449.1671324042692;
SCI3_XTAL.X0420450 : SC3_XTAL, AT=450.2481324042692;
XTR3_XTAL.X0420451 : TR3_XTAL, AT=451.1881324042692;
QNL.X0420457 : Q16F, AT=458.1781324042692;
QNL.X0420460 : Q16F, AT=461.6081324042692;
MDX.X0420462 : TRIM7_H, AT=462.3631324042692;
MDX.X0420463 : TRIM8_V, AT=463.1331324042692;
END.VAC.X0420463 : END.VAC, AT=463.46813240426917;
XTRI.X0420463 : TRIG5, AT=463.59813240426917;
XCET.X0420474 : CHRV1, AT=475.38513240426914;
XDWC.X0420474 : XDWC1_2, AT=475.67513240426916;
XTRI.X0420475 : TRIG6, AT=475.7751324042692;
BEGIN.VAC.X0420475 : BEGIN.VAC, AT=475.8751324042692;
XFFV.X0420476 : FISC11, AT=477.50113240426924;
XFFH.X0420477 : FISC12, AT=477.77713240426925;
END.VAC.X0420478 : END.VAC, AT=477.84713240426925;
VELO.X0420480 : VELO_LHCb, AT=480.84713240426925;
BEGIN.VAC.X0420487 : BEGIN.VAC, AT=486.85613240426926;
XFSV.X0420493 : FISC13, AT=488.97213240426925;
XFSH.X0420494 : FISC14, AT=489.24813240426926;
QNL.X0420495 : Q17F, AT=492.4581324042693;
QNL.X0420498 : Q17F, AT=495.8881324042693;
XTDV.X0420500 : XTDV_1, AT=499.8231324042693;
QNL.X0420506 : Q18D, AT=507.3081324042693;
XWCA.X0420514 : XWCA5_6, AT=513.6031324042692;
XCET.X0420519 : XCET_A_TU, AT=524.4581324042693;
QNL.X0420526 : Q19F, AT=527.7981324042694;
MDX.X0420528 : TRIM9_H, AT=528.6531324042694;
MDX.X0420529 : TRIM10V, AT=529.4231324042694;
XCET.X0420537 : XCET_B_TU, AT=541.5581324042694;
XDWC.X0420543 : XDWC.X0420543, AT=541.8001324042693;
XTRI.X0420543 : XTRI.X0420543, AT=541.9001324042694;
MSP.X0420555 : Morpurgo, AT=555.0501324042694;
BEGIN.VAC.X0420556 : BEGIN.VAC, AT=556.5501324042694;
TILE.ATLAS.X0420559 : TILECAL, AT=559.1801324042694;
END.VAC.X0420566 : END.VAC, AT=566.4091324042695;
XTDV.X0420572 : XTDV2, AT=572.4291324042695;
XWCA.X0420574 : MWPC7_8, AT=573.4691324042694;
XTRI.X0420574 : TRIG10, AT=573.5691324042695;
LARG_ATLAS.X0420578 : ATLAS_LAR, AT=577.8071324042695;
DREAM.X0420583 : DREAM, AT=582.5611324042695;
XDWC.X0420583 : XDWC5_6, AT=595.5691324042695;
TOTEM.X0420602 : TOTEM, AT=602.6691324042695;
BEAM.DUMP.X0420617 : DUMP, AT=616.7581324042695;
ENDSEQUENCE;


 
beam, particle=proton, sequence=h8_fm_2016db, PC=250.0, ex=2e-07, ey=2e-07;
use, sequence=h8_fm_2016db;

select, flag=twiss, clear;
twiss, chrom=true, rmatrix=true, betx=10, alfx=0, bety=10, alfy=0, deltap=0.01;

select, flag=twiss, clear;
select, flag=twiss, column={name, s, keyword, l, alfx, alfy, betx, bety, dx, dy, dpx, dpy, x, y, tilt, angle, k1l, hkick, vkick};
twiss, chrom=true, rmatrix=true, save, file="h8-simple.tfs", betx=3.3, alfx=0, bety=3.3, alfy=0;

select, flag=survey, clear;
survey, x0=0, y0=0, z0=0, theta0=0, phi0=0, psi0=0, file="h8-survey.tfs";