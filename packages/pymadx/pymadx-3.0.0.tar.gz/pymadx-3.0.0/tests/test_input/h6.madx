TITLE, 'h6-filter-mode';

/***************************** Dipoles ******************************/ 
kB3T = -0.0126;
kB1 = -0.0056;
kB2 = -0.007;
kB3 = -0.010254;
kB4 = 0.0039634;
kB7 = 0.0039634;
kB5 = 0.0102723;
kB6 = -0.0108;
/***************************** Quadrupoles ******************************/ 
kQ1 = 0.021629069046;
kQ2 = -0.0066640693837499996;
kQ3 = -0.009288356096249999;
kQ4 = -0.010335260249999999;
kQ5 = 0.024747814395;
kQ6 = -0.03515453708625;
kQ7 = 0.0247531356675;
kQ8 = -0.0103717596825;
kQ9 = 0.024747851868749997;
kQ10 = -0.010335634987500002;
kQ11 = -0.03567287399624999;
kQ12 = 0.012619585102499999;
kQ13 = -0.02136933099;
kQ14 = 0.017299471886999998;
kQ15 = 0.017939703411;
kQ16 = -0.020948725619999997;
/***************************** Sextupoles ******************************/ 
kSP1 = 0.0;
kSP2 = 0.0;
/***************************** Kickers ******************************/ 
/***************************** HKickers ******************************/ 
kTRIM3_ = -0.0;
kTRIM6_ = -0.0;
/***************************** VKickers ******************************/ 
kTRIM1_ = -0.0;
kTRIM2_ = -0.0;
kTRIM4_ = -0.0;
kTRIM5_ = -0.0;

/****************************************************************** 
  h6fm04 in MADX Sequence format; 
 
******************************************************************/ 
 
 
//---------------------------- Dipoles -----------------------------
MTN : RBEND, L = 3.6, APERTYPE=RECTANGLE, APERTURE={0.12,0.03};
MSN : RBEND, L = 3.2, APERTYPE=RECTANGLE, APERTURE={0.057,0.03};
MBNV : RBEND, L = 5.0, APERTYPE=RECTANGLE, APERTURE={0.065,0.03};
MBXHC : RBEND, L = 2.5, APERTYPE=RECTANGLE, APERTURE={0.08,0.04};
MBNH : RBEND, L = 5.0, APERTYPE=RECTANGLE, APERTURE={0.065,0.03};

 
//---------------------------- Quadrupoles ----------------------------- 
QSL : QUADRUPOLE, L = 3.0, APERTYPE=CIRCLE, APERTURE={0.05};
QNL : QUADRUPOLE, L = 2.99, APERTYPE=CIRCLE, APERTURE={0.04};
QTS : QUADRUPOLE, L = 1.49, APERTYPE=CIRCLE, APERTURE={0.04};
QWL : QUADRUPOLE, L = 2.948, APERTYPE=CIRCLE, APERTURE={0.05};

 
//---------------------------- Sextupoles ----------------------------- 
LSX : SEXTUPOLE, L = 0.7, APERTYPE=CIRCLE, APERTURE={0.045};

 
//---------------------------- Kickers ----------------------------- 

 
//---------------------------- HKickers ----------------------------- 
MCXCAH : HKICKER, L = 0.4, APERTYPE=RECTANGLE, APERTURE={0.04,0.026000000000000002};

 
//---------------------------- VKickers ----------------------------- 
MCXCAV : HKICKER, L = 0.4, APERTYPE=RECTANGLE, APERTURE={0.04,0.026000000000000002};

 
//---------------------------- Markers ----------------------------- 
BEG.VAC : MARKER;
END.VAC : MARKER;
VXSV.X0410104 : MARKER;
BEGIN.VAC : MARKER;
XWCA.X0410404 : MARKER;
XEMC.X0410476 : MARKER;
XDWC.X0410488 : MARKER;
H6A : MARKER;
H6B : MARKER;
H6C : MARKER;

 
//---------------------------- Monitors ----------------------------- 
MWPC1_2 : MONITOR, L=0.06;
SCIN1 : MONITOR, L=0.1;
MWPC3_4 : MONITOR, L=0.06;
SCIN4 : MONITOR, L=0.1;
MWPC5_6 : MONITOR, L=0.06;
SCIN5 : MONITOR, L=0.1;
SCIN6 : MONITOR, L=0.1;
MWPC7_8 : MONITOR, L=0.06;
SCIN7 : MONITOR, L=0.0;
SCIN8 : MONITOR, L=0.0;
MWPC9_10 : MONITOR, L=0.06;
SCIN8 : MONITOR, L=0.1;

 
//---------------------------- HMonitors ----------------------------- 
FISC2 : HMONITOR, L=0.276;
FISC4 : HMONITOR, L=0.276;
FISC6 : HMONITOR, L=0.276;
FISC8 : HMONITOR, L=0.276;

 
//---------------------------- VMonitors ----------------------------- 
FISC1 : VMONITOR, L=0.276;
FISC3 : VMONITOR, L=0.276;
FISC5 : VMONITOR, L=0.276;
FISC7 : VMONITOR, L=0.276;

 
//---------------------------- Collimators ----------------------------- 
XTAX.X0411018 : COLLIMATOR, L=1.615, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
XTAX.X0411020 : COLLIMATOR, L=1.615, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C10 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C11 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C1 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C2_C3 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C5_C6 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C8 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};
C9 : COLLIMATOR, L=1.15, APERTYPE = RECTANGLE, APERTURE={0.04,0.04};

 
//---------------------------- Instruments ----------------------------- 
T4 : INSTRUMENT, L=0.0;
TARGET : INSTRUMENT, L=1.0;
ABSORBER : INSTRUMENT, L=0.1;
CEDAR : INSTRUMENT, L=6.317;
DMPH6AH : INSTRUMENT, L=3.22;
DMPH6BH : INSTRUMENT, L=3.22;
BeamDump : INSTRUMENT, L=3.2;

 
//---------------------------- Strength Definitions ----------------------------- 
B3TH : MTN, ANGLE := kB3T, TILT=-0.0002617993877991494;
B3THa : MTN, ANGLE := kB3T, TILT=-0.0002663560492204833;
B1H : MSN, ANGLE := kB1, TILT=-0.00027095391164916327;
B2H : MSN, ANGLE := kB2, TILT=-0.00027301062849510293;
Q1F : QSL, K1 := kQ1;
Q2D : QNL, K1 := kQ2;
Q3D : QNL, K1 := kQ3;
B3V : MBNV, ANGLE := kB3, TILT=1.5705207337729163;
B3Va : MBNV, ANGLE := kB3, TILT=1.570520746544032;
B3Vb : MBNV, ANGLE := kB3, TILT=1.5705207868478794;
B3Vc : MBNV, ANGLE := kB3, TILT=1.570520854695833;
Q4D : QNL, K1 := kQ4;
Q5F : QNL, K1 := kQ5;
Q6D : QTS, K1 := kQ6;
B4H : MBXHC, ANGLE := kB4, TILT=-0.00027537668982465153;
B4Ha : MBXHC, ANGLE := kB4, TILT=-0.0004365641492769975;
B4Hb : MBXHC, ANGLE := kB4, TILT=-0.0005977544599117669;
SP1D : LSX, K2 := kSP1;
TRIM1_V : MCXCAV, KICK := kTRIM1_, TILT=1.5700373791731923;
B7H : MBXHC, ANGLE := kB7, TILT=-0.0007589476217043422;
B7Ha : MBXHC, ANGLE := kB7, TILT=-0.0009201436346087759;
B7Hb : MBXHC, ANGLE := kB7, TILT=-0.0010813424986270631;
Q7F : QNL, K1 := kQ7;
Q8D : QNL, K1 := kQ8;
SP2D : LSX, K2 := kSP2;
TRIM2_V : MCXCAV, KICK := kTRIM2_, TILT=1.56955378258116;
TRIM3_H : MCXCAH, KICK := kTRIM3_, TILT=-0.0012425442137363977;
Q9F : QNL, K1 := kQ9;
Q10D : QNL, K1 := kQ10;
B5V : MBNV, ANGLE := kB5, TILT=1.56955378258116;
B5Va : MBNV, ANGLE := kB5, TILT=1.5695536870495257;
B5Vb : MBNV, ANGLE := kB5, TILT=1.5695536191603665;
B5Vc : MBNV, ANGLE := kB5, TILT=1.5695535789022648;
Q11D : QTS, K1 := kQ11;
B6H : MBNH, ANGLE := kB6, TILT=-0.001242760525258184;
B6Ha : MBNH, ANGLE := kB6, TILT=-0.0012475138189680065;
TRIM4_V : MCXCAV, KICK := kTRIM4_, TILT=1.5695440294234497;
B6Ha : MBNH, ANGLE := kB6, TILT=-0.0012522973714467393;
B6Hb : MBNH, ANGLE := kB6, TILT=-0.0012571111809220304;
Q12F : QTS, K1 := kQ12;
Q13D : QNL, K1 := kQ13;
Q14F : QWL, K1 := kQ14;
Q15F : QWL, K1 := kQ15;
Q16D : QNL, K1 := kQ16;
TRIM5_V : MCXCAV, KICK := kTRIM5_, TILT=1.5695343715492591;
TRIM6_H : MCXCAH, KICK := kTRIM6_, TILT=-0.0012619552456373821;

 
//---------------------------- Beamline Sequence ----------------------------- 
h6: SEQUENCE, refer = exit, l = 555.1973409154986;
T4..CENTRE : T4, AT=0;
BEG.VAC : BEG.VAC, AT=1.101;
MTN.X0400003 : B3TH, AT=4.950023814110272;
MTN.X0400007 : B3THa, AT=9.150047628220545;
END.VAC : END.VAC, AT=16.611047628220547;
XTAX.X0411018 : XTAX.X0411018, AT=18.815047628220544;
XTAX.X0411020 : XTAX.X0411020, AT=20.440047628220544;
BEG.VAC : BEG.VAC, AT=20.605047628220543;
MSN.X0410022 : B1H, AT=24.0500518095577;
MSN.X0410029 : B2H, AT=31.03005834290037;
QSL.X0410033 : Q1F, AT=34.420058342900376;
QNL.X0410040 : Q2D, AT=41.27505834290038;
XCSH.X0410043 : C10, AT=42.64505834290038;
XCSV.X0410047 : C11, AT=48.59005834290038;
QNL.X0410050 : Q3D, AT=51.935058342900376;
MBNV.X0410055 : B3V, AT=57.48508024807505;
MBNV.X0410061 : B3Va, AT=63.145102153249724;
XCSH.X0410064 : C1, AT=64.62510215324973;
MBNV.X0410067 : B3Vb, AT=69.9551240584244;
MBNV.X0410073 : B3Vc, AT=75.61514596359908;
QNL.X0410078 : Q4D, AT=79.15514596359907;
QNL.X0410096 : Q5F, AT=97.38314596359906;
VXSV.X0410104 : VXSV.X0410104, AT=104.05914596359905;
END.VAC : END.VAC, AT=104.05914596359905;
BEG.VAC : BEG.VAC, AT=104.33914596359905;
QTS.X0410106 : Q6D, AT=106.07914596359905;
MBXHC.X0410117 : B4H, AT=118.67014759990599;
MBXHC.X0410121 : B4Ha, AT=121.97014923621293;
MBXHC.X0410124 : B4Hb, AT=125.27015087251988;
END.VAC : END.VAC, AT=125.74015087251988;
XCON.X0410126 : TARGET, AT=126.86015087251988;
BEG.VAC : BEG.VAC, AT=126.99015087251988;
XCHV.X0410128 : C2_C3, AT=128.24015087251988;
LSX.X0410129 : SP1D, AT=129.20015087251986;
MCXCA.X0410130 : TRIM1_V, AT=130.01215087251987;
MBXHC.X0410132 : B7H, AT=133.33015250882684;
MBXHC.X0410135 : B7Ha, AT=136.63015414513382;
MBXHC.X0410139 : B7Hb, AT=139.9301557814408;
END.VAC : END.VAC, AT=143.3601557814408;
BEG.VAC : BEG.VAC, AT=144.3601557814408;
QTS.X0410151 : Q6D, AT=151.5111557814408;
QNL.X0410160 : Q7F, AT=161.7071557814408;
QNL.X0410178 : Q8D, AT=179.9351557814408;
END.VAC : END.VAC, AT=190.3561557814408;
BEGIN.VAC : BEGIN.VAC, AT=191.4751557814408;
XCHV.X0410192 : C5_C6, AT=192.6251557814408;
LSX.X0410193 : SP2D, AT=193.5851557814408;
MCXCA.X0410194 : TRIM2_V, AT=194.3971557814408;
MCXCA.X0410195 : TRIM3_H, AT=195.1671557814408;
QNL.X0410206 : Q8D, AT=207.1551557814408;
QNL.X0410224 : Q7F, AT=225.38315578144082;
END.VAC : END.VAC, AT=225.6731557814408;
XWCA.X0410225 : MWPC1_2, AT=225.8031557814408;
XSCI.X0410225 : SCIN1, AT=225.9031557814408;
BEG.VAC : BEG.VAC, AT=227.0631557814408;
QTS.X0410234 : Q6D, AT=234.07915578144082;
END.VAC : END.VAC, AT=243.87015578144081;
XFSV.X0410256 : FISC1, AT=256.0501557814408;
XFSH.X0410257 : FISC2, AT=256.32615578144083;
BEG.VAC : BEG.VAC, AT=268.33015578144085;
QTS.X0410279 : Q6D, AT=279.51115578144083;
QNL.X0410288 : Q9F, AT=289.70715578144086;
END.VAC : END.VAC, AT=303.87515578144087;
BEG.VAC : BEG.VAC, AT=304.7251557814409;
QNL.X0410306 : Q10D, AT=307.9351557814409;
MBNV.X0410311 : B5V, AT=313.4851777648726;
MBNV.X0410317 : B5Va, AT=319.1451997483043;
XFSV.X0410320 : FISC3, AT=320.05019974830435;
XFSH.X0410321 : FISC4, AT=320.32619974830436;
MBNV.X0410323 : B5Vb, AT=325.95522173173606;
MBNV.X0410329 : B5Vc, AT=331.61524371516776;
QNL.X0410334 : Q10D, AT=335.1552437151678;
QNL.X0410352 : Q9F, AT=353.3832437151678;
END.VAC : END.VAC, AT=353.7032437151678;
BEG.VAC : BEG.VAC, AT=354.3032437151678;
QTS.X0410362 : Q11D, AT=362.0792437151678;
END.VAC : END.VAC, AT=366.6802437151678;
XWCA.X0410368 : MWPC3_4, AT=367.7402437151678;
XSCI.X0410368 : SCIN4, AT=367.84024371516784;
XCON.X0410369 : ABSORBER, AT=368.2402437151679;
BEG.VAC : BEG.VAC, AT=371.58024371516785;
MBNH.X0410375 : B6H, AT=377.1002680152505;
MBNH.X0410380 : B6Ha, AT=382.7602923153332;
XCSV.X0410384 : C8, AT=384.24029231533314;
MCXCA.X0410385 : TRIM4_V, AT=384.8752923153331;
MBNH.X0410388 : B6Ha, AT=390.34031661541576;
MBNH.X0410393 : B6Hb, AT=396.00034091549844;
QTS.X0410397 : Q12F, AT=398.01034091549843;
XWCA.X0410404 : XWCA.X0410404, AT=405.20034091549843;
XCSH.X0410414 : C9, AT=414.4973409154984;
QNL.X0410426 : Q13D, AT=427.9253409154984;
QWL.X0410434 : Q14F, AT=435.8843409154984;
XFFV.X0410436 : FISC5, AT=436.4313409154984;
XFFH.X0410437 : FISC6, AT=436.70734091549843;
XWCA.X0410438 : MWPC5_6, AT=436.9073409154984;
XSCI.X0410438 : SCIN5, AT=437.00734091549845;
XCED.X0410440 : CEDAR, AT=443.6813409154985;
XSCI.X0410444 : SCIN6, AT=443.8113409154985;
BEG.VAC : BEG.VAC, AT=445.1113409154985;
XFSV.X0410451 : FISC7, AT=451.4313409154985;
XFSH.X0410452 : FISC8, AT=451.7073409154985;
QWL.X0410453 : Q15F, AT=454.9263409154985;
QNL.X0410461 : Q16D, AT=462.9273409154985;
MCXCA.X0410473 : TRIM5_V, AT=474.0003409154985;
MCXCA.X0410474 : TRIM6_H, AT=474.7703409154985;
XWCA.X0410475 : MWPC7_8, AT=475.09534091549847;
XSCI.X0410475 : SCIN7, AT=475.1953409154985;
XEMC.X0410476 : XEMC.X0410476, AT=476.4153409154985;
XDWC.X0410488 : XDWC.X0410488, AT=488.32034091549855;
XSCI.X0410488 : SCIN8, AT=488.42034091549857;
H6A : H6A, AT=505.32734091549855;
XTDV.X0410528 : DMPH6AH, AT=528.7973409154985;
XWCA.X0410530 : MWPC9_10, AT=529.9473409154984;
XSCI.X0410530 : SCIN8, AT=530.0473409154985;
H6B : H6B, AT=533.7973409154985;
XTDV.X0410542 : DMPH6BH, AT=544.3973409154985;
H6C : H6C, AT=548.7673409154985;
BEAM.DUMP : BeamDump, AT=555.1973409154986;
ENDSEQUENCE;
 
beam, particle=proton, sequence=H6, PC=120.0, ex = 5e-08, ey = 5e-08;

use, sequence=H6;

set, format="15.9f";

twiss, chrom=true, rmatrix=true, betx=10, alfx=0, bety=10, alfy=0, deltap=0.01;