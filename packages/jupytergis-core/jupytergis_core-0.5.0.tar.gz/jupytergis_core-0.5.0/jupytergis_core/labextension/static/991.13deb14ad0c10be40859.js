"use strict";(self.webpackChunk_jupytergis_jupytergis_core=self.webpackChunk_jupytergis_jupytergis_core||[]).push([[991],{29991:(e,t,r)=>{r.r(t),r.d(t,{JupyterGISDocumentWidgetFactory:()=>g,default:()=>q});var i=r(76903),o=r(37137),n=r(45551),s=r(85764),a=r(38999),p=r(3266),y=r(50498),m=r(98968),d=r(76208),u=r(2653),l=r(18217),c=r(87178);class g extends c.ABCWidgetFactory{constructor(e){var t;const{backendCheck:r,externalCommandRegistry:i}=e;super(function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]])}return r}(e,["backendCheck","externalCommandRegistry"])),this.options=e,this._backendCheck=r,this._commands=e.commands,this._externalCommandRegistry=i,this._contentsManager=null===(t=e.manager)||void 0===t?void 0:t.contents}createNewWidget(e){if(this._backendCheck&&!this._backendCheck())throw new Error("Requested backend is not installed");const{model:t}=e;t.filePath=e.localPath,this._contentsManager&&(t.contentsManager=this._contentsManager);const r=new l.JupyterGISPanel({model:t,manager:this.options.manager,contentFactory:this.options.contentFactory,mimeTypeService:this.options.mimeTypeService,rendermime:this.options.rendermime,consoleTracker:this.options.consoleTracker,commandRegistry:this.options.commands}),i=new l.ToolbarWidget({commands:this._commands,model:t,externalCommands:this._externalCommandRegistry.getCommands()});return new l.JupyterGISDocumentWidget({context:e,content:r,toolbar:i})}}class b{constructor(e){this.collaborative=!0,this._disposed=!1,this._annotationModel=e.annotationModel,this._settingRegistry=e.settingRegistry}get name(){return"jupytergis-jgismodel"}get contentType(){return"jgis"}get fileFormat(){return"text"}get isDisposed(){return this._disposed}dispose(){this._disposed=!0}preferredLanguage(e){return""}createNew(e){const t=new o.JupyterGISModel({sharedModel:e.sharedModel,languagePreference:e.languagePreference,annotationModel:this._annotationModel,settingRegistry:this._settingRegistry});return t.initSettings(),t}}const h="JupyterGIS .jgis Viewer",f="jgis",I="jupytergis-jgismodel",S="@jupytergis/jupytergis-core:jupytergis-settings",j={id:"jupyterGIS:jGISplugin",requires:[o.IJupyterGISDocTracker,n.IThemeManager,y.IFileBrowserFactory,o.IJGISExternalCommandRegistryToken,a.ConsolePanel.IContentFactory,s.IEditorServices,d.IRenderMimeRegistry,a.IConsoleTracker,o.IAnnotationToken,u.ISettingRegistry],optional:[m.ILauncher,n.ICommandPalette,i.ICollaborativeDrive],autoStart:!0,activate:async(e,t,r,i,n,s,a,y,m,d,u,j,x,O)=>{p.PageConfig.getOption("jgis_expose_maps")&&(window.jupytergisMaps={});let T=null;try{T=await u.load(S),console.log(`Loaded settings for ${S}`,T)}catch(e){console.warn(`Failed to load settings for ${S}`,e)}const G=new g({name:h,modelName:I,fileTypes:[f],defaultFor:[f],tracker:t,commands:e.commands,externalCommandRegistry:n,manager:e.serviceManager,contentFactory:s,rendermime:y,mimeTypeService:a.mimeTypeService,consoleTracker:m});e.docRegistry.addWidgetFactory(G);const P=new c.MimeDocumentFactory({dataType:"json",rendermime:y,modelName:I,name:"JSON Editor",primaryFileType:e.docRegistry.getFileType("json"),fileTypes:[f]});e.docRegistry.addWidgetFactory(P);const v=new b({annotationModel:d,settingRegistry:u});e.docRegistry.addModelFactory(v),e.docRegistry.addFileType({name:f,displayName:"JGIS",mimeTypes:["text/json"],extensions:[".jgis",".JGIS"],fileFormat:"text",contentType:f,icon:l.logoMiniIcon});O&&O.sharedModelFactory.registerDocumentFactory(f,(()=>new o.JupyterGISDoc)),G.widgetCreated.connect(((i,o)=>{o.title.icon=l.logoIcon,o.context.pathChanged.connect((()=>{t.save(o)})),r.themeChanged.connect(((e,t)=>o.model.themeChanged.emit(t))),e.shell.activateById("jupytergis::leftControlPanel"),e.shell.activateById("jupytergis::rightControlPanel"),t.add(o).then((()=>{Object.values(l.CommandIDs).forEach((t=>{e.commands.hasCommand(t)&&e.commands.notifyCommandChanged(t)}))})).catch((e=>{console.error("Cannot update JupyterGIS commands",e)}))})),e.commands.addCommand(l.CommandIDs.createNew,{label:e=>"GIS File",caption:"Create a new JGIS Editor",icon:e=>l.logoIcon,execute:async t=>{var r;const n=t.cwd||(null===(r=i.tracker.currentWidget)||void 0===r?void 0:r.model.path);let s=await e.serviceManager.contents.newUntitled({path:n,type:"file",ext:".jGIS"});return s=await e.serviceManager.contents.save(s.path,Object.assign(Object.assign({},s),{format:"text",size:void 0,content:`{\n\t"schemaVersion": "${o.SCHEMA_VERSION}",\n\t"layers": {},\n\t"sources": {},\n\t"options": {"latitude": 0, "longitude": 0, "zoom": 0, "bearing": 0, "pitch": 0, "projection": "EPSG:3857"},\n\t"layerTree": [],\n\t"metadata": {}\n}`})),e.commands.execute("docmanager:open",{path:s.path,factory:h})}}),j&&j.add({command:l.CommandIDs.createNew,category:"Other",rank:1}),x&&(x.addItem({command:l.CommandIDs.createNew,args:{isPalette:!0},category:"JupyterGIS"}),x.addItem({command:l.CommandIDs.openLayerBrowser,category:"JupyterGIS"}),x.addItem({command:l.CommandIDs.newRasterEntry,category:"JupyterGIS"}),x.addItem({command:l.CommandIDs.newVectorTileEntry,category:"JupyterGIS"}),x.addItem({command:l.CommandIDs.newGeoJSONEntry,category:"JupyterGIS"}),x.addItem({command:l.CommandIDs.newHillshadeEntry,category:"JupyterGIS"}),x.addItem({command:l.CommandIDs.moveLayerToNewGroup,category:"JupyterGIS"}),x.addItem({command:l.CommandIDs.buffer,category:"JupyterGIS"}))}};var x=r(72226),O=r(35981),T=r(39983);class G{constructor(){this._registry=new Set}registerCommand(e){this._registry.add(e)}getCommands(){return[...this._registry]}}class P{constructor(){this._registry=[]}getRegistryLayers(){return[...this._registry]}addRegistryLayer(e){this._registry.push(e)}removeRegistryLayer(e){this._registry=this._registry.filter((t=>t.name!==e))}clearRegistry(){this._registry=[]}}const v=JSON.parse('{"ExportGeoJSONSchema":{"type":"object","required":["exportFileName"],"additionalProperties":false,"properties":{"exportFileName":{"type":"string","title":"GeoJSON File Name","default":"exported_layer","description":"The name of the exported GeoJSON file."}}},"ExportGeoTIFFSchema":{"type":"object","required":["exportFileName","resolutionX","resolutionY"],"additionalProperties":false,"properties":{"exportFileName":{"type":"string","title":"GeoTiFF File Name","default":"exported_layer","description":"The name of the exported GeoTIFF file."},"resolutionX":{"type":"number","title":"Resolution (Width)","default":1200,"minimum":1,"maximum":10000,"description":"The width resolution for the raster export."},"resolutionY":{"type":"number","title":"Resolution (Height)","default":1200,"minimum":1,"maximum":10000,"description":"The height resolution for the raster export."}}},"Buffer":{"type":"object","required":["inputLayer","bufferDistance"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for buffering."},"bufferDistance":{"type":"number","default":10,"description":"The distance used for buffering the geometry (in projection units)."},"embedOutputLayer":{"type":"boolean","title":"Embed output buffered layer in file","default":true}}},"Dissolve":{"type":"object","required":["inputLayer","dissolveField"],"additionalProperties":false,"properties":{"inputLayer":{"type":"string","description":"The input layer for the dissolve operation."},"dissolveField":{"type":"string","description":"The field based on which geometries will be dissolved."},"embedOutputLayer":{"type":"boolean","title":"Embed output dissolved layer in file","default":true}}},"HeatmapLayer":{"type":"object","required":["source","blur","radius"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1},"radius":{"type":"number","description":"Radius size in pixels","default":8},"blur":{"type":"number","description":"Blur size in pixels","default":15},"color":{"type":"array","items":{"type":"string"},"default":["#00f","#0ff","#0f0","#ff0","#f00"]},"symbologyState":{"type":"object","description":"The state of the symbology panel options","required":["renderType"],"properties":{"renderType":{"type":"string"},"colorRamp":{"type":"string","default":"cool"}}}}},"HillshadeLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"shadowColor":{"type":"string","description":"The color of the the shadows","default":"#473B24"}}},"ImageLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1}}},"RasterLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1}}},"VectorTileLayer":{"type":"object","required":["source","type"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"type":{"type":"string","enum":["circle","fill","line"],"default":"line","description":"The type of vector layer"},"color":{"type":"object","description":"The color of the the object"},"opacity":{"type":"number","description":"The opacity of the the object","default":1,"multipleOf":0.1,"minimum":0,"maximum":1}}},"VectorLayer":{"type":"object","required":["source","type"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"type":{"type":"string","enum":["circle","fill","line"],"default":"line","description":"The type of vector layer"},"color":{"type":"object","description":"The color of the the object"},"opacity":{"type":"number","description":"The opacity of the the object","default":1,"multipleOf":0.1,"minimum":0,"maximum":1},"symbologyState":{"type":"object","description":"The state of the symbology panel options","required":["renderType"],"properties":{"renderType":{"type":"string","enum":["Single Symbol","Graduated","Categorized"]},"value":{"type":"string"},"method":{"type":"string","enum":["color","radius"]},"colorRamp":{"type":"string","default":"cool"},"nClasses":{"type":"string","default":"9"},"mode":{"type":"string","default":"equal interval","enum":["quantile","equal interval","jenks","pretty","logarithmic"]}},"additionalProperties":false}}},"WebGlLayer":{"type":"object","required":["source"],"additionalProperties":false,"properties":{"source":{"type":"string","description":"The id of the source"},"opacity":{"type":"number","description":"The opacity of the source","default":1,"multipleOf":0.1,"minimum":0,"maximum":1},"color":{"oneOf":[{"type":"string"},{"type":"number"},{"type":"array","items":{"anyOf":[{"type":"string"},{"type":"number"},{"type":"array","items":{"anyOf":[{"type":"number"},{"type":"string"},{"type":"array","items":{"anyOf":[{"type":"number"},{"type":"string"}]}}]}}]}}],"description":"The color of the the object"},"symbologyState":{"type":"object","description":"The state of the symbology panel options","required":["renderType"],"properties":{"renderType":{"type":"string"},"band":{"type":"number"},"redBand":{"type":"number"},"greenBand":{"type":"number"},"blueBand":{"type":"number"},"interpolation":{"type":"string","enum":["discrete","linear","exact"]},"colorRamp":{"type":"string","default":"cool"},"nClasses":{"type":"string","default":"9"},"mode":{"type":"string","default":"equal interval","enum":["continuous","equal interval","quantile"]}},"additionalProperties":false}}},"GeoTiffSource":{"type":"object","required":["urls"],"additionalProperties":false,"properties":{"urls":{"type":"array","items":{"type":"object","properties":{"url":{"type":"string"},"min":{"type":"number"},"max":{"type":"number"}}},"minItems":1,"description":"URLs"},"normalize":{"type":"boolean","default":true},"wrapX":{"type":"boolean","default":false},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"ImageSource":{"type":"object","required":["path","coordinates"],"additionalProperties":false,"properties":{"path":{"type":"string","readOnly":true,"description":"Path that points to an image"},"coordinates":{"type":"array","readOnly":true,"items":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2},"minItems":4,"maxItems":4,"default":[],"description":"Corners of image specified in longitude, latitude pairs"},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"RasterDemSource":{"type":"object","required":["url"],"additionalProperties":false,"properties":{"url":{"type":"string","description":"The url to the tile provider"},"attribution":{"type":"string","description":"The attribution for the raster-dem source"},"urlParameters":{"type":"object","additionalProperties":{"type":"string"}},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"RasterSource":{"type":"object","required":["url","maxZoom","minZoom"],"additionalProperties":false,"properties":{"url":{"type":"string","description":"The url to the tile provider"},"minZoom":{"type":"number","minimum":0,"maximum":24,"readOnly":true,"description":"The minimum zoom level for the raster source","default":0},"maxZoom":{"type":"number","minimum":0,"maximum":24,"readOnly":true,"description":"The maximum zoom level for the raster source","default":24},"attribution":{"type":"string","readOnly":true,"description":"The attribution for the raster source","default":""},"htmlAttribution":{"type":"string","readOnly":true,"description":"The html attribution for the raster source","default":""},"provider":{"type":"string","readOnly":true,"description":"The map provider","default":""},"bounds":{"type":"array","readOnly":true,"items":{"type":"array","items":{"type":"number"}},"default":[],"description":"The bounds of the source"},"urlParameters":{"type":"object","additionalProperties":{"type":"string"},"default":{}},"interpolate":{"type":"boolean","description":"Interpolate between grid cells when overzooming?","default":false}}},"ShapefileSource":{"type":"object","required":["path"],"additionalProperties":false,"properties":{"path":{"type":"string","description":"The path to the shapefile (.shp, .zip, or folder URL)."},"attribution":{"type":"string","readOnly":true,"description":"The attribution for the shapefile source.","default":""},"projection":{"type":"string","description":"The projection information for the shapefile (optional).","default":"WGS84"},"encoding":{"type":"string","description":"The encoding used for the shapefile\'s DBF (optional).","default":"UTF-8"},"additionalFiles":{"type":"object","description":"Additional files associated with the shapefile (e.g., .dbf, .prj, .cpg).","additionalProperties":{"type":"string"},"default":{}}}},"VectorTileSource":{"type":"object","required":["url","maxZoom","minZoom"],"additionalProperties":false,"properties":{"url":{"type":"string","description":"The url to the tile provider"},"minZoom":{"type":"number","minimum":0,"maximum":24,"description":"The minimum zoom level for the vector source"},"maxZoom":{"type":"number","minimum":0,"maximum":24,"description":"The maximum zoom level for the vector source"},"attribution":{"type":"string","description":"The attribution for the vector source"},"provider":{"type":"string","readOnly":true,"description":"The map provider"},"urlParameters":{"type":"object","additionalProperties":{"type":"string"}}}},"VideoSource":{"type":"object","required":["urls","coordinates"],"additionalProperties":false,"properties":{"urls":{"type":"array","items":{"type":"string"},"minItems":1,"default":[],"description":"URLs to video content in order of preferred format"},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2},"minItems":4,"maxItems":4,"default":[],"description":"Corners of video specified in longitude, latitude pairs"}}},"GeoJSONSource":{"type":"object","required":[],"additionalProperties":false,"properties":{"path":{"type":"string","description":"The local path to a GeoJSON file"},"data":{"type":"object","description":"The GeoJSON data","$schema":"http://json-schema.org/draft-07/schema#","$id":"https://geojson.org/schema/GeoJSON.json","title":"GeoJSON","oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON GeometryCollection","type":"object","required":["type","geometries"],"properties":{"type":{"type":"string","enum":["GeometryCollection"]},"geometries":{"type":"array","items":{"oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Feature","type":"object","required":["type","properties","geometry"],"properties":{"type":{"type":"string","enum":["Feature"]},"id":{"oneOf":[{"type":"number"},{"type":"string"}]},"properties":{"oneOf":[{"type":"null"},{"type":"object"}]},"geometry":{"oneOf":[{"type":"null"},{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON GeometryCollection","type":"object","required":["type","geometries"],"properties":{"type":{"type":"string","enum":["GeometryCollection"]},"geometries":{"type":"array","items":{"oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON FeatureCollection","type":"object","required":["type","features"],"properties":{"type":{"type":"string","enum":["FeatureCollection"]},"features":{"type":"array","items":{"title":"GeoJSON Feature","type":"object","required":["type","properties","geometry"],"properties":{"type":{"type":"string","enum":["Feature"]},"id":{"oneOf":[{"type":"number"},{"type":"string"}]},"properties":{"oneOf":[{"type":"null"},{"type":"object"}]},"geometry":{"oneOf":[{"type":"null"},{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON GeometryCollection","type":"object","required":["type","geometries"],"properties":{"type":{"type":"string","enum":["GeometryCollection"]},"geometries":{"type":"array","items":{"oneOf":[{"title":"GeoJSON Point","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Point"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"number"}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON LineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["LineString"]},"coordinates":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON Polygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["Polygon"]},"coordinates":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPoint","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPoint"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"number"}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiLineString","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiLineString"]},"coordinates":{"type":"array","items":{"type":"array","minItems":2,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}},{"title":"GeoJSON MultiPolygon","type":"object","required":["type","coordinates"],"properties":{"type":{"type":"string","enum":["MultiPolygon"]},"coordinates":{"type":"array","items":{"type":"array","items":{"type":"array","minItems":4,"items":{"type":"array","minItems":2,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}},"bbox":{"type":"array","minItems":4,"items":{"type":"number"}}}}]},"valid":{"type":"boolean","description":"Whether the data are valid or not","readOnly":true}}}}');class J{constructor(e){this._registry=new Map(Object.entries(v)),this._docManager=e}registerSchema(e,t){this._registry.has(e)?console.error("Worker is already registered!"):this._registry.set(e,t)}has(e){return this._registry.has(e)}getSchemas(){return this._registry}getDocManager(){return this._docManager}}const q=[{id:"jupytergis:core:tracker",autoStart:!0,requires:[O.ITranslator],optional:[x.IMainMenu],provides:o.IJupyterGISDocTracker,activate:(e,t,r)=>{const i=new n.WidgetTracker({namespace:"jupytergis"});return console.log("jupytergis:core:tracker is activated!"),i}},j,{id:"jupytergis:core:form-schema-registry",autoStart:!0,requires:[T.IDocumentManager],provides:o.IJGISFormSchemaRegistryToken,activate:(e,t)=>new J(t)},{id:"jupytergis:core:external-command-registry",autoStart:!0,requires:[],provides:o.IJGISExternalCommandRegistryToken,activate:e=>new G},{id:"jupytergis:core:layer-browser-registry",autoStart:!0,requires:[],provides:o.IJGISLayerBrowserRegistryToken,activate:e=>(console.log("jupytergis:core:layer-browser-registry is activated"),new P)},{id:"jupytergis:core:annotation",autoStart:!0,requires:[o.IJupyterGISDocTracker],provides:o.IAnnotationToken,activate:(e,t)=>{var r;const i=new l.AnnotationModel({model:null===(r=t.currentWidget)||void 0===r?void 0:r.model});return t.currentChanged.connect(((e,t)=>{i.model=(null==t?void 0:t.model)||void 0})),i}}]}}]);